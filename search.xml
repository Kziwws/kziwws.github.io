<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>《寻谊》</title>
    <url>/2015/02/12/poetry20150212094616/</url>
    <content><![CDATA[<p>浅疏流萤入境来。梦翳斜娑，银烛泪墙白。<br>孤影倒挂映绿苔，忽知一夜情未猜！<br>靡靡千转呼天籁。意枕寒流，淡桥折谊在。<br>遥望绿浓红绸暧，行军虏马嘶声哀。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《拂长夜》</title>
    <url>/2015/02/12/poetry20150212091625/</url>
    <content><![CDATA[<p>憩落平仄红微墙 ，斓嫁楼裳白明窗。<br>摇去尘拂虽阻碍 ，颜欢皆平满城光。<br>任时何处夜长宵 ，梦渔溪钓无情扰。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《唯你不慊》</title>
    <url>/2015/02/12/poetry20150212101102/</url>
    <content><![CDATA[<p>唯心随影侧，匿景崦嵫色。<br>不作决别深，慊然云影走。<br>疑懒偏淩晨，因夜静藏枕。<br>只为寻游下，想尽梦浮华。<br>深缆一心月，爱在是天涯。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《恋》</title>
    <url>/2015/02/12/poetry20150212092232/</url>
    <content><![CDATA[<p>资丽清容绘花颜，忆影欣悦思梦连。<br>内向孤言怕羞面，一生几回修心变。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《游州河有感》</title>
    <url>/2015/02/15/poetry20150215222104/</url>
    <content><![CDATA[<p>   衣带州河红尘染，佳景华市人如仙。<br>   灯火重宵携入暮，曲径冰凝几陌路。<br>   星河吻对三千年，哪知人世时境迁。</p>
<p>   by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《无心》</title>
    <url>/2015/12/23/poetry20151223083608/</url>
    <content><![CDATA[<p>华亭散漫风萧处，不现萦纡见浮层。<br>凡尘若是千非尽，只怪离人自有心。<br>满庭蒲扇护春草，人拟何时归残物。<br>亦作磐石盘恒心，不识烟火不赏美。<br>秋殇秋夜秋落叶，与人与事与朝夕。<br>曾有心销声匿迹，终无归人辗转起。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《採桑》</title>
    <url>/2018/06/20/poetry20180620150223/</url>
    <content><![CDATA[<p>水流脩荺声潺泱，风遇花蕾馥郁芳。<br>残月诗里离合道，佳人烟波阁楼霄。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《余生》</title>
    <url>/2018/07/28/poetry20180728015521/</url>
    <content><![CDATA[<p>弥静黑夜中的烛火<br>斑斑点点<br>彻夜通明<br>萦绕着小时候的记忆<br>你诉说理想<br>清澈明亮的眼睛<br>沾染不得生活的一丝浑浊<br>匆匆茫茫的行人<br>从不打烊的灯光<br>映忖着城市的繁华与喧嚣<br>每个长大的人<br>都演绎着哀忧悲怆<br>不一样的肝肠<br>痴心妄想的疯狂<br>从灵魂里涌入冰凉<br>遮住双眼<br>余生太长<br>这俗世<br>这一杯<br>这一次<br>为你行走锋芒</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《彼岸》</title>
    <url>/2018/07/28/poetry20180728015635/</url>
    <content><![CDATA[<p>晚风给予你一丝清凉<br>抚去欲望与焦灼<br>每个闯荡归来的人<br>暮色都会赐予神秘的面纱<br>至此不分娇韵的脸庞<br>从还音行断<br>沉色暗涌<br>半生月色意在眉弯<br>许诺风声余留两尖<br>蝉鸣不知白昼<br>逾越一个又一个萧稠<br>叶落不知殇秋<br>辜负了一个又一个挽留<br>涓涓溪流<br>日月盘恒邻水至洲<br>愿作你流淌着的热血<br>拥有你的生息与衰亡<br>寒风总伴夜雪苍白人<br>尤留世间容褶白赴<br>蒯覆石泐凝霜<br>回首凝望<br>愿你醒来亦是彼岸<br>拥有了不一样的星光</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《梦宵》</title>
    <url>/2018/08/05/poetry20180805051120/</url>
    <content><![CDATA[<p>梦里想见到的人<br>大概在梦里也会找她吧<br>寻寻觅觅<br>大概也会从梦里惊醒吧<br>山中兰若<br>绝迹蓬蒿<br>云雨楚楚<br>化作烟雨倾覆你<br>执枪八方<br>暮雪空壕<br>沙场言笑<br>吹彻画角<br>江南晚客红绳发梢<br>胜者归来<br>卿与良宵</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《再无春夏与秋冬》</title>
    <url>/2018/12/23/poetry20181223024620/</url>
    <content><![CDATA[<p>凡尘疑似千非尽<br>生命有时就像花开时<br>花开蝶影总会有好多顾虑<br>也许都隐藏了自己的多少秘密<br>生活不知道诉说了多少不甘和苦涩<br>又在黑夜里放纵了多少笙歌<br>灵魂里沉睡的自己<br>不知道何时会有希望和光明<br>一个又一个的懦弱和胆怯<br>一个又一个的倾述和陪伴<br>时间里的那些人<br>永远总会有人去你不该去的地方<br>做你不可能做的事情<br>你不理解她的过去<br>也不明白她的未来<br>所有存储在大脑里的絮物<br>都像风一样<br>有的飘走<br>有的视如自己犹如生命的东西<br>都在漠然里退场<br>有时候不知道是岁月伤害了我<br>还是承诺辜负了岁月<br>当你拼命去想拯救的东西<br>后来都变成新的曲殇<br>有时候很想问<br>这个世界上哪有沾满鲜血的手<br>是不去曾经掏过别人的心的<br>枝头的鸟<br>明天会迎来新的黎明<br>岁月的伤痕<br>永远都会慢慢流失<br>只是生活不曾实现过承诺<br>也没能挽救那只<br>想要日落黄昏归去的小鸟<br>于是一次又一次的在夜幕里<br>黑暗笼罩了它的双眼<br>再也找不到自己的方向<br>如果小鸟饮的不是淡水<br>那它应该也不会”食盐”吧<br>在黑夜里寂静的死亡<br>等待的又一个黎明<br>只是再无那只小鸟<br>再无春夏与秋冬</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《白首辞》</title>
    <url>/2019/03/17/poetry20190317032120/</url>
    <content><![CDATA[<p>梨花参差春带雨，揽衣起舞暮暮情。<br>昨夜星辰昨夜风，月如君兮君不梦。<br>十里煌绸心聒碎，觑于朝暮翩跹度。<br>落樱春水世难顾，共逝与谁续白昼。<br>枕疏眉语几声留，相寻娇云东逝走。<br>清风拂尘契相生，只语阑珊未羞眸。<br>等闲春深懒红妆，彻鼓欲新待思量。<br>孤鸿寒枝未可栖，天地风情任由意。<br>有情萧何百年过，身陷囹圄良人许。<br>斯时一人一心忧，月上柳梢云未休。<br>何人与你共消酒，化作相思酿作泥。<br>誓恨成蝶伴花丛，枫林风下诉情话。<br>烟雨朦胧未见他，念旧时过往真假。<br>谦逊言温婉举止，再梦回红尘晚霞。<br>形单影只长路漫，不畏牵绊朱颜改。<br>天若有情天亦老，步尘时遥知谁好。<br>知荣岁月度匆忙，恋一生儿女情长。<br>悲欢离合世事道，策马一声诲人啸。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《故乡桃花》</title>
    <url>/2019/01/22/poetry20190122003921/</url>
    <content><![CDATA[<p>十里桃花<br>三月情染风韵年华<br>冰冷指间<br>难解落雁为谁红霞<br>飘洒延绵风纱<br>漫天定温婉如画<br>空留一毯绿叶红花<br>故乡的桃花<br>风悠悠相思寄眉头<br>十里桃花<br>倔强的年华<br>挥洒热血<br>梦里烟花<br>三春遗落成过往<br>缠绵成桂香<br>镜花水月<br>回眸映前世三千姻缘<br>故乡那时的桃花</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《寄俗》</title>
    <url>/2019/05/12/poetry20190512025624/</url>
    <content><![CDATA[<p>林泉鹿栖复一身，叶落终閒滋无穷。<br>酒醴霜风有虏尘，竹帘疏漏半锩空。<br>三生六尘濯百绮，凌山云蕴君难迹。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《半生客》</title>
    <url>/2019/06/24/poetry20190624025820/</url>
    <content><![CDATA[<p>明月谱上轩窗<br>几度借閒云伴容妆<br>滋味难当<br>叹息浮生<br>月影门前照东墙<br>君子契阔<br>半生青丝白唯长<br>樽酒一杯醉兀人数几时休<br>多少人知灯火阑珊轻抚泪角<br>静夜疯长各恃一方<br>清风寄沥浥轻尘<br>蛐曲新色<br>岁聿其莫<br>轻离别<br>几团圆月<br>春归故园情如昨丝<br>过一段温暖时光<br>度一夜清凉夜色<br>此生渺<br>夜色故<br>三生六尘绕过归墟<br>画中知晓<br>玫瑰花香<br>抚一曲<br>宛若星河似你</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《赤雨》</title>
    <url>/2019/07/07/poetry20190707032356/</url>
    <content><![CDATA[<p>隐雨飒沓檐声无边<br>淋落在晦黯之间<br>绿阴泛起了思恋<br>长天皓洁一瞬<br>是谁乱了经年<br>变迁红尘蔓延<br>把一缕缠绵化作美眷<br>誓言心田<br>付流蒹葭<br>揭颜一发<br>一盏清茶<br>心自放下<br>泼墨熟宣执笔而画<br>微微红浥侧面脸颊<br>情愫一遍<br>昨日丢失梦里的潇洒<br>一匣信件<br>道不尽情意的话<br>谁能轻易<br>赴约此间风月<br>乱成桑麻<br>难情落寞心血来合<br>凭谁问<br>钟鼓馔玉<br>枯骨青灰皆如何</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《妄念》</title>
    <url>/2019/09/01/poetry20190901052013/</url>
    <content><![CDATA[<p>“我们凭着本能，在黑夜中开了迷宫的门，没有走出去。在一次次的碰壁中，我们擦燃了火焰。一个人就是木屑或是草堆，是易燃的，不然何来那么多的心如死灰。”</p>
<p>嘴唇尝到泪水，<br>身体正经历一个雨天，它在收尾，可收尾是那么迟缓。<br>用颤栗的手掌握着你临近深渊的手掌，<br>将散的魂魄仍在寻觅缺失的螺丝，<br>我无法解决自己在人世间松动的问题，<br>为你摇曳，不确定何为悲，何为欢。<br>一直坠，<br>也一直追。<br>鲸鱼搁浅，为一生到异地，见风景，死而无憾。<br>我拂逆青春太多年，匆忙成熟，只为你摘我一瓣花。<br>花，你摘去，香气附赠。<br>郁郁的我啊，<br>去舀一勺你的泪，来解渴，来弥补缺失，来劝说自己值得。<br>秋天凝一滴心头血给这个清晨，<br>露珠重，滑离了叶。<br>大树于是恸哭。<br>你未醒来，我未醒来的清晨，<br>鸟鸣过于烈脆，如恶语，不承认我们的重叠。<br>瓜分昙花一现的温柔。<br>洗去昨夜的风。</p>
<p>《转自片刻-卡尔西法》</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>转录</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《庾居》</title>
    <url>/2019/10/17/poetry20191017032345/</url>
    <content><![CDATA[<p>顾长人决终渐歇<br>谁执低眉纸迹往事越<br>翌生两世<br>患失不惑<br>夜长身影疏狂<br>薄年清辉待敛容<br>袂尔星辰夜寐<br>蕎麦苦瘠白花开<br>菡萏染淤清浮来<br>不辨妍媸<br>不论相识<br>不可思量<br>心生久腹分自当<br>背时离其问何妨<br>结侣提携<br>夙明初日熟稔乡<br>共卮回时残缺辞<br>生有所畏<br>清霄温凉<br>误尽人间芳菲</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《道别》</title>
    <url>/2020/01/25/poetry20200125011002/</url>
    <content><![CDATA[<p>雨捻露珠落日缓，长河风骨执平川。<br>残月诗里离合道，情上阁楼玉弦消。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《孟春宿雨》</title>
    <url>/2020/01/18/poetry20200118022002/</url>
    <content><![CDATA[<p>孟春宿雨，秩满花明又柳暗。平纱长梦，近在咫尺中。<br>行以朝夕，沧海白云济。人来去。知新故旧，醉卧黄昏骤。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《梦杳云阙》</title>
    <url>/2020/02/19/poetry20200219101102/</url>
    <content><![CDATA[<p>梦杳云阙，绢生琉璃月。野游乌榆湛云穴，仓皇破砧残垣。<br>吟酌思复千年，昙花为雨难现。闲居朝屏饮血，月魅中疏圆缺。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《九寒花开》</title>
    <url>/2020/03/18/poetry20200318140924/</url>
    <content><![CDATA[<p>九寒九尽花开，几阶寒清，孤伶一零星。<br>若熠星火怀长情，诉愿厢伴向天明。<br>烟黔五内，一语成谶，朝夕各自揾。<br>满笑风城，试问人间作客人？</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《笺相思》</title>
    <url>/2020/03/20/poetry20200320020123/</url>
    <content><![CDATA[<p>知熟心相月，谈秋往事怯。<br>花窗连枝妍，辗转红尘悦。<br>冬日压覆雪，城池患得挟，<br>生死自暗驿，寥寥两世决。<br>夜半鬓白丝，随笔落相思。<br>展卷心切辞，化骨笺纸史。<br>风露重来过，纠葛纷如我<br>茶酒情可多，塑世红莲坐。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《四月天》</title>
    <url>/2020/03/19/poetry20200319160323/</url>
    <content><![CDATA[<p>你是人间四月天，初芽泛绿伴炊烟。<br>谈笑三千遇柔肠，半世年华情模样。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《待何年》</title>
    <url>/2020/03/21/poetry20200321170326/</url>
    <content><![CDATA[<p>邀明赴月春何年，年年相恃池畔残。<br>莺飞四月杨柳堤，堪情一世误尘缘。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《林斜阳》</title>
    <url>/2020/03/19/poetry20200319151235/</url>
    <content><![CDATA[<p>闲歇归兮天苍茫，林榭下日落残阳。<br>残枝畏寒几阶漫，共赴山河醉春山。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《半承言》</title>
    <url>/2019/07/22/poetry20190722034245/</url>
    <content><![CDATA[<p>风雨如晦即君子，酒故重逢伴乌蓬。<br>匆揉四海据拥有，闲岁梦入北风中。</p>
<p>by:霜</p>
<p>[风雨如晦，鸡鸣不已。<br>既见君子，云胡不喜？<br>风雨交加昏天地，窗外鸡鸣声不息。<br>风雨之时见到你，心里怎能不欢喜。]</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《往昔》</title>
    <url>/2020/03/22/poetry20200322030122/</url>
    <content><![CDATA[<p>草莺绕飞堤，独自殇离凄。<br>落松曾规啼，已成旧时昔。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《埋藏》</title>
    <url>/2020/03/21/poetry20200321171321/</url>
    <content><![CDATA[<p>盈花落尽年少轻狂，白首青丝泪且两行。<br>堪岁月缕缕成风霜，一腔热血为谁埋藏。<br>媚了红妆红尘向往，恩恩怨怨处处痴狂。<br>纵马沧桑天地相忘，云下青衫浴沐悲伤。<br>繁华荡气逐梦一场，朝暮浮云赴寄谁望。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《春红》</title>
    <url>/2020/03/22/poetry20200322132112/</url>
    <content><![CDATA[<p>白云作伴遍地黄，桃花褪红人情郎。<br>人前烟雨润琵琶，雨凝泪珠傍谁旁。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《醉无可托》</title>
    <url>/2020/03/22/poetry20200323160213/</url>
    <content><![CDATA[<p>斜阳西照已迢迢，氤氲无限渺。晦桥柔行太匆匆，人流散尽东风中。<br>欲解灯前念谁何，一杯月可托。问君生畏何事多？最难异乡醉墙说。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《桃花落》</title>
    <url>/2020/03/25/poetry20200325112308/</url>
    <content><![CDATA[<p>映入桃花池畔前，画红漪沦年年妍。<br>一丝一缕沁心房，执迷不误落红浅。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《兰花吟》</title>
    <url>/2020/03/24/poetry20200324130249/</url>
    <content><![CDATA[<p>馥气芬芳尘染华，春烟彩蝶永携跋。<br>兰植为期托香繋，不及千山伴晚霞。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《皑城》</title>
    <url>/2020/03/26/poetry20200326124002/</url>
    <content><![CDATA[<p>青山淇岸汀白芷，瑶城皑皑凝波姿。<br>清风丽影常情客，载酒佳话人来思。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《落日残红》</title>
    <url>/2020/03/27/poetry20200327110824/</url>
    <content><![CDATA[<p>桃花褪红漫飘渺，风吹拂梢千丝绕。<br>遍地黄花窈欲高，落日残红风絮遥。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《惊鸿》</title>
    <url>/2020/03/28/poetry20200328123409/</url>
    <content><![CDATA[<p>桃绯闭涩落肩红，惜柔暖阳画里梦。<br>最右一枝摇曳风，扶手依翩若惊鸿。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《牵肠梦》</title>
    <url>/2020/03/30/poetry20200330010604/</url>
    <content><![CDATA[<p>雨矢入暮空人逢，万籁东西无影重。遗恨风吹花残悴，人言醉，八百回？<br>落里雪红牵肠梦，痴人难辨归里尘。芳迟羞阻冷媒户，窣身处，声噫呜。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《难咎》</title>
    <url>/2020/04/10/poetry20200410120123/</url>
    <content><![CDATA[<p>红梅难咎赋雪搂，帘卷交织人依旧。恩怨离仇，烧一烛疏楼。<br>岁杪无凭逆西洲，炉眠翁媪白发守。户落轻鸥，暖一时清流。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《浪声有愧》</title>
    <url>/2020/04/15/poetry20200415042103/</url>
    <content><![CDATA[<p>没有大漠<br>只有慢慢消失在<br>窗台下、栅栏处、林榆间、眼泪里的夕阳<br>夜里带着疲惫深邃的黑<br>无畏闯荡只为那生来的一丝倔强<br>如果桃源的安宁是一方净土<br>城市楼宇的繁华是此起彼伏的褶皱<br>我愿意放下所有<br>为你的孤独安放自由<br>插上翅膀伴一叶扁舟<br>许下一世的温柔<br>水潭清幽可见鱼儿轻游<br>你说那是束缚、不可抗拒的理由<br>你说羡慕大海碧蓝、海天相阔、鲸鱼遨游<br>你说风里雨里、都安静地沉默在水里再也不会淋雨<br>混沌之中早已冥冥<br>偏执执拗仍不回头<br>我领悟这蚍蜉撼树的道理<br>饮一碗清粥<br>续一壶浊酒<br>浇一快要枯萎的盆植<br>怀揣一席的温柔 洒满整个深秋<br>把遗憾搁在昨天 并非我本意<br>折一只船 用于存放大海<br>有想着波涛汹涌 实则浪声有愧<br>于是把昨天幻化成了文字<br>埋藏在了你无声的岁月里<br>现在的你<br>你懂 他也懂<br>有很多解释没有等到需要理解那一天<br>还是那种感觉<br>想将你送去港湾 为了躲避赤裸的人间<br>昼夜如斯 我们都在感同<br>你不在是你<br>我也不再做自己的一抹云烟</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗歌</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《朝暮有情》</title>
    <url>/2020/04/24/poetry20200424010321/</url>
    <content><![CDATA[<p>凛寒无花江潋潋，暧濯木秾李纤纤。沌河泽缪绕，浑浑暮暮朝。</p>
<p>罗敷桑蚕女，襦绮妍姿玉。蜂腹花与蜜，青志有情痴。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《心徜徉》</title>
    <url>/2020/04/30/poetry20200430120106/</url>
    <content><![CDATA[<p>云卷谧疏层羽暮，斜阳卸下殇情袱。<br>作苦诗词风勤雨，许趁惊鸿绘婉玉。<br>入梦枕枝残片香，卿月此身伴君长。<br>凭栏共赏心徜徉，从此不再话沧桑。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《千嶂古木昏》</title>
    <url>/2020/05/14/poetry20200514110322/</url>
    <content><![CDATA[<p>千嶂厌浥，红楼过淅沥。取次草莺风嘻戏，沧澜重逢落残棋。<br>轻诋哀梨蒸食，川行东流人顾昏，捕云不休未前门，万里行舟浪迹深。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《难》</title>
    <url>/2020/05/10/poetry20200510100216/</url>
    <content><![CDATA[<p>素鸡诚。面围纶。直味中规不合饂。<br>暂声切。火煨炙。熟梨蒸食，实指为瞒。<br>难。难。难。<br>腹中宴。心切馋。人急伴作深巷湾。<br>拟情还。待君观。历三红愿，再点前缘。<br>伴。伴。伴。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《掩埋》</title>
    <url>/2020/05/28/poetry20200528021344/</url>
    <content><![CDATA[<p>笑雨春风夕迟顾，青山遗忘任几出，无数，彷徨来时路。<br>青春荏苒流光束，寒红尤染雪里途，昙华，残刃何年纷葬墓。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>《晚秋》</title>
    <url>/2021/08/21/poetry20210821102025/</url>
    <content><![CDATA[<p>庭前落尽梧桐，红尘尽染萧风。<br>黄粱舞色一梦，承旧已逝春秋。<br>贫富孰与睢鸠，黄泉背赴一宿。<br>叶落参差为何？黄昏秃柳间驹。<br>劳陇头五六清，道尽天下三分。<br>日暮剪烛皈客，人言西沉可多。</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>IOS关于极光推送JPush不能上报deviceToken的问题</title>
    <url>/2017/06/12/technology20170612104702/</url>
    <content><![CDATA[<p><font color="red"><strong>问题一、</strong></font><font color="red"> ld:library not found for -ljpush-ios-3.0.9</font><br>    clang: error: linker command failed with exit code 1 (use -v to see invocation)</p>
<p><font color="red"><strong>问题二、</strong></font><font color="red">JIGUANGDeviceTokenController</font> Not get deviceToken yet. Maybe: your certificate not configured APNs? or current network is not so good so APNs registration failed?  or there is no APNs register code? Please refer to JPush docs.</p>
<h5 id="由于项目比较老，推送的SDK版本比较低的原因，之前老的项目可以正常推送，现在在旧项目基础上新改版的一个app不能正常推送，推送账号一切都是正常的。"><a href="#由于项目比较老，推送的SDK版本比较低的原因，之前老的项目可以正常推送，现在在旧项目基础上新改版的一个app不能正常推送，推送账号一切都是正常的。" class="headerlink" title="由于项目比较老，推送的SDK版本比较低的原因，之前老的项目可以正常推送，现在在旧项目基础上新改版的一个app不能正常推送，推送账号一切都是正常的。"></a>由于项目比较老，推送的SDK版本比较低的原因，之前老的项目可以正常推送，现在在旧项目基础上新改版的一个app不能正常推送，推送账号一切都是正常的。</h5><a id="more"></a>

<h4 id="解决问题一"><a href="#解决问题一" class="headerlink" title="解决问题一"></a><font color="red">解决问题一</font></h4><p>查询了相关的网上解决办法</p>
<ul>
<li><p><strong>一、</strong>在Build Settings 中的 Library Search Paths 中手动添加其路径。</p>
</li>
<li><p><strong>二、</strong>在Build Phases 中的 Link Binary With Libraries删除重新添加,有的说是物理路径删除了，引用的路径还在，会出现红色文件缺失，在这儿我根本没有找到对应的.a文件。然后我重新添加上去也根本没有效果。</p>
</li>
<li><p><strong>三、</strong>已经使用了CocoaPods更新到jpush-ios-3.1.2,开始的时候出现了两个，引用路径只有一个，删除了以前的3.0.9的版本，重新添加，一样的无效。</p>
</li>
</ul>
<p>最后查找到一个方法说在<font color="#4183C4">  <code>&quot;xxxx&quot;.xcodeproj</code></font> 文件显示包内容，打开以文本显示。然后比如你缺失的一个<font color="#4183C4"> <code>SDK</code> </font>或者<font color="#4183C4"> <code>.a</code></font>文件名称在里面全局搜索到所有引用到这个文件的地方然后在替换成前面报的错的地方的文件名称<font color="#4183C4">  <code>ljpush-ios-3.0.9</code> </font>换成<font color="#4183C4">  <code>ljpush-ios-3.1.2</code> </font></p>
<p><font color="red">注意:这儿修改如过害怕修改配置错误，你可以先备份一份。因为这个修改错误项目有的会打不开。</font></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">MARKETING_VERSION = 1.5.5;</span><br><span class="line">  OTHER_LDFLAGS = (</span><br><span class="line">  "$(inherited)",</span><br><span class="line">  "-ObjC",</span><br><span class="line">  "-l\"GZCQRCodeManager\"",</span><br><span class="line">  "-l\"c++\"",</span><br><span class="line">  "-l\"jcore-ios-2.1.8\"",</span><br><span class="line">  "-l\"jpush-ios-3.0.9\"",   </span><br><span class="line">  -&gt;这儿换成你需要的 "jpush-ios-3.1.2"</span><br><span class="line">  "-l\"resolv\"",</span><br><span class="line">  "-l\"z\"",</span><br><span class="line">  "-framework",</span><br><span class="line">  "\"Bugly\"",</span><br><span class="line">  "-framework",</span><br></pre></td></tr></table></figure>

<h5 id="修改了过后重新-clean-build-floder一下-然后重新运行。是不是已经可以编译通过了。"><a href="#修改了过后重新-clean-build-floder一下-然后重新运行。是不是已经可以编译通过了。" class="headerlink" title="修改了过后重新 clean build floder一下,然后重新运行。是不是已经可以编译通过了。"></a>修改了过后重新 <code>clean build floder</code>一下,然后重新运行。是不是已经可以编译通过了。</h5><p>这儿多说一点点，就是在SVN提交代码的时候，难免会冲突。有时候开发项目，是其他同事一起修改然后提交了造成的小的冲突问题不大，有时候直接修改一下就能编译通过了。但是有时候严重的时候直接项目都打不开了情况下。</p>
<p>也是同样的原理直接打开上面”xxxx”.xcodeproj文件搜索</p>
<ul>
<li>粘贴这个符号<code>---</code> 搜索出来的地方，删除乱码。</li>
<li>符号<code>---&gt;</code>搜索出来的地方，删除乱码。</li>
<li>符号<code>&lt;---</code>搜索出来的地方，删除乱码。</li>
</ul>
<h5 id="这个处理过后在保存应该就可以正常打开项目了"><a href="#这个处理过后在保存应该就可以正常打开项目了" class="headerlink" title="这个处理过后在保存应该就可以正常打开项目了"></a>这个处理过后在保存应该就可以正常打开项目了</h5><h4 id="解决问题二"><a href="#解决问题二" class="headerlink" title="解决问题二"></a><font color="red">解决问题二</font></h4><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didRegisterForRemoteNotificationsWithDeviceToken:(<span class="built_in">NSData</span> *)deviceToken &#123;</span><br><span class="line">    [JPUSHService registerDeviceToken:deviceToken];<span class="comment">//注册设备token</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didFailToRegisterForRemoteNotificationsWithError:(<span class="built_in">NSError</span> *)error &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"didFailToRegisterForRemoteNotificationsWithError %@"</span>, error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这儿这两个方法都直接没有进入，但是之前在3.1.2的版本在另外一个项目中可以推送，是另外一个同事负责的。所以我一直觉得应该代码没什么问题，是不是在注册通知的时候版本不同造成的于是修改了以下代码。</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*向APNs注册，获取deviceToken用于推送*/</span></span><br><span class="line">-(<span class="keyword">void</span>)registerAPNS:(<span class="built_in">UIApplication</span> *)application&#123;</span><br><span class="line">    <span class="keyword">float</span> systemVersionNum = [[[<span class="built_in">UIDevice</span> currentDevice] systemVersion] floatValue];</span><br><span class="line">    <span class="keyword">if</span> (systemVersionNum &gt;= <span class="number">10.0</span>) &#123;</span><br><span class="line">        <span class="comment">// iOS 10 notifications</span></span><br><span class="line">        _notificationCenter = [UNUserNotificationCenter currentNotificationCenter];</span><br><span class="line">        <span class="comment">// 创建category，并注册到通知中心</span></span><br><span class="line">        [<span class="keyword">self</span> createCustomNotificationCategory];</span><br><span class="line">        </span><br><span class="line">        _notificationCenter.delegate = <span class="keyword">self</span>;</span><br><span class="line">        <span class="comment">// 请求推送权限</span></span><br><span class="line">        [_notificationCenter requestAuthorizationWithOptions:UNAuthorizationOptionAlert | UNAuthorizationOptionBadge | UNAuthorizationOptionSound completionHandler:^(<span class="built_in">BOOL</span> granted, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">            <span class="keyword">if</span> (granted) &#123;</span><br><span class="line">                <span class="comment">// granted</span></span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@"User authored notification."</span>);</span><br><span class="line">                <span class="comment">// 向APNs注册，获取deviceToken</span></span><br><span class="line">                <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    [application registerForRemoteNotifications];</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// not granted</span></span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@"User denied notification."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (systemVersionNum &gt;= <span class="number">8.0</span>) &#123;</span><br><span class="line">        <span class="comment">// iOS 8 Notifications</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> clang diagnostic push</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> clang diagnostic ignored<span class="meta-string">"-Wdeprecated-declarations"</span></span></span><br><span class="line">        [application registerUserNotificationSettings:</span><br><span class="line">         [<span class="built_in">UIUserNotificationSettings</span> settingsForTypes:</span><br><span class="line">          (<span class="built_in">UIUserNotificationTypeSound</span> | <span class="built_in">UIUserNotificationTypeAlert</span> | <span class="built_in">UIUserNotificationTypeBadge</span>)</span><br><span class="line">                                           categories:<span class="literal">nil</span>]];</span><br><span class="line">        [application registerForRemoteNotifications];</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> clang diagnostic pop</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// iOS &lt; 8 Notifications</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> clang diagnostic push</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> clang diagnostic ignored<span class="meta-string">"-Wdeprecated-declarations"</span></span></span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotificationTypes:</span><br><span class="line">         (<span class="built_in">UIRemoteNotificationTypeAlert</span> | <span class="built_in">UIRemoteNotificationTypeBadge</span> | <span class="built_in">UIRemoteNotificationTypeSound</span>)];</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> clang diagnostic pop</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>增加了在IOS10以上设备注册通知的兼容性问题，然而在他的设备上IOS 13.1 是正常的，在我自己的设备上还是一样的不进入<code>didRegisterForRemoteNotificationsWithDeviceToken</code>函数。挺郁闷的既然不是这个注册的原因，然后放弃了这种修改代码的想法。</p>
<p>然后去网上查找到</p>
<ul>
<li><p><strong>一、</strong>说有可能是其他SDK重写了AppDelegate类的方法<code>didRegisterForRemoteNotificationsWithDeviceToken</code>导致没有进入这个函数。但是我查找了并没有出现这个问题，所以这个排除了。</p>
</li>
<li><p><strong>二、</strong>检查通知开关是否开启(这个我压根不用怀疑)，<code>push</code>证书<code>entitlements</code>文件也是有的，也排除了。</p>
</li>
</ul>
<h4 id="办法"><a href="#办法" class="headerlink" title="办法:"></a>办法:</h4><p>后来发现在<code>IOS13.1</code>以下的版本，可以进去，但是有时候会出现Not get deviceToken yet. Maybe: your certificate not configured APNs? or current network is not so good so APNs registration failed?  or there is no APNs register code? Please refer to JPush docs.然后在我自己的手机设备是直接无法访问。后来去<a href="http://docs.jiguang.cn/jpush/updates/" target="_blank" rel="noopener">极光官网</a>看了更新记录文档。发现</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">JPush iOS SDK v3.2.0</span><br><span class="line">更新记录</span><br><span class="line">    根据JCore 2.0进行JPush重构，性能优化</span><br><span class="line">    JCore 要求版本在2.0以上</span><br><span class="line">    删除了setupWithOption:launchingOption 初始化接口，不再支持pushConfig.plist方式集成</span><br><span class="line">    优化消息状态上报逻辑</span><br><span class="line">    修复已知bug</span><br></pre></td></tr></table></figure>
<h5 id="看到了过后前面还有几个版本，没有怀疑直接更新了。"><a href="#看到了过后前面还有几个版本，没有怀疑直接更新了。" class="headerlink" title="看到了过后前面还有几个版本，没有怀疑直接更新了。"></a>看到了过后前面还有几个版本，没有怀疑直接更新了。</h5><p>修改了<code>pod &#39;JPush&#39;, &#39;~&gt; 3.2.0&#39;</code> 然后在 <code>pod update</code> 更新完过后重新运行。没错现在都会进去了 <code>didRegisterForRemoteNotificationsWithDeviceToken</code> 了，在测试了一下，在高版本也是正常可以推送了。</p>
<h5 id="到这儿为止是不是觉得想笑了，瞎折腾，哈哈哈。"><a href="#到这儿为止是不是觉得想笑了，瞎折腾，哈哈哈。" class="headerlink" title="到这儿为止是不是觉得想笑了，瞎折腾，哈哈哈。"></a>到这儿为止是不是觉得想笑了，瞎折腾，哈哈哈。</h5>]]></content>
      <categories>
        <category>ios</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title>《叹平生》</title>
    <url>/2022/10/16/poetry20221016194425/</url>
    <content><![CDATA[<p>烟花划过夜空<br>迷失了影踪<br>你却说那是逐行苍穹<br>愿来世可以化作星弓<br>守护你晨饮朝露夜伴晚风<br>化成高墙倔强黯然成伤<br>千载梦 万般空<br>百转柔肠 路在消亡<br>诗与行囊身寄他乡<br>容与鬓斑记忆犹长<br>天涯敢闯荆棘万方<br>想要理想还是追寻你的航向奔向远方<br>不知道被这棉被裹住身体会不会有时候感受不到温凉<br>不知道在黑暗的角落是否有陌生人倾泪悲伤<br>不知道在这更替的夜里是否又有人坦荡<br>心有万人肠 何来人间转辗一趟？</p>
<p>by:霜</p>
]]></content>
      <categories>
        <category>诗</category>
        <category>诗词</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客landscape-plus加入评论系统Valine</title>
    <url>/2018/03/02/technology20180302110621/</url>
    <content><![CDATA[<p>Landscape-plus主题使用的是”多说“，但是多说早就停止运营了。</p>
<p>所以考虑其他的评论系统替换，这儿我查找了其他的评论如<code>Disqus</code>、<code>Gitment</code>、<code>来必力</code>等，如果需要集成Gitment评论系统的可以参考<a href="https://imsun.net/posts/gitment-introduction/" target="_blank" rel="noopener">这一篇文章</a>，我最后选择了valine。</p>
<p>这儿参考了<a href="https://bfdz.github.io/2017/10/29/60/" target="_blank" rel="noopener">博客添加评论系统</a>这篇文章，感谢这位小哥！</p>
<h4 id="使用valine介绍"><a href="#使用valine介绍" class="headerlink" title="使用valine介绍"></a>使用valine介绍</h4><p>   高速，使用国内后端云服务提供商 LeanCloud 提供的存储服务<br>   开源，自定义程度高<br>   支持邮件通知<br>   支持验证码<br>   支持 Markdown</p>
<h4 id="valine-的安装和使用"><a href="#valine-的安装和使用" class="headerlink" title="valine 的安装和使用"></a>valine 的安装和使用</h4><ul>
<li><p>前往<a href="https://leancloud.cn注册" target="_blank" rel="noopener">https://leancloud.cn注册</a> appid和appkey。</p>
</li>
<li><p>这儿是对<a href="https://github.com/xiangming/landscape-plus" target="_blank" rel="noopener">landscape-plus</a>修改，替换之前的<code>Duoshuo</code>，首先打开主题下的<code>_config.yml</code>去掉主题下的</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># Duoshuo</span><br><span class="line">duoshuo_shortname: reqianduan</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>“换成”</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#valine leancloud</span><br><span class="line">valine_enable: true # 是否开启 控制评论的开关</span><br><span class="line">valine:</span><br><span class="line">  appid: kh6N00Qk8UIhu1N8Qfu168TH-g3gzo7sz #leancloud中的appid  换成你申请的 这儿这个id是无效的</span><br><span class="line">  appkey: YJrjTtExKMfc45OMLWhCzpHk #leancloud中的appKey 换成你申请的 这儿这个key是无效的</span><br><span class="line">  placeholder: 想说点什么...  #默认留言框内的文字</span><br><span class="line">  notify: false  #新留言是否需要通知 https://github.com/xCss/Valine/wiki</span><br><span class="line">  verify: false  #是否需要验证 验证比较反人类建议false关闭</span><br><span class="line">  avatar: mm  #是否需要验证 验证比较反人类建议false关闭 #默认头像 hide:不显示头像 mm:一个灰白的头像 identicon:抽象的几何图形(根据邮箱或者昵称生成) monsterid:小怪物 wavatar:用不同面孔和背景组合生成的头像(根据邮箱或者昵称生成) retro:八位像素复古头像(根据邮箱或者昵称生成) </span><br><span class="line">  guest_info: nick,mail # 默认留言框的头部需要访问者输入的信息</span><br><span class="line">  pageSize: 15 #默认单页的留言条数</span><br></pre></td></tr></table></figure>

<ul>
<li>再打开<code>\themes\landscape-plus\layout_partial\after-footer.ejs</code><a href="https://github.com/xiangming/landscape-plus/blob/master/layout/_partial/after-footer.ejs" target="_blank" rel="noopener">after-footer.ejs文件</a>从第4行到32行换成valine的。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (config.duoshuo_shortname || theme.duoshuo_shortname)&#123; %&gt;</span><br><span class="line">&lt;!-- 多说公共js代码 start --&gt;</span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="keyword">var</span> duoshuoQuery = &#123;<span class="attr">short_name</span>:<span class="string">"&lt;%= config.duoshuo_shortname || theme.duoshuo_shortname %&gt;"</span>&#125;;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ds = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">    ds.type = <span class="string">'text/javascript'</span>;ds.async = <span class="literal">true</span>;</span><br><span class="line">    ds.src = (<span class="built_in">document</span>.location.protocol == <span class="string">'https:'</span> ? <span class="string">'https:'</span> : <span class="string">'http:'</span>) + <span class="string">'//static.duoshuo.com/embed.js'</span>;</span><br><span class="line">    ds.charset = <span class="string">'UTF-8'</span>;</span><br><span class="line">    (<span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>]</span><br><span class="line">     || <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>]).appendChild(ds);</span><br><span class="line">  &#125;)();</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;!-- 多说公共js代码 end --&gt;</span></span><br><span class="line"><span class="regexp">&lt;% &#125; else if (config.disqus_shortname || theme.disqus_shortname)&#123; %&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">  var disqus_shortname = '&lt;%= config.disqus_shortname || theme.disqus_shortname %&gt;';</span></span><br><span class="line"><span class="regexp">  &lt;% if (page.permalink)&#123; %&gt;</span></span><br><span class="line"><span class="regexp">  var disqus_url = '&lt;%= page.permalink %&gt;';</span></span><br><span class="line"><span class="regexp">  &lt;% &#125; %&gt;</span></span><br><span class="line"><span class="regexp">  (function()&#123;</span></span><br><span class="line"><span class="regexp">    var dsq = document.createElement('script');</span></span><br><span class="line"><span class="regexp">    dsq.type = 'text/</span>javascript<span class="string">';</span></span><br><span class="line"><span class="string">    dsq.async = true;</span></span><br><span class="line"><span class="string">    dsq.src = '</span><span class="comment">//' + disqus_shortname + '.disqus.com/&lt;% if (page.comments) &#123; %&gt;embed.js&lt;% &#125; else &#123; %&gt;count.js&lt;% &#125; %&gt;';</span></span><br><span class="line">    (<span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>] || <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>]).appendChild(dsq);</span><br><span class="line">  &#125;)();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;% &#125; %&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">"换成"</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;% if (config.valine_enable || theme.valine_enable)&#123; %&gt;</span></span><br><span class="line"><span class="regexp">&lt;!--载入js，在&lt;/</span>body&gt;之前插入即可--&gt;</span><br><span class="line">    &lt;!--Leancloud 操作库:--&gt;</span><br><span class="line">    &lt;script src=<span class="string">"//cdn1.lncld.net/static/js/3.0.4/av-min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">    &lt;!--Valine 的核心代码库--&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script src="/</span>js/Valine.min.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;script&gt;</span></span><br><span class="line"><span class="string">        new Valine(&#123;</span></span><br><span class="line"><span class="string">            av: AV, </span></span><br><span class="line"><span class="string">            el: '.comment',</span></span><br><span class="line"><span class="string">            app_id: '&lt;%= theme.valine.appid %&gt;',</span></span><br><span class="line"><span class="string">            app_key: '&lt;%= theme.valine.appkey %&gt;',</span></span><br><span class="line"><span class="string">            placeholder: '&lt;%= theme.valine.placeholder %&gt;',</span></span><br><span class="line"><span class="string">            pageSize: &lt;%= theme.valine.pageSize %&gt;,</span></span><br><span class="line"><span class="string">            notify: &lt;%= theme.valine.notify %&gt;,</span></span><br><span class="line"><span class="string">            verify: &lt;%= theme.valine.verify %&gt;,</span></span><br><span class="line"><span class="string">        &#125;);</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure>

<p>这儿值得注意的是</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">这种格式的在next主题下是可以读取的</span><br><span class="line">在landscape-plus主题下要用&lt;% ~ %&gt;，如果是字符串的前后有一个 ` 符号。</span><br><span class="line">如果是<span class="keyword">boolean</span>和<span class="keyword">int</span>类型的值，则不需要前后的这个符号。</span><br><span class="line">app_id: `&#123;&#123; theme.valine.appkey &#125;&#125;` 要改成 `&lt;%= theme.valine.appkey %&gt;`</span><br></pre></td></tr></table></figure>

<ul>
<li>然后再打开<code>/themes/landscape-plus/layout/_partial/article.ejs</code> <a href="https://github.com/xiangming/landscape-plus/blob/master/layout/_partial/article.ejs" target="_blank" rel="noopener">article.ejs文件</a>从32行到36换成valine的代码。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (post.comments &amp;&amp; (config.duoshuo_shortname || theme.duoshuo_shortname))&#123; %&gt;</span><br><span class="line">        &lt;a href=<span class="string">"&lt;%- post.permalink %&gt;#ds-thread"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"article-comment-link"</span>&gt;&lt;%= __(<span class="string">'comments'</span>) %&gt;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">      &lt;% &#125; else if (post.comments &amp;&amp; (config.disqus_shortname || theme.disqus_shortname))&#123; %&gt;</span></span><br><span class="line"><span class="regexp">        &lt;a href="&lt;%- post.permalink %&gt;#disqus_thread" class="article-comment-link"&gt;&lt;%= __('comments') %&gt;&lt;/</span>a&gt;</span><br><span class="line"> &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line"> “换成”</span><br><span class="line"></span><br><span class="line">&lt;% <span class="keyword">if</span> (post.comments &amp;&amp; (config.valine_enable || theme.valine_enable))&#123; %&gt;</span><br><span class="line">   &lt;a href=<span class="string">"&lt;%- post.permalink %&gt;#valine_thread"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"article-comment-link"</span>&gt;&lt;%= __(<span class="string">'comments'</span>) %&gt;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure>


<p>还是该文件把46行到56行替换掉</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; (config.duoshuo_shortname || theme.duoshuo_shortname))&#123; %&gt;</span><br><span class="line">  &lt;section id=<span class="string">"comments"</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">"ds-thread"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"ds-thread"</span> data-thread-key=<span class="string">"&lt;%= post.path %&gt;"</span> data-title=<span class="string">"&lt;%= post.title %&gt;"</span> data-url=<span class="string">"&lt;%= post.permalink %&gt;"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>section&gt;</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; (config.disqus_shortname || theme.disqus_shortname))&#123; %&gt;</span><br><span class="line">  &lt;section id=<span class="string">"comments"</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">"disqus_thread"</span>&gt;</span><br><span class="line">      &lt;noscript&gt;Please enable JavaScript to view the &lt;a href=<span class="string">"//disqus.com/?ref_noscript"</span>&gt;comments powered by Disqus.&lt;<span class="regexp">/a&gt;&lt;/</span>noscript&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>section&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">  “换成“</span><br><span class="line">  </span><br><span class="line">&lt;% <span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; (config.valine_enable || theme.valine_enable))&#123; %&gt;</span><br><span class="line">  &lt;section id=<span class="string">"comments"</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">"valine_thread"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"comment"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/section&gt;</span></span><br><span class="line"><span class="regexp">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>最后一步<code>Valine.min.js</code>放到 <code>/themes\landscape-plus\source\js</code>文件夹内，这儿是<a href="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/" target="_blank" rel="noopener">Valine.min.js下载链接</a>，只保存Valine.min.js文件就行了。因为前面 <font color =red>&lt;script src=”/js/Valine.min.js”&gt;&lt;/script&gt; </font>已经引用的这个文件。</li>
</ul>
<h4 id="这儿为止-valine就替换完成了"><a href="#这儿为止-valine就替换完成了" class="headerlink" title="这儿为止,valine就替换完成了"></a>这儿为止,valine就替换完成了</h4><p><code>hexo clean</code>重新清除一下，然后再<code>hexo g</code>重新生成就可以看到评论系统了。</p>
<p>如果出现评论按钮没有说明你这儿写的格式有问题:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Valine(&#123;</span><br><span class="line">    av: AV, </span><br><span class="line">    el: <span class="string">'.comment'</span>,</span><br><span class="line">    app_id: <span class="string">'&lt;%= theme.valine.appid %&gt;'</span>,</span><br><span class="line">    app_key: <span class="string">'&lt;%= theme.valine.appkey %&gt;'</span>,</span><br><span class="line">    placeholder: <span class="string">'&lt;%= theme.valine.placeholder %&gt;'</span>,</span><br><span class="line">    pageSize: &lt;%= theme.valine.pageSize %&gt;,</span><br><span class="line">    notify: &lt;%= theme.valine.notify %&gt;,</span><br><span class="line">    verify: &lt;%= theme.valine.verify %&gt;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>仔细再检查一下，不行的话只添加av、el、app_id、app_key试试看看能不能正常运行，一个一个字段的添加。</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>使用码云gitee搭建Hexo博客</title>
    <url>/2018/01/19/technology20180119010121/</url>
    <content><![CDATA[<p>前面介绍过使用 <a href="https://kziwws.github.io/2018/11/02/technology20180102082133/">github + page搭建</a>，但是github访问太慢了，每次感觉都要很久才会加载出来。码云搭建的快很多。</p>
<h5 id="需要安装"><a href="#需要安装" class="headerlink" title="需要安装"></a>需要安装</h5><ul>
<li>Git</li>
<li>NodeJs</li>
</ul>
<p>安装这两个自行百度吧，挺简单的。</p>
<p>这儿如果你是使用Mac的小伙伴 我直接放两个安装包地址出来 ，这样子省去你敲一堆命令行，也许还会出错。</p>
<p><font color ="black" size = 3>NodeJs安装:</font>  这个<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">nodejs官网</a>, 你可以直接下载mac <a href="https://nodejs.org/dist/v12.18.0/node-v12.18.0.pkg" target="_blank" rel="noopener">node-v12.18.0.pkg</a> 下载过直接安装然后成功过后会出现</p>
<p>This package has installed:<br> •    Node.js v12.18.0 to /usr/local/bin/node<br> •    npm v6.14.4 to /usr/local/bin/npm<br>Make sure that /usr/local/bin is in your $PATH.</p>
<p><font color ="black" size = 3>Git安装:</font> 这个<a href="https://git-scm.com/download/mac" target="_blank" rel="noopener">git网址</a>,  github地址 <a href="https://github.com/timcharper/git_osx_installer/releases" target="_blank" rel="noopener">https://github.com/timcharper/git_osx_installer/releases</a> 下载<a href="https://github.com/timcharper/git_osx_installer/releases/download/2.2.1/git-2.2.1-intel-universal-mavericks.dmg" target="_blank" rel="noopener">git-2.2.1-intel-universal-mavericks.dmg</a></p>
<p><img src="https://s1.ax1x.com/2020/06/17/NESmJH.png" alt=""></p>
<a id="more"></a>

<p>如过安装出现 打不开xxx 因为它来自身份不明的开发者，先得打开 Terminal 终端应用，可以在 Launchpad 的其它,然后输入命令 <code>sudo spctl --master-disable</code>  然后会出现 <font color ="#4183C4">允许任何来源</font>如图，然后左下角点击锁然后输入电脑密码，勾上任何来源，然后再次点击锁。</p>
<p><img src="https://s1.ax1x.com/2020/06/17/NENO8U.png" alt=""></p>
<h5 id="这儿多说一个如何让-Finder-显示隐藏文件和文件夹"><a href="#这儿多说一个如何让-Finder-显示隐藏文件和文件夹" class="headerlink" title="这儿多说一个如何让 Finder 显示隐藏文件和文件夹"></a>这儿多说一个如何让 Finder 显示隐藏文件和文件夹</h5><p>终端输入<code>defaults write com.apple.finder AppleShowAllFiles -boolean true ; killall Finder</code>，就可以现实隐藏点开头的文件，如果需要关闭<code>defaults write com.apple.finder AppleShowAllFiles -boolean false ; killall Finder</code></p>
<h5 id="安装完成过后检查SSH-Keys设置"><a href="#安装完成过后检查SSH-Keys设置" class="headerlink" title="安装完成过后检查SSH Keys设置"></a>安装完成过后检查SSH Keys设置</h5><p>一、输入<code>cd ~/.ssh</code>, 如果没有会出现  .ssh :No such file or directory。</p>
<p>二、输入 <code>ssh-keygen -t rsa -C &quot;你gitee码云注册相关联的邮箱&quot;</code> 然后回车。这儿回车时需要输入用户名和密码，建议不要输入，全部回车就好，应为到时候hexo d会输入麻烦，可以查看这个链接 <a href="https://www.jianshu.com/p/0a8dcb68cb18" target="_blank" rel="noopener">报错 Enter passphrase for key ‘/Users/xxx/.ssh/id_rsa</a>,不过为了安全而已，不过也可以 <code>git config --global credential.helper store</code>然后 <code>git pull /git push</code> 再输入密码，下次就不再次输入密码了。</p>
<p>三、<code>cd ~/.ssh</code> 然后 <code>ls</code>会出现 id_rsa  和 id_rsa.pub。</p>
<p>四、输入<code>eval &quot;$(ssh-agent -s)&quot;</code>添加密钥到ssh-agent。</p>
<p>五、<code>ssh-add ~/.ssh/id_rsa</code>，添加生成的SSH key到ssh-agent。</p>
<p>六、/Users/你的电脑用户名/.ssh/id_rsa.pub  这个目录里就是前面生成的,如图打开电脑前往文件夹然后输入前面的路径</p>
<p><img src="https://s1.ax1x.com/2020/06/17/NEBDKS.png" alt=""></p>
<p>然后前往打开里面的id_rsa.pub使用记事本打开然后拷贝。<img src="https://s1.ax1x.com/2020/06/17/NEDSqe.png" alt=""></p>
<p>这儿就差不多完成了,现在去<a href="https://gitee.com/login" target="_blank" rel="noopener">https://gitee.com/login码云</a> ，没注册的自己注册然后去生成一个仓库，这儿多说一点，可以看到码云官网平台有说明 <a href="https://gitee.com/help/articles/4136#article-header0" target="_blank" rel="noopener">码云帮助中心 </a>这儿这么说的</p>
<h5 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h5><ol>
<li><p>如何创建一个首页访问地址不带二级目录的 pages，如ipvb.gitee.io？</p>
<p>答：如果你想你的 pages 首页访问地址不带二级目录，如ipvb.gitee.io，<strong>你需要建立一个与自己个性地址同名的仓库</strong>，如 <a href="https://gitee.com/ipvb" target="_blank" rel="noopener">https://gitee.com/ipvb</a> 这个用户，想要创建一个自己的站点，但不想以子目录的方式访问，想以<code>ipvb.gitee.io</code>直接访问，那么他就可以创建一个名字为<code>ipvb</code>的仓库 <a href="https://gitee.com/ipvb/ipvb" target="_blank" rel="noopener">https://gitee.com/ipvb/ipvb</a> 部署完成后，就可以以 <a href="https://ipvb.gitee.io" target="_blank" rel="noopener">https://ipvb.gitee.io</a> 进行访问了。</p>
</li>
<li><p>当要部署的项目与自己的个性地址不一致时，部署完成后存在一些资源访问404？</p>
<p>答：当需要部署的仓库和自己的个性地址不一致时，如：<a href="https://gitee.com/ipvb/blog" target="_blank" rel="noopener">https://gitee.com/ipvb/blog</a> ，生成的pages url 为 <a href="https://ipvb.gitee.io/blog" target="_blank" rel="noopener">https://ipvb.gitee.io/blog</a> ，而访问的资源404，如 <a href="https://ipvb.gitee.io/style.css" target="_blank" rel="noopener">https://ipvb.gitee.io/style.css</a> 。这是因为相应配置文件的相对路径存在问题导致的，生成的资源 url 应该为 <a href="https://ipvb.gitee.io/blog/style.css" target="_blank" rel="noopener">https://ipvb.gitee.io/blog/style.css</a> 才对。对于不同的静态资源生成器，配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">Hexo 配置文件_config.yml的url和root修改如下：</span><br><span class="line">url: https://ipvb.gitee.io/blog</span><br><span class="line">root: /blog</span><br></pre></td></tr></table></figure>



</li>
</ol>
<p>上面是官网帮助文档里的。这儿你可能琢磨半天不需要二级目录，像我这个一样 <a href="https://kziwws.gitee.io" target="_blank" rel="noopener">https://kziwws.gitee.io</a> 你先去建立仓库的名字就是用户名字这样才可以，非这个名字的有二级目录。</p>
<p>建立的仓库过后，然后去码云个人用户信息里 设置里面注意这儿不是这儿<img src="https://s1.ax1x.com/2020/06/17/NE6stH.png" alt=""></p>
<p>如果下图是这个位置</p>
<p><img src="https://s1.ax1x.com/2020/06/17/NEcFjx.png" alt=""></p>
<p>然后把前面拷贝的SSH key粘贴进去就可以了。</p>
<h5 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h5><p>一、新建一个目录，你自己想建在哪儿就是哪儿，然后 终端 输入 <code>cd /你的建立的这个目录</code></p>
<p>二、在输入 <code>npm install -g hexo-cli</code> 完成过后 <code>hexo init</code>，过后会生成博客所需要的文件目录</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">_config.yml 站点配置文件</span><br><span class="line">package.json 站点依赖文件</span><br><span class="line">scaffolds 模板文件夹</span><br><span class="line">source 资源文件夹</span><br><span class="line">_drafts</span><br><span class="line">_posts</span><br><span class="line">themes 主题文件夹</span><br></pre></td></tr></table></figure>
<p>三、打开主配置文件_config.yml,然后在URL 这儿</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">url: https://kziwws.gitee.io</span><br><span class="line">root: /</span><br></pre></td></tr></table></figure>

<p>四、配置 Deployment最底部，这儿换成你自己的。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: https://gitee.com/Kziwws/kziwws.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>五、配置 Themes  landscape-plus，我这儿是自己修改的一个。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: landscape-plus</span><br></pre></td></tr></table></figure>

<p>六、先<code>hexo clean</code> 再<code>hexo g</code> 然后<code>hexo d</code>，如果出现以下问题。</p>
<ul>
<li>ERROR Deployer not found: git<br> 在终端中输入 <code>npm install hexo-deployer-git --save</code>安装 hexo-deployer-git插件</li>
</ul>
<h5 id="开启码云的pages功能"><a href="#开启码云的pages功能" class="headerlink" title="开启码云的pages功能"></a>开启码云的pages功能</h5><p><img src="https://s1.ax1x.com/2020/06/17/NE5fud.png" alt=""></p>
<p>打开https 然后浏览器里访问 上面的网站地址就可以了。这儿配置hexo 文件这些就不说了，前面有一篇文章已经说过了。<a href="https://kziwws.github.io/2018/03/12/technology20180312011233/">分类写文章和基础配置介绍</a>，有一个感觉挺好用的在线Markdown编辑器 <a href="https://maxiang.io/" target="_blank" rel="noopener">https://maxiang.io/</a> 马克飞象挺好用。</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客landscape-plus移值next主题的站内搜索功能</title>
    <url>/2018/02/16/technology20180216011233/</url>
    <content><![CDATA[<p>由于<a href="https://github.com/xiangming/landscape-plus" target="_blank" rel="noopener">landscape-plus主题</a>使用的外部百度搜索，搜索到在进入目标文章。外部搜索没有站内搜素方便，其实<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">next主题</a>就有一个看上去不错的站内搜索，但是next主题又不是我喜欢的风格，所以查找很多博客文章最后看到可以移值next主题的搜索，所以有点兴趣，然后开始了next 主题搜索的移值功能。</p>
<p>参考了<a href="https://hans2936.github.io/2018/06/15/HexoSearch/" target="_blank" rel="noopener">NexT本地搜索引擎的移植</a>这篇文章，感谢这位小哥！期间也遇到很多小的问题这儿总结说一下。</p>
<h4 id="search的安装和配置"><a href="#search的安装和配置" class="headerlink" title="search的安装和配置"></a>search的安装和配置</h4><p>打开博客所在目录，然后运行安装 <code>npm install hexo-generator-searchdb --save</code>,然后在博客的主要配置文件中<code>_config.yml</code>里面加上</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 1000</span><br></pre></td></tr></table></figure>

<p>然后打开landscape-plus主题下的<code>_config.yml</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"># search </span><br><span class="line">local_search:</span><br><span class="line">  enable: true </span><br><span class="line">  trigger: auto  ## 表示搜索结果会不会打字时自动显示</span><br><span class="line">  top_n_per_article: -1 ## 表示每篇文章最多显示几条结果（-1为不限数字）</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<p><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">Next</a>主题中的搜索文件后缀是<code>.swig</code>,而<a href="https://github.com/xiangming/landscape-plus" target="_blank" rel="noopener">landscape-plus</a>主题中是<code>.ejs</code>, 在next中<a href="https://github.com/iissnan/hexo-theme-next/blob/master/layout/_third-party/search/localsearch.swig" target="_blank" rel="noopener">localsearch.swig</a>、<a href="https://github.com/iissnan/hexo-theme-next/blob/master/source/css/_common/components/third-party/localsearch.styl" target="_blank" rel="noopener">localsearch.styl</a>、<a href="https://github.com/iissnan/hexo-theme-next/blob/master/layout/_partials/search/localsearch.swig" target="_blank" rel="noopener">另一个localsearch.swig</a>、<a href="https://github.com/iissnan/hexo-theme-next/blob/master/layout/_partials/header.swig" target="_blank" rel="noopener">header.swig</a>代码拷贝然后重新定义图标。</p>
<h4 id="具体操作步骤"><a href="#具体操作步骤" class="headerlink" title="具体操作步骤"></a>具体操作步骤</h4><ul>
<li><p>定义三个图标，由于Next主题图标使用的是<a href="http://fontawesome.dashgame.com" target="_blank" rel="noopener">FontAwesome 图标</a>。如localsearch.swig <code>&lt;i class = &quot;fa ...&gt; &lt;/i&gt;</code>在landscape 却不支持这样子所以要修改一下，打开<code>~/themes/landscape-plus/source/css/_partial/header.styl</code>文件，加入三个图标。</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#icon-close</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: FontAwesome;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\f146"</span>;<span class="comment">/*关闭搜索框的图标 移植时用&lt;span id="icon-close"&gt;&lt;/span&gt;*/</span></span><br><span class="line">  <span class="attribute">font-size</span>: x-large</span><br><span class="line">&#125;</span><br><span class="line">#icon-search:before &#123;</span><br><span class="line">  font-family: FontAwesome;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\f002"</span>;<span class="comment">/*搜索框的图标 移植时用&lt;span id="icon-search"&gt;&lt;/span&gt;*/</span></span><br><span class="line">  <span class="attribute">font-size</span>: x-large</span><br><span class="line">&#125;</span><br><span class="line">#icon-frown:before &#123;</span><br><span class="line">  font-family: FontAwesome;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\f119"</span>;<span class="comment">/*搜索无结果时的图标 移植时用&lt;span id="icon-frown"&gt;&lt;/span&gt;*/</span></span><br><span class="line">  <span class="attribute">font-size</span>: x-large</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在你的landscape-plus主题<code>~/themes/landscape-plus/layout/_partial/header.ejs</code>打开，<a href="https://github.com/xiangming/landscape-plus/blob/master/layout/_partial/header.ejs" target="_blank" rel="noopener">header.ejs</a>文件的25行修改替换，就换成了<code>local_search.enable</code> 来控制搜索功能了。打开本地搜索，会启动<code>class=&quot;popup-trigger&quot;</code>就打开了本地搜索引擎。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"nav-search-btn"</span> <span class="attr">class</span>=<span class="string">"nav-icon"</span> <span class="attr">title</span>=<span class="string">"Search"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">"换成"</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span>(!<span class="attr">theme.local_search.enable</span>) &#123; %&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"nav-search-btn"</span> <span class="attr">class</span>=<span class="string">"nav-icon"</span> <span class="attr">title</span>=<span class="string">"&lt;%= __('search') %&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span>(<span class="attr">theme.local_search.enable</span>) &#123; %&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"popup-trigger nav-icon"</span> <span class="attr">id</span>=<span class="string">"nav-search-btn"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure>

<p>还是<a href="https://github.com/xiangming/landscape-plus/blob/master/layout/_partial/header.ejs" target="_blank" rel="noopener">header.ejs</a>文件的第38行后面加上这句。就是<code>&lt;/header&gt;</code>标签前面。其中指向了<code>search.ejs</code>,这个文件就是Next主题的<a href="https://github.com/iissnan/hexo-theme-next/blob/master/layout/_partials/search/localsearch.swig" target="_blank" rel="noopener">另一个localsearch.swig</a> 重命名。然后将这个重命名的<code>search.ejs</code>文件放到你的landscape-plus主题和<code>header.ejs</code>同级的目录下。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span>(<span class="attr">theme.local_search.enable</span>) &#123; %&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"local-search-inner"</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">search</span>') %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure>

<p> 修改这个<code>search.ejs</code>文件下的适配图标，和默认的提示搜索的placeholder文本。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popup search-popup local-search-popup"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"local-search-header clearfix"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"search-icon"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"popup-btn-close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-times-circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"local-search-input-wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">placeholder</span>=<span class="string">"&#123;&#123; __('search.placeholder') &#125;&#125;"</span> <span class="attr">spellcheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"local-search-input"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"local-search-result"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  "修改成"</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popup search-popup local-search-popup"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"local-search-header clearfix"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"search-icon"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"icon-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"popup-btn-close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"icon-close"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"local-search-input-wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">placeholder</span>=<span class="string">"本地搜索..."</span> <span class="attr">spellcheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"local-search-input"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"local-search-result"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>开始放入核心 javascript代码。把<a href="https://github.com/iissnan/hexo-theme-next/blob/master/layout/_third-party/search/localsearch.swig" target="_blank" rel="noopener">localsearch.swig</a>重命名成<code>localsearch.ejs</code>放入<code>~/themes/landscape-plus/layout/_partial</code>目录下，然后在<code>~/themes/landscape-plus/layout/layout.ejs</code> <a href="https://github.com/xiangming/landscape-plus/blob/master/layout/layout.ejs" target="_blank" rel="noopener">layout.ejs</a> 文件的最后第40行后面，就是<code>&lt;/body&gt;</code>之前。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">localsearch</span>') %&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后进入过后要修改几个地方。现在这个核心文件<code>localsearch.ejs</code>目录在<code>~/themes/landscape-plus/layout/_partial</code>, 第1行、第7行、第58行、第254行、第256行、第276行修改成。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.local_search.enable %&#125;</span><br><span class="line"><span class="string">"1行处修改成"</span></span><br><span class="line">&lt;% <span class="keyword">if</span> (!theme.local_search.enable)&#123; %&gt;&lt;% &#125; %&gt;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> search_path = <span class="string">"&#123;&#123; config.search.path &#125;&#125;"</span>;</span><br><span class="line"><span class="string">"7行处修改成"</span></span><br><span class="line"><span class="keyword">var</span> search_path = <span class="string">"&lt;%= config.search.path %&gt;"</span>; </span><br><span class="line"></span><br><span class="line">$(<span class="string">'.popup'</span>).detach().appendTo(<span class="string">'.header-inner'</span>);</span><br><span class="line"><span class="string">"58行处修改成"</span> <span class="comment">//这儿.header-inner是搜索框的位置</span></span><br><span class="line">$(<span class="string">'.popup'</span>).detach().appendTo(<span class="string">'.local-search-inner'</span>);</span><br><span class="line">                                   </span><br><span class="line"><span class="string">'&lt;div id="no-result"&gt;&lt;i class="fa fa-search fa-5x" /&gt;&lt;/div&gt;'</span></span><br><span class="line"><span class="string">"253行修改成"</span></span><br><span class="line"><span class="string">'&lt;div id="no-result"&gt;&lt;span id="icon-search"&gt;&lt;/span&gt;&lt;/div&gt;'</span></span><br><span class="line">                                   </span><br><span class="line"><span class="string">'&lt;div id="no-result"&gt;&lt;i class="fa fa-frown-o fa-5x" /&gt;&lt;/div&gt;'</span></span><br><span class="line"><span class="string">"256行修改成"</span></span><br><span class="line"><span class="string">'&lt;div id="no-result"&gt;&lt;span id="icon-frown"&gt;&lt;/span&gt;&lt;/div&gt;'</span></span><br><span class="line">                                        </span><br><span class="line"><span class="keyword">if</span>(<span class="string">'auto'</span> === <span class="string">'&#123;&#123; theme.local_search.trigger &#125;&#125;'</span>)</span><br><span class="line"><span class="string">"276行修改成"</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">'auto'</span> === <span class="string">'&lt;%= theme.local_search.trigger %&gt;'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>放入渲染文件，可以把 <a href="https://github.com/iissnan/hexo-theme-next/blob/master/source/css/_common/components/third-party/localsearch.styl" target="_blank" rel="noopener">localsearch.styl</a> 放入 <code>/source/css/_partial/</code><br>然后在主渲染文件<code>～/themes/landscape-plus/source/css/_partial</code>中，然后找到<code>~/themes/landscape-plus/source/css/style.styl</code> 这件打开 加上 <code>@import &quot;_partial/localsearch&quot;</code> 就可以了，就是导入这个文件。</p>
<p>如果搜索引擎的阴影背景<code>.local-search-pop-overlay</code> 总是会出现在最上方，导致搜索框出来之后根本点不到。我直接给它设置 <code>z-index: auto</code> ，跳过了这个问题。</p>
<p>然后就是细节调试一下这个里面的样式，这儿我修改的部分，就参考和修改了三个地方。</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.local-search-pop-overlay</span></span><br><span class="line">  <span class="attribute">position</span>: fixed</span><br><span class="line">  width: <span class="number">100%</span></span><br><span class="line">  height: <span class="number">100%</span></span><br><span class="line">  top: <span class="number">0</span></span><br><span class="line">  left: <span class="number">0</span></span><br><span class="line">  z-index: <span class="number">2080</span></span><br><span class="line">  background-color: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>)</span><br><span class="line">  z-index: auto //解决阴影背景出现在最上方的问题</span><br><span class="line"></span><br><span class="line">.local-search-popup</span><br><span class="line">  display: none</span><br><span class="line">  position: fixed</span><br><span class="line">  top: <span class="number">10%</span></span><br><span class="line">  left: <span class="number">50%</span></span><br><span class="line">  margin-left: -<span class="number">350px</span></span><br><span class="line">  width: <span class="number">700px</span></span><br><span class="line">  height: <span class="number">80%</span></span><br><span class="line">  padding: <span class="number">0</span></span><br><span class="line">  background: <span class="number">#fff</span></span><br><span class="line">  color: <span class="number">#333</span></span><br><span class="line">  z-index: <span class="number">9999</span></span><br><span class="line">  border-radius: <span class="number">5px</span></span><br><span class="line">  @media mq-mobile /*这儿在next主题中是+mobile() 这个是在手机端展示的时候执行的样式*/</span><br><span class="line">    padding: <span class="number">0</span>     /*在landscape-plus定义了@media mq-mobile*/</span><br><span class="line">    top: <span class="number">0</span></span><br><span class="line">    left: <span class="number">0</span></span><br><span class="line">    margin: <span class="number">0</span></span><br><span class="line">    width: <span class="number">100%</span></span><br><span class="line">    height: <span class="number">100%</span></span><br><span class="line">    border-radius: <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">.local-search-popup</span><br><span class="line">  display: none</span><br><span class="line">  position: fixed</span><br><span class="line">  top: <span class="number">10%</span></span><br><span class="line">  left: <span class="number">50%</span></span><br><span class="line">  margin-left: -<span class="number">350px</span></span><br><span class="line">  width: <span class="number">700px</span></span><br><span class="line">  height: <span class="number">80%</span></span><br><span class="line">  padding: <span class="number">0</span></span><br><span class="line">  background: <span class="number">#fff</span></span><br><span class="line">  color: <span class="number">#333</span></span><br><span class="line">  z-index: <span class="number">9999</span></span><br><span class="line">  border-radius: <span class="number">5px</span></span><br><span class="line">  @media mq-mobile</span><br><span class="line">    padding: <span class="number">0</span></span><br><span class="line">    top: <span class="number">0</span></span><br><span class="line">    left: <span class="number">0</span></span><br><span class="line">    margin: <span class="number">0</span></span><br><span class="line">    width: <span class="number">100%</span></span><br><span class="line">    height: <span class="number">100%</span></span><br><span class="line">    border-radius: <span class="number">0</span></span><br><span class="line">    .search-icon, .popup-btn-close</span><br><span class="line">    display: inline-block</span><br><span class="line">    font-size: <span class="number">18px</span></span><br><span class="line">    color: <span class="number">#999</span></span><br><span class="line">    height: <span class="number">36px</span></span><br><span class="line">    width: <span class="number">18px</span></span><br><span class="line">    padding-left: <span class="number">10px</span></span><br><span class="line">    padding-right: <span class="number">10px</span></span><br><span class="line">    padding-top: <span class="number">5px</span> //移动到输入框位置</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭原先的搜索功能在<code>~/themes/landscape-plus/source/js/script.js</code>第27行到60行屏蔽掉，使用<code>/**/</code>。这儿在<code>~/themes/landscape-plus/layout/_partial/localsearch.ejs</code>第一行加入的<code>&lt;% if (!theme.local_search.enable){ %&gt;&lt;% } %&gt;</code>已经可以动态控制开启了。</p>
</li>
<li><p>到这个重新<code>hexo c</code>、  <code>hexo g</code>就可以看到效果了。是不是很有成就感！我这儿使用的<a href="https://imgchr.com" target="_blank" rel="noopener">免费的图床</a>。<img src="https://s2.ax1x.com/2020/01/19/1CjIaQ.jpg" alt=""></p>
</li>
</ul>
<h4 id="结束心得："><a href="#结束心得：" class="headerlink" title="结束心得："></a>结束心得：</h4><p>其实开始我也是修改的不是那么顺利，特么是有些网上说的根本不一样，文件有的缺失然后又看不到。只要一个小的细节没有注意到就会出错。导致修改半天不知道哪儿的原因，但是只要你心态好有耐心，很多都是可以慢慢去学，只要你喜欢折腾，不放弃，相信自己就一定可以做到。</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux服务器使用Nginx搭建Hexo博客+Github Pages</title>
    <url>/2018/01/02/technology20180102082133/</url>
    <content><![CDATA[<p>看了很多搭建博客的 <a href="https://wordpress.org/" target="_blank" rel="noopener">wordpress</a>、<a href="https://ghost.org/" target="_blank" rel="noopener">ghost</a>、<a href="https://jekyllcn.com/" target="_blank" rel="noopener">jekyllcn</a>、<a href="https://hexo.io/zh-cn/index.html" target="_blank" rel="noopener">hexo</a>。这些都可以搭建属于自己的博客，各有各的优点，开始的时候使用了wordpress搭建了一个感觉太弱鸡了。先安装一个 <a href="https://www.bt.cn" target="_blank" rel="noopener">宝塔</a>软件，然后安装wordpress没什么难度，关键定制里面的东西感觉一点都不方便，重点是界面极丑，我感觉自己把主题全部换遍了然后都没有一个我自己觉得满意的，然后我放弃了,不用这个搭建。</p>
<p><strong>然后看了其他很多搭建博客的，后来选择了hexo。</strong></p>
<blockquote>
<p><font color= 'grey'>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。Hexo的主题样式也有很多好看的，而且github都有star上万的。说明还是很受欢迎的。</font></p>
</blockquote>
<p>如果有人想使用Ghost搭建的轻型博客可以去看一下<a href="https://shevakuilin.com/build-ghost-on-centos7/" target="_blank" rel="noopener">如何在 CentOS 7 上搭建一个 Ghost 博客</a>，朋友就是使用这个搭建的，我选择了hexo我就不去折腾了。</p>
<p>hexo 搭建博客可以采用 </p>
<p>​    1、<a href="https://hexo.io/zh-cn/index.html" target="_blank" rel="noopener">Hexo</a> + <a href="https://pages.github.com/" target="_blank" rel="noopener">Github Pages</a> 的方案，前往<a href="https://github.com" target="_blank" rel="noopener">https://github.com</a>注册一个账号。<br>​    2 、采用 CentOS 搭建在云服务器上，我的是CentOS / 7.6 x64系统，就是Linux操作系统的一个发行版本。</p>
<h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><ul>
<li><a href="#node_install">Node安装</a></li>
<li><a href="#git_install">Git环境安装</a></li>
<li><a href="#hexo_install">Hexo安装</a></li>
<li><a href="#nginx_install">Nginx配置安装</a></li>
</ul>
<p><strong>如果直接在放在服务器上,可以不用安装git,只是需要安装<code>node</code>、<code>Hexo</code>、<code>nginx</code>。如果使用Github搭建,则需要按照安装。意思就是如果你想要通过git从一个地方提交到远程仓库，就需要安装。</strong></p>
<p>免费的代码存储空间，先去上面的网址注册一个账号，这个账号就是作为博客的网址的前缀，注意这个是不能修改的<code>https://xxx.github.io</code>。由于我都使用工具在云服务器操作的，所以这儿推荐一个Mac系统软件上感觉相对好用的软件 <code>FinalShell SSH工具</code><a href="http://www.hostbuf.com" target="_blank" rel="noopener">简陋的官网</a>，不过我喜欢，就喜欢简单而又直白的…。<a href="http://www.hostbuf.com/downloads/finalshell_install.pkg" target="_blank" rel="noopener">macOs系统版本FinalShell下载</a>，<a href="http://www.hostbuf.com/downloads/finalshell_install.exe" target="_blank" rel="noopener">windows版本FinalShell下载</a>。不过你喜欢用其他也行，只要能连接上服务器就完事。</p>
<p><a name='node_install'><strong>一、配置Node和安装</strong></a></p>
<ul>
<li><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">官网</a>下载node安装包，下载<a href="https://nodejs.org/dist/v12.14.1/node-v12.14.1-linux-x64.tar.xz" target="_blank" rel="noopener">Linux Binaries (x64) node-v12.14.1-linux-x64.tar.xz includes npm 6.13.4</a> </li>
</ul>
<ul>
<li><p>如果你是使用的Final的话，你自己选择一个node要安装的目录，你也可以新建一个。我的是在主目录新建了一个/soft，然后在命令工具cd /soft 该目录，如果你这儿是想放在其他目录里，你自己cd到要的那个目录里，然后你直接把下载下来的node包拖到这个目录下，就会显示上传。如果你使用的其他工具请自行解决，你也可以使用服务器远程桌面连接，然后在服务上直接下载也行。</p>
</li>
<li><p>使用命令 <code>xz -d node-v12.14.1-linux-x64.tar.xz</code>转为 <code>node-v12.14.1-linux-x64.tar</code>文件 然后<code>tar -xvf node-v10.15.1-linux-x64.tar</code>解压，然后使用删除 <code>rm -rf node-v12.14.1-linux-x64.tar</code>源文件，重命文件夹 <code>mv node-v12.14.1-linux-x64 node</code> 后面好使用。</p>
</li>
<li><p>建立软连接，就是快捷方式就相当于一个入口相当于桌面快捷方式，前面部分就是你先前安装路径 后面是快捷方式路径。</p>
<p><code>ln -s /soft/node/bin/node /usr/local/bin/node</code><br><code>ln -s /soft/node/bin/npm /usr/local/bin/npm</code></p>
</li>
<li><p>使用 <code>npm - v</code>和<code>node - v</code>是否安装成功，如果成功会输出版本号<code>#node -v v12.14.1</code> 和 `#npm -v6.13.4。</p>
<p>找到这个 <code>/usr/local/bin</code> 路径会node和npm的快捷方式，带有绿色的箭头。</p>
</li>
</ul>
<p><a name='git_install'><strong>二、Git环境安装</strong></a></p>
<ul>
<li><p>选择一个目录安装Git，看你自己安装在哪儿。我的是安装到/usr/local目录下,<code>cd /usr/local/git</code>。</p>
</li>
<li><p><a href="https://mirrors.edge.kernel.org/pub/software/scm/git/" target="_blank" rel="noopener">这儿查看git最新版本</a> 或者<a href="https://github.com/git/git/releases" target="_blank" rel="noopener">github上查看</a>，我使用的是<a href="https://github.com/git/git/releases/tag/v2.20.0-rc0" target="_blank" rel="noopener">git v2.20.0-rc0</a>版本，你可以直接下载下来上传到linux环境中。也可以使用命令  <code>wget https://github.com/git/git/archive/v2.20.0-rc0.tar.gz</code>。</p>
</li>
<li><p>下载过后然后解压和上面的步骤一样 <code>tar -zxvf git-v2.20.0-rc0.tar.gz</code>,然后删除<code>rm -rf git-v2.20.0-rc0.tar.gz</code>源文件。</p>
</li>
<li><p>安装依赖包, <code>yum install curl-devel</code>。</p>
<p>开始安装Git   <code>./configure --prefix=/usr/local/git</code> 这儿这个/usr/local/git 就儿这个目录是你的git安装目录，之前的解压出来目录是 /usr/local/git-v2.20.0-rc0 。</p>
<p>执行 <code>make。</code></p>
<p>再执行完成过后，执行 <code>make install</code>。</p>
<p>建立软连接，和前面的意思一样快捷方式 <code>ln -s /usr/local/git/bin/* /usr/bin/</code>。</p>
<p>查看版本<code>git --version</code></p>
</li>
<li><p>GitHub 添加 <code>SSH key</code>,先看本地是否有<code>cd ~/.ssh</code> 然后再执行<code>ls</code>，存在会显示 id_rsa、id_rsa.pub、know_hosts 三个文件，没有创建 <code>ssh-keygen -t rsa -C &quot;xxx邮箱&quot;</code>，把 “xxx邮箱” 替换成你真实的注册github时的邮箱,然后回车输入两次密码。直接回车为空就行，成功后通过如下命令拷贝 SSH key 的内容 <code>clip &lt; ~/.ssh/id_rsa.pub</code>不过你也可以直接打开然后再复制。然后再github新建的仓库里，用你的用户名命名。创建成功过后打开<code>SSH and GPD Keys</code>然后填入信息和刚才复制的 <code>SSH keys</code>值 ,到这儿github pages配置完成。</p>
</li>
</ul>
<p><a name='hexo_install'><strong>三、Hexo安装</strong></a></p>
<ul>
<li><p>安装 <code>npm install -g hexo-cli</code>,hexo为node的一个模块。</p>
</li>
<li><p>建立hexo 软连接 <code>ln -s /soft/node/bin/node/lib/node_modules/hexo-cli/bin/hexo /usr/local/bin/hexo</code>。</p>
</li>
<li><p><code>cd  /soft/hexo/hexoblog</code>,然后执行 <code>hexo init hexoblog</code>  <code>npm install</code>。</p>
</li>
<li><p>hexoblog目录下会多出来<code>.deploy_git</code>、<code>node_modules</code>、<code>scaffolds</code>、<code>public</code>、<code>source</code>、<code>themes</code>等一些配置文件夹，这儿public就是hexo 执行<code>hexo g</code>过后生成的网站根目录，source是编写的Markdown文件资源,themes是hexo博客的一些主题目录。这儿还有一个重要的目录配置文件<code>_config.yml</code>这个就是配置网站里的基础信息。</p>
</li>
<li><p><code>hexo clean</code>、<code>hexo generate、</code> <code>hexo server</code>、 <code>hexo deploy</code> 分别对应简写<code>hexo c、 g 、s 、d</code>，第一个清除所有生成网页文件，第二个生成静态的网页文件，第三个开始启动本地服务器 <code>http://localhost:4000/</code>临时时访问，第四个是生成后立即部署网站。更多指令可以前往<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="noopener">hexo官网查看</a>。</p>
</li>
<li><p>这儿public目录下的<code>_config.yml</code>配置如果是使用github+pages 。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">heme: landscape-plus ##这儿默认是landscape主题官方</span><br><span class="line"></span><br><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:xxx/xxx.github.io.git ##这儿换成你github用户名</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置过后就可以<code>hexo s</code>查看<code>hexo d</code>发布到github了。</p>
</li>
</ul>
<p><a name='nginx_install'><strong>四、Nginx配置安装</strong></a></p>
<ul>
<li><p>去<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">官网下载</a>最新的Nginx安装包<a href="http://nginx.org/download/nginx-1.14.2.tar.gz" target="_blank" rel="noopener">nginx-1.14.2</a>。</p>
</li>
<li><p>上传到服务器 <code>/usr/local</code>,和前面一样的解压，然后 <code>cd /usr/local/ngxin-1.14.2</code>,再执行命令<code>./configure --prefix=/usr/local/nginx-1.14.2</code>。</p>
</li>
<li><p>执行 <code>make</code> ,再执行 <code>make install</code>。</p>
</li>
<li><p>找到安装完成过后的 <code>/usr/local/nginx/sbin/nginx</code>的文件，我这儿把nginx-1.14.2重命名nginx。然后修改nginx的配置。找到路径 /usr/local/nginx/conf/nginx.conf  打开这儿就是一系列的配置。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">      listen       80;#可以修改成其他端口,确定该端口可用</span><br><span class="line">      server_name  localhost;#有域名填写域名</span><br><span class="line">      </span><br><span class="line">      listen <span class="number">443</span> ssl;</span><br><span class="line">      ssl_certificate      server.crt;</span><br><span class="line">      ssl_certificate_key  server_nopwd.key;</span><br><span class="line">      #charset koi8-r;</span><br><span class="line">      #access_log  logs/host.access.log  main;</span><br><span class="line">      location / &#123;</span><br><span class="line">          root   /soft/hexo/nginxblog/<span class="keyword">public</span>; </span><br><span class="line">          #这儿就是你要修改的hexo生成的静态网站目录</span><br><span class="line">          index  index.html index.htm;</span><br><span class="line">      &#125;</span><br><span class="line">      #error_page  404   /404.html;</span><br><span class="line">      # redirect server error pages to the static page /50x.html</span><br><span class="line">      error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> <span class="number">404</span> /<span class="number">404</span>x.html;</span><br><span class="line">      location = /<span class="number">404</span>x.html &#123;</span><br><span class="line">          root   html;</span><br><span class="line">      &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>然后启动nginx, <code>/usr/local/nginx/sbin/nginx -s reload</code> 如果有错误的话会提示错误。<code>/usr/local/nginx/sbin/nginx -t</code>会检查nginx配置文件是否正确。<code>/usr/local/nginx/sbin/nginx -s stop</code>快速停止。</p>
</li>
<li><p>如果启动出现<font color='red'>telnet: connect to address ~ no route to host</font> 重新关闭了重启开始出现的话，请先检查端口是否可用，可以使用指令查看 <code>ps -ef | grep nginx</code>  查看nginx端口是否启动成功。<code>netstat -a</code>  查看所有服务端口运行情况。如果还是没有解决，直接关闭防火墙<code>iptables -F</code>，然后再重启nginx。</p>
</li>
<li><p>到这儿如果是80端口的话，你直接在你电脑上输入服务器主ip地址应该就可以看到你的博客界面了。</p>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客landscape-plus主题修改侧边栏颜色</title>
    <url>/2018/03/20/technology20180320113530/</url>
    <content><![CDATA[<h4 id="一、修改左侧边状态栏的文字颜色"><a href="#一、修改左侧边状态栏的文字颜色" class="headerlink" title="一、修改左侧边状态栏的文字颜色"></a>一、修改左侧边状态栏的文字颜色</h4><p>路径地址<code>Hexo/themes/landscape-plus/source/css/_partial/sidebar-aside.styl</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#sidebar</span></span><br><span class="line">  <span class="keyword">@media</span> mq-normal</span><br><span class="line">    column(sidebar-column)</span><br><span class="line"></span><br><span class="line">.widget-wrap</span><br><span class="line">  <span class="attribute">margin:</span> block-margin <span class="number">0</span></span><br><span class="line"></span><br><span class="line">.widget-title</span><br><span class="line">  <span class="attribute">font-size:</span> <span class="number">1.2em</span></span><br><span class="line">  @extend $block-caption</span><br><span class="line"></span><br><span class="line">.widget</span><br><span class="line">  <span class="attribute">color:</span> color-sidebar-text</span><br><span class="line">  <span class="attribute">text-shadow:</span> <span class="number">0</span> <span class="number">1px</span> #fff</span><br><span class="line">  <span class="attribute">background:</span> color-widget-background</span><br><span class="line">  <span class="attribute">box-shadow:</span> <span class="number">1px</span> <span class="number">2px</span> <span class="number">3px</span> color-border</span><br><span class="line">  // <span class="attribute">box-shadow:</span> <span class="number">0</span> -<span class="number">1px</span> <span class="number">4px</span> color-widget-border inset</span><br><span class="line">  //<span class="attribute">border:</span> <span class="number">1px</span> solid color-widget-border</span><br><span class="line">  <span class="attribute">padding:</span> <span class="number">15px</span></span><br><span class="line">  <span class="attribute">border-radius:</span> <span class="number">3px</span></span><br><span class="line">  a</span><br><span class="line">    //<span class="attribute">color:</span> color-grey <span class="number">1</span></span><br><span class="line">    <span class="attribute">color:</span> #<span class="number">488</span>DB4 <span class="number">2</span></span><br><span class="line">    <span class="attribute">text-decoration:</span> none</span><br><span class="line">    &amp;:hover</span><br><span class="line">      <span class="attribute">text-decoration:</span> underline</span><br><span class="line">      <span class="attribute">color:</span> color-link</span><br><span class="line">  ul, ol, dl</span><br><span class="line">    ul, ol, dl</span><br><span class="line">      <span class="attribute">margin-left:</span> <span class="number">15px</span></span><br><span class="line">      <span class="attribute">list-style:</span> disc</span><br></pre></td></tr></table></figure>
<p>由位置1 color: color-grey  变更位置2 color: #488DB4 </p>
<h4 id="二、修改左侧边栏统计出来的数字颜色"><a href="#二、修改左侧边栏统计出来的数字颜色" class="headerlink" title="二、修改左侧边栏统计出来的数字颜色"></a>二、修改左侧边栏统计出来的数字颜色</h4><p>路径地址<code>Hexo/themes/landscape-plus/source/css/_partial/sidebar.styl</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">if</span> <span class="selector-tag">sidebar</span> <span class="selector-tag">is</span> <span class="selector-tag">bottom</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">"sidebar-bottom"</span></span><br><span class="line">else</span><br><span class="line">  @import <span class="string">"sidebar-aside"</span></span><br><span class="line"></span><br><span class="line">.widget</span><br><span class="line">  @extend $base-style</span><br><span class="line">  <span class="attribute">line-height:</span> line-height</span><br><span class="line">  <span class="attribute">word-wrap:</span> break-word</span><br><span class="line">  <span class="attribute">font-size:</span> <span class="number">0.9em</span></span><br><span class="line">  ul, ol</span><br><span class="line">    <span class="attribute">list-style:</span> none</span><br><span class="line">    <span class="attribute">margin:</span> <span class="number">0</span></span><br><span class="line">    ul, ol</span><br><span class="line">      <span class="attribute">margin:</span> <span class="number">0</span> <span class="number">20px</span></span><br><span class="line">    ul</span><br><span class="line">      <span class="attribute">list-style:</span> disc</span><br><span class="line">    ol</span><br><span class="line">      <span class="attribute">list-style:</span> decimal</span><br><span class="line"></span><br><span class="line">.category-list-count</span><br><span class="line">.tag-list-count</span><br><span class="line">.archive-list-count</span><br><span class="line">  <span class="attribute">padding-left:</span> <span class="number">5px</span></span><br><span class="line">  //<span class="attribute">color:</span> color-grey <span class="number">1</span></span><br><span class="line">  <span class="attribute">color:</span> #<span class="number">488</span>DB4 <span class="number">2</span></span><br><span class="line">  <span class="attribute">font-size:</span> <span class="number">0.9em</span></span><br><span class="line">  &amp;:before</span><br><span class="line">    <span class="attribute">content:</span> <span class="string">"("</span></span><br><span class="line">  &amp;:after</span><br><span class="line">    <span class="attribute">content:</span> <span class="string">")"</span></span><br><span class="line"></span><br><span class="line">.tagcloud</span><br><span class="line">  <span class="attribute">font-size:</span> <span class="number">1.1em</span></span><br><span class="line">  a</span><br><span class="line">    <span class="attribute">margin-right:</span> <span class="number">5px</span></span><br><span class="line">    <span class="attribute">font-size:</span> <span class="number">20px</span></span><br></pre></td></tr></table></figure>
<p>由位置1 color: color-grey  变更位置2 color: #488DB4 </p>
<h4 id="三、修改归档出来的文章按照年统计篇章数"><a href="#三、修改归档出来的文章按照年统计篇章数" class="headerlink" title="三、修改归档出来的文章按照年统计篇章数"></a>三、修改归档出来的文章按照年统计篇章数</h4><p>路径地址<code>Hexo/themes/landscape-plus/layout/_widget/archive.ejs</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (site.posts.length)&#123; %&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"widget-wrap"</span>&gt;</span><br><span class="line">    &lt;h3 <span class="class"><span class="keyword">class</span></span>=<span class="string">"widget-title"</span>&gt;&lt;%= __(<span class="string">'archive'</span>) %&gt;&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div class="widget"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;!--&lt;%- list_archives() %&gt; --&gt;</span></span><br><span class="line"><span class="regexp">      /</span><span class="regexp">/&lt;%- list_archives(&#123;format: 'YYYY年 MM月'&#125;) %&gt;</span></span><br><span class="line"><span class="regexp">      &lt;%- list_archives(&#123;format: 'YYYY年'&#125;) %&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure>
<p>由&lt;%- list_archives({format: ‘YYYY年 MM月’}) %&gt; 改成 &lt;%- list_archives({format: ‘YYYY年’}) %&gt;，以年统计减少数据展示更加简洁一些。</p>
<h4 id="四、修改代码块高亮展示的时候的颜色和行数隐藏"><a href="#四、修改代码块高亮展示的时候的颜色和行数隐藏" class="headerlink" title="四、修改代码块高亮展示的时候的颜色和行数隐藏"></a>四、修改代码块高亮展示的时候的颜色和行数隐藏</h4><p>路径地址<code>Hexo/themes/landscape-plus/source/css/_partial/highlight.styl</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">highlight-background = #272822 /*#f8f8f8*/</span><br><span class="line">highlight-current-line = #3E3D32</span><br><span class="line">highlight-selection = #488DB4 /*#49483E*/</span><br><span class="line">highlight-foreground = #F8F8F2 /*#525252*/</span><br><span class="line">highlight-comment = #75715E</span><br><span class="line">highlight-red = #F92672</span><br><span class="line">highlight-orange = #42b983 /*#FD971F*/</span><br><span class="line">highlight-yellow = #42b983 /*#E6DB74*/</span><br><span class="line">highlight-green = #A6E22E</span><br><span class="line">highlight-aqua = #A1EFE4</span><br><span class="line">highlight-blue = #e96900 /*#66D9EF*/</span><br><span class="line">highlight-purple = #AE81FF</span><br><span class="line"></span><br><span class="line">$code-block</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-tag">highlight-background</span></span><br><span class="line">  <span class="selector-tag">margin</span>: 0 <span class="selector-tag">article-padding</span> * <span class="selector-tag">-2</span></span><br><span class="line">  <span class="selector-tag">padding</span>: 10<span class="selector-tag">px</span> <span class="selector-tag">article-padding</span></span><br><span class="line">  <span class="selector-tag">border-style</span>: <span class="selector-tag">solid</span></span><br><span class="line">  <span class="selector-tag">border-color</span>: <span class="selector-tag">color-border</span></span><br><span class="line">  <span class="selector-tag">border-width</span>: 0<span class="selector-tag">px</span> 0  <span class="comment">/*1px 0去掉边框*/</span></span><br><span class="line">  <span class="selector-tag">overflow</span>: <span class="selector-tag">auto</span></span><br><span class="line">  <span class="selector-tag">color</span>: <span class="selector-tag">highlight-foreground</span></span><br><span class="line">  <span class="selector-tag">line-height</span>: <span class="selector-tag">font-size</span> * <span class="selector-tag">line-height</span></span><br><span class="line"></span><br><span class="line">$line-numbers</span><br><span class="line">  <span class="selector-tag">color</span>: <span class="selector-id">#666</span></span><br><span class="line">  <span class="selector-tag">font-size</span>: 0<span class="selector-tag">em</span> <span class="comment">/*隐藏展示行数0.85em*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-entry</span></span><br><span class="line">  <span class="selector-tag">pre</span>, <span class="selector-tag">code</span></span><br><span class="line">    <span class="selector-tag">font-family</span>: <span class="selector-tag">font-mono</span></span><br><span class="line">  <span class="selector-tag">code</span></span><br><span class="line">    <span class="selector-tag">background</span>: <span class="selector-id">#f0f0f0</span></span><br><span class="line">    <span class="selector-tag">text-shadow</span>: 0 1<span class="selector-tag">px</span> <span class="selector-id">#fff</span></span><br><span class="line">    <span class="selector-tag">font-size</span>:  0<span class="selector-class">.85em</span></span><br><span class="line">    <span class="selector-tag">padding</span>: 0 0<span class="selector-class">.3em</span></span><br><span class="line">    <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#dcdcdc</span></span><br><span class="line">    <span class="selector-tag">border-radius</span>: 3<span class="selector-tag">px</span></span><br><span class="line">  <span class="selector-tag">pre</span></span><br><span class="line">    <span class="keyword">@extend</span> $code-block</span><br><span class="line">    code</span><br><span class="line">      <span class="attribute">background:</span> none</span><br><span class="line">      <span class="attribute">text-shadow:</span> none</span><br><span class="line">      <span class="attribute">padding:</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">border:</span> none</span><br><span class="line">  .highlight</span><br><span class="line">    @extend $code-block</span><br><span class="line">    pre</span><br><span class="line">      <span class="attribute">border:</span> none</span><br><span class="line">      <span class="attribute">margin:</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">padding:</span> <span class="number">0</span></span><br><span class="line">    table</span><br><span class="line">      <span class="attribute">margin:</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width:</span> auto</span><br><span class="line">    td</span><br><span class="line">      <span class="attribute">border:</span> none</span><br><span class="line">      <span class="attribute">padding:</span> <span class="number">0</span></span><br><span class="line">    figcaption</span><br><span class="line">      clearfix()</span><br><span class="line">      <span class="attribute">font-size:</span> <span class="number">0.85em</span></span><br><span class="line">      <span class="attribute">color:</span> highlight-comment</span><br><span class="line">      <span class="attribute">line-height:</span> <span class="number">1em</span></span><br><span class="line">      <span class="attribute">margin-bottom:</span> <span class="number">1em</span></span><br><span class="line">      a</span><br><span class="line">        <span class="attribute">float:</span> right</span><br><span class="line">    .gutter pre</span><br><span class="line">      @extend $line-numbers</span><br><span class="line">      <span class="attribute">text-align:</span> right</span><br><span class="line">      <span class="attribute">padding-right:</span> <span class="number">20px</span></span><br><span class="line">    .line</span><br><span class="line">      <span class="attribute">height:</span> font-size * line-height</span><br><span class="line">  .gist</span><br><span class="line">    <span class="attribute">margin:</span> <span class="number">0</span> article-padding * -<span class="number">1</span></span><br><span class="line">    <span class="attribute">border-style:</span> solid</span><br><span class="line">    <span class="attribute">border-color:</span> color-border</span><br><span class="line">    <span class="attribute">border-width:</span> <span class="number">1px</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">background:</span> highlight-background</span><br><span class="line">    <span class="attribute">padding:</span> <span class="number">15px</span> article-padding <span class="number">15px</span> <span class="number">0</span></span><br><span class="line">    .gist-file</span><br><span class="line">      <span class="attribute">border:</span> none</span><br><span class="line">      <span class="attribute">font-family:</span> font-mono</span><br><span class="line">      <span class="attribute">margin:</span> <span class="number">0</span></span><br><span class="line">      .gist-data</span><br><span class="line">        <span class="attribute">background:</span> none</span><br><span class="line">        <span class="attribute">border:</span> none</span><br><span class="line">        .line-numbers</span><br><span class="line">          @extend $line-numbers</span><br><span class="line">          <span class="attribute">background:</span> none</span><br><span class="line">          <span class="attribute">border:</span> none</span><br><span class="line">          <span class="attribute">padding:</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">        .line-data</span><br><span class="line">          <span class="attribute">padding:</span> <span class="number">0</span> !important</span><br><span class="line">      .highlight</span><br><span class="line">        <span class="attribute">margin:</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">padding:</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">border:</span> none</span><br><span class="line">      .gist-meta</span><br><span class="line">        <span class="attribute">background:</span> highlight-background</span><br><span class="line">        <span class="attribute">color:</span> highlight-comment</span><br><span class="line">        <span class="attribute">font:</span> <span class="number">0.85em</span> font-sans</span><br><span class="line">        <span class="attribute">text-shadow:</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">padding:</span> <span class="number">0</span></span><br><span class="line">        <span class="attribute">margin-top:</span> <span class="number">1em</span></span><br><span class="line">        <span class="attribute">margin-left:</span> article-padding</span><br><span class="line">        a</span><br><span class="line">          <span class="attribute">color:</span> color-link</span><br><span class="line">          <span class="attribute">font-weight:</span> normal</span><br><span class="line">          &amp;:hover</span><br><span class="line">            <span class="attribute">text-decoration:</span> underline</span><br><span class="line"></span><br><span class="line">pre</span><br><span class="line">  .comment</span><br><span class="line">  .preprocessor</span><br><span class="line">    <span class="attribute">color:</span> highlight-comment</span><br><span class="line">  .tag</span><br><span class="line">    <span class="attribute">color:</span> highlight-foreground</span><br><span class="line">  .title</span><br><span class="line">  .variable</span><br><span class="line">  .regexp</span><br><span class="line">  .ruby .constant</span><br><span class="line">  .xml .tag .title</span><br><span class="line">  .xml .pi</span><br><span class="line">  .xml .doctype</span><br><span class="line">  .html .doctype</span><br><span class="line">  .css .id</span><br><span class="line">  .css .class</span><br><span class="line">  .css .pseudo</span><br><span class="line">    <span class="attribute">color:</span> highlight-red</span><br><span class="line">  .number</span><br><span class="line">  .built_in</span><br><span class="line">  .literal</span><br><span class="line">  .constant</span><br><span class="line">    <span class="attribute">color:</span> highlight-purple</span><br><span class="line">  .params</span><br><span class="line">    <span class="attribute">color:</span> highlight-orange</span><br><span class="line">  .class</span><br><span class="line">  .ruby .class .title</span><br><span class="line">  .css .rules .attribute</span><br><span class="line">  .attribute</span><br><span class="line">    <span class="attribute">color:</span> highlight-green</span><br><span class="line">  .string</span><br><span class="line">  .value</span><br><span class="line">  .inheritance</span><br><span class="line">  .header</span><br><span class="line">  .ruby .symbol</span><br><span class="line">  .xml .cdata</span><br><span class="line">    <span class="attribute">color:</span> highlight-yellow</span><br><span class="line">  .css .hexcolor</span><br><span class="line">    <span class="attribute">color:</span> highlight-aqua</span><br><span class="line">  .function</span><br><span class="line">  .python .decorator</span><br><span class="line">  .python .title</span><br><span class="line">  .ruby .function .title</span><br><span class="line">  .ruby .title .keyword</span><br><span class="line">  .perl .sub</span><br><span class="line">  .javascript .title</span><br><span class="line">  .coffeescript .title</span><br><span class="line">    <span class="attribute">color:</span> highlight-blue</span><br><span class="line">  .keyword</span><br><span class="line">  .javascript .function</span><br><span class="line">    <span class="attribute">color:</span> highlight-blue</span><br></pre></td></tr></table></figure>
<p>由于代码快左边会出现行数，在复制的时候容易复制出来，所以给隐藏掉比较好。</p>
]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>CocosCreator游戏开发打包安卓apk</title>
    <url>/2018/08/10/technology20180810152102/</url>
    <content><![CDATA[<p><strong>我自己测试通过的打包所使用的开发工具和版本</strong></p>
<table>
<thead>
<tr>
<th align="center">开发工具版本</th>
<th align="center">测试版本</th>
<th align="right">下载</th>
<th align="center">前往官网</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CocosCreator</td>
<td align="center">2.0～2.2</td>
<td align="right"><a href="http://cocos2d-x.org/filedown/CocosCreator_v2.2.1_mac" target="_blank" rel="noopener">直接下载2.2Mac版</a></td>
<td align="center"><a href="https://www.cocos.com/creator" target="_blank" rel="noopener">官网选择其它版本</a></td>
</tr>
<tr>
<td align="center">android-sdk</td>
<td align="center">android-21</td>
<td align="right"><a href="https://pan.baidu.com/s/1o6v7E2I?utm_source=androiddevtools&utm_medium=website&errno=0&errmsg=Auth%20Login%20Sucess&&bduss=&ssnerror=0&traceid=" target="_blank" rel="noopener">直接下载android sdk21-5.0</a></td>
<td align="center"><a href="https://www.androiddevtools.cn" target="_blank" rel="noopener">选择其他SDK版本</a></td>
</tr>
<tr>
<td align="center">android-ndk</td>
<td align="center">android-ndk-r16-beta1</td>
<td align="right"><a href="https://dl.google.com/android/repository/android-ndk-r16-beta1-darwin-x86_64.zip?utm_source=androiddevtools&utm_medium=website" target="_blank" rel="noopener">直接下载android ndk-r16-beta1</a></td>
<td align="center"><a href="https://www.androiddevtools.cn" target="_blank" rel="noopener">选择其他NDK版本</a></td>
</tr>
</tbody></table>
<a id="more"></a>

<h4 id="一、链接SDK和NDK"><a href="#一、链接SDK和NDK" class="headerlink" title="一、链接SDK和NDK"></a>一、链接SDK和NDK</h4><ul>
<li>选择<code>偏好设置</code>将下载好的<code>DNK</code>和<code>SDK</code>指定路径，然后保存。<br><img src="https://s1.ax1x.com/2020/06/17/NExcdO.jpg" alt=""></li>
</ul>
<h4 id="二、配置打包参数"><a href="#二、配置打包参数" class="headerlink" title="二、配置打包参数"></a>二、配置打包参数</h4><ul>
<li><p>配置<br>1、游戏名称: 你的项目游戏名<br>2、发布平台: <code>安卓</code><br>3、发布路径: 默认为<code>./build</code><br>4、初始化场景: 这儿是选择你APP运行时的第一屏出现的页面场景，如果选错会直接加载到其他页面。<br>5、参与构建的场景: 只是要参与游戏的页面有关的场景都要选上。<br>6、模版:<code>default</code> 即可<br>7、包名:你自己的包名<br>8、选择Target API Level，我之前选择的android-21,你选择你的就可以下载的SDK对应版本就可以了。<br>9、APP ABI: armeabi-v7a</p>
<blockquote>
<p>armeabi-v7a: ARM v7 目前主流版本，第7代及以上的 ARM 处理器。2011年15月以后的生产的大部分Android设备都使用它。<br>arm64-v8a: 64位支持，第8代、64位ARM处理器，很少设备，三星 Galaxy S6是其中之一。<br>x86 架构的手机、平板、模拟器用。</p>
</blockquote>
<p>10、密钥库: 发布正式版，请自行生成密钥。<br>11、设备方向: 按照项目需求来。</p>
</li>
</ul>
<p><img src="https://s2.ax1x.com/2020/01/13/l7kUD1.png" alt=""></p>
<ul>
<li><p>然后构建，等构建完成,选择编译等待编译完成，编译完成过后一般在路径下的 <code>jsb-default\publish\android</code>下。</br></p>
<h4 id="如果前面编译失败的情况下，直接使用Android-Studio编译打包"><a href="#如果前面编译失败的情况下，直接使用Android-Studio编译打包" class="headerlink" title="如果前面编译失败的情况下，直接使用Android Studio编译打包"></a><font color="black">如果前面编译失败的情况下，直接使用Android Studio编译打包</font></br></h4><p>使用<code>Android Studio</code>打开<code>build-&gt;jsb-default-&gt;frameworks-&gt;runtime-src-&gt;proj.android-studio</code></p>
</li>
<li><p>如果遇到以下报错问题:</p>
<ul>
<li><p>出现一:<font color="red">Failed to find Platform SDK with path: platforms;android–1</font></br> 解决: 直接在gradle.properties文件中<code>PROP_COMPILE_SDK_VERSION</code>和<code>PROP_TARGET_SDK_VERSION</code>修改成已经下载好的SDK版本，我的这儿是 21，然后在<code>Try Again</code>。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">Android SDK version that will be used as the compile project</span><br><span class="line">PROP_COMPILE_SDK_VERSION=-1 改成你的SDK版本</span><br><span class="line">Android SDK version that will be used as the earliest version of android this application can run on</span><br><span class="line">PROP_MIN_SDK_VERSION=16</span><br><span class="line">Android SDK version that will be used as the latest version of android this application has been tested on</span><br><span class="line">PROP_TARGET_SDK_VERSION=-1  改成你的SDK版本</span><br></pre></td></tr></table></figure>
</li>
<li><p>出现二: <font color="red"> Android resource linking failed Output:  ~/build/intermediates/merged_manifests/debug/processDebugManifest/merged/AndroidManifest.xml:29: error: attribute android:usesCleartextTraffic not found.error: failed processing manifest. </font><br>  解决: 直接在你的项目名称下面的<code>manifests</code>文件夹下<code>AndroidManifest.xml</code>，去掉 <font color="#4183C4"><code>android:usesCleartextTraffic=&quot;true&quot;</code></font></p>
<blockquote>
<p>android：usesCleartextTraffic 指示应用程序是否打算使用明文网络流量，例如明文HTTP。目标API级别为27或更低的应用程序的默认值为“ true”。面向API级别28或更高级别的应用默认为“ false”。当属性设置为“ false”时，平台组件（如HTTP和FTP堆栈，DownloadManager和MediaPlayer）将拒绝应用程序使用明文流量的请求。避免明文通信的主要原因是缺乏机密性，真实性和防篡改保护；网络攻击者可以窃听所传输的数据，并且还可以对其进行修改而不会被检测到。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>我的SDK版本是Android21,所以去掉.<br>这儿如果编译过慢可以gradle配置一下放在本地，就不会去网络加载了。前往下载<a href="https://services.gradle.org/distributions/" target="_blank" rel="noopener">各个gradle版本</a><br>然后设置<code>gradle-wrapper.properties</code> <font color="#4183C4">distributionUrl=https://services.gradle.org/distributions/gradle-4.10.3-all.zip</font> </p>
</li>
<li><p>至于配置签名这儿就不多说了.<br>给一个传送门<u><a href="https://www.jianshu.com/p/d5aa7952b580" target="_blank" rel="noopener">Android如何生成签名文件</a></u></p>
</li>
</ul>
<h3 id="要耐心等待一会儿，就编译成功了"><a href="#要耐心等待一会儿，就编译成功了" class="headerlink" title="要耐心等待一会儿，就编译成功了"></a>要耐心等待一会儿，就编译成功了</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Gradle build finished in <span class="number">8</span> s <span class="number">291</span> ms </span><br><span class="line"><span class="function">Build <span class="title">APK</span><span class="params">(s)</span></span></span><br><span class="line"><span class="function"><span class="title">APK</span><span class="params">(s)</span> generated successfully <span class="keyword">for</span> 1 <span class="keyword">module</span></span></span><br><span class="line"><span class="function">Module 'xxx': locate or analyze the APK.</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
      </tags>
  </entry>
  <entry>
    <title>使用git在码云gitee和github上提交代码</title>
    <url>/2018/11/10/technology20181110040214/</url>
    <content><![CDATA[<p><strong><a href="https://gitee.com/login" target="_blank" rel="noopener">gitee码云</a></strong> </p>
<p>这儿我以我自己的 BankLoans 这个仓库名为例。对应的仓库地址为<a href="https://gitee.com/Kziwws/BankLoans.git" target="_blank" rel="noopener">https://gitee.com/Kziwws/BankLoans.git</a></p>
<ul>
<li><strong>第一种</strong> ：向仓库里提交代码，是从项目上拉取下来，然后修改了再提交上去。</li>
<li><strong>第二种</strong>：仓库为空的，直接将本地连接到此仓库，然后再全部提交上去。</li>
</ul>
<h4 id="方法一、先将仓库clone到本地，修改后再push到码云的仓库仓库。"><a href="#方法一、先将仓库clone到本地，修改后再push到码云的仓库仓库。" class="headerlink" title="方法一、先将仓库clone到本地，修改后再push到码云的仓库仓库。"></a>方法一、先将仓库clone到本地，修改后再push到码云的仓库仓库。</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;gitee.com&#x2F;Kziwws&#x2F;BankLoans.git #将远程仓库克隆到本地</span><br></pre></td></tr></table></figure>

<p>克隆下来过后，找到这个文件路径，mac端的话 cd 然后拖入回车就好了.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;~你的目录路径</span><br></pre></td></tr></table></figure>

<p>修改代码后,在仓库目录下执行下面命令，将当前目录所有文件添加到git暂存区</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure>
<p>提交并备注提交信息</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;项目第一次上传&quot;</span><br></pre></td></tr></table></figure>
<p>将本地提交推送到远程仓库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<p>克隆下来如果是私有仓库，需要输入码云的账号和密码。</p>
<h4 id="方法二、本地初始化一个仓库，设置远程仓库地址后再做push。"><a href="#方法二、本地初始化一个仓库，设置远程仓库地址后再做push。" class="headerlink" title="方法二、本地初始化一个仓库，设置远程仓库地址后再做push。"></a>方法二、本地初始化一个仓库，设置远程仓库地址后再做push。</h4><p>找到你项目目录文件路径，mac端的话 cd 然后拖入回车就好了.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;~你的项目目录路径</span><br></pre></td></tr></table></figure>
<p>始化一个仓库，本地仓库默认创建 master 分支,设置远程仓库地址，这儿这个地址要先去<a href="https://gitee.com/" target="_blank" rel="noopener">https://gitee.com/</a>建立一个私有仓库。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init </span><br><span class="line">git remote add origin https:&#x2F;&#x2F;gitee.com&#x2F;Kziwws&#x2F;BankLoans.git</span><br></pre></td></tr></table></figure>

<p>然后再push推送上去</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;项目第一次上传&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>



<p>如果是提交时可能会存在冲突，这时用户需要选择的是保留线上的文件或者舍弃线上的文件，如果您舍弃线上的文件，则在推送时选择强制推送，强制推送需要执行下面的命令(默认不推荐该行为):<code>git push origin master -f</code>，如果您选择保留线上的 readme 文件,则需要先执行：<code>git pull origin master</code></p>
<p><a href="https://github.com/login?return_to=%2Fjoin" target="_blank" rel="noopener">gitHub</a></p>
<p>这儿我以我自己的 BankLoans 这个仓库名为例。对应的仓库地址为<a href="https://github.com/Kziwws/BankLoans.git" target="_blank" rel="noopener">https://github.com/Kziwws/BankLoans.git</a></p>
<ul>
<li><strong>第一种</strong>：向仓库里提交代码，是从项目上拉取下来，然后修改了再提交上去。</li>
<li><strong>第二种</strong>：仓库为空的，直接将本地连接到此仓库，然后再全部提交上去。</li>
</ul>
<h4 id="方法一、先将仓库clone到本地，修改后再push到github的仓库仓库。"><a href="#方法一、先将仓库clone到本地，修改后再push到github的仓库仓库。" class="headerlink" title="方法一、先将仓库clone到本地，修改后再push到github的仓库仓库。"></a>方法一、先将仓库clone到本地，修改后再push到github的仓库仓库。</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;Kziwws&#x2F;BankLoans.git #将远程仓库克隆到本地</span><br><span class="line">cd &#x2F;~你克隆下来的目录路径</span><br><span class="line">git add .  #.是把文件夹下面的文件都添加进来   </span><br><span class="line">git commit  -m &quot;提交的更新信息&quot; </span><br><span class="line">git push -u origin master #此步骤需要你输入帐号和密码</span><br></pre></td></tr></table></figure>


<h4 id="方法二、本地初始化一个仓库，设置远程仓库地址后再做push。-1"><a href="#方法二、本地初始化一个仓库，设置远程仓库地址后再做push。-1" class="headerlink" title="方法二、本地初始化一个仓库，设置远程仓库地址后再做push。"></a>方法二、本地初始化一个仓库，设置远程仓库地址后再做push。</h4><p>找到你项目目录文件路径，mac端的话 cd 然后拖入回车就好了.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;~你的项目目录路径</span><br></pre></td></tr></table></figure>

<p>始化一个仓库，设置远程仓库地址，这儿这个地址要先去<a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a>建立一个私有仓库。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init </span><br><span class="line">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;Kziwws&#x2F;BankLoans.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;项目第一次上传&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客landscape-plus新建分类写文章和基础配置介绍</title>
    <url>/2018/03/12/technology20180312011233/</url>
    <content><![CDATA[<p><strong>这儿有一个整体主题使用排名: <a href="https://www.hexothe.me" target="_blank" rel="noopener">https://www.hexothe.me</a></strong></p>
<p>在网上找了很多hexo主题，其中有的还是挺好看的。我喜欢简约看上去”干净”的主题，最后选择了<font color='red'>landscape-plus</font>的确满足我的风格，<a href="https://arvinxiang.com/landscape-plus/" target="_blank" rel="noopener">主题演示</a>，主题github下载地址:<a href="https://github.com/xiangming/landscape-plus" target="_blank" rel="noopener">https://github.com/xiangming/landscape-plus</a>，而我的在这个基础上整合网上的大佬们整改了一些样式和一些细节处理，因为我感觉自己有”强迫症“。</p>
<p><strong>首先我推荐自己感觉还不错的hexo主题:</strong></p>
<ul>
<li><p>skapp主题地址: <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank" rel="noopener">https://github.com/Mrminfive/hexo-theme-skapp</a>   <a href="http://blog.minfive.com/" target="_blank" rel="noopener">预览效果</a></p>
</li>
<li><p>smackdown主题地址: <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank" rel="noopener">https://github.com/smackgg/hexo-theme-smackdown</a>  <a href="http://oldblog.smackgg.cn/" target="_blank" rel="noopener">预览效果</a></p>
</li>
<li><p>light主题地址: <a href="https://github.com/hexojs/hexo-theme-light" target="_blank" rel="noopener">https://github.com/hexojs/hexo-theme-light</a> </p>
</li>
<li><p>even主题地址: <a href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="noopener">https://github.com/ahonn/hexo-theme-even</a></p>
</li>
<li><p>基于next主题修改 地址: <a href="https://github.com/Lruihao/hexo-theme-next" target="_blank" rel="noopener">https://github.com/Lruihao/hexo-theme-next</a>   <a href="https://www.lruihao.cn" target="_blank" rel="noopener">预览效果</a></p>
</li>
<li><p>TKL主题地址: <a href="https://github.com/SuperKieran/TKL" target="_blank" rel="noopener">https://github.com/SuperKieran/TKL</a>    <a href="https://go.kieran.top/post/14/" target="_blank" rel="noopener">预览效果</a></p>
<p>感谢这些制作和修改主题和爱分享的小伙伴们。</p>
</li>
</ul>
<a id="more"></a>
<h4 id="主题安装"><a href="#主题安装" class="headerlink" title="主题安装:"></a>主题安装:</h4><p>这儿下载安装主题 以landscape-plus为例 <code>git clone https://github.com/xiangming/landscape-plus.git themes/landscape-plus</code> ，只要把这个主题名字修改成你喜欢的主题名字就行了。</p>
<p>然后修改根目录下的<code>_config.yml</code>把 <code>theme</code>的值设置为<code>landscape-plus</code>，然后运行<code>hexo clean</code>在执行<code>hexo  g</code>重新生成一下就换掉主题了。</p>
<h4 id="配置介绍"><a href="#配置介绍" class="headerlink" title="配置介绍:"></a>配置介绍:</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;configuration.html</span><br><span class="line">## Source: https:&#x2F;&#x2F;github.com&#x2F;hexojs&#x2F;hexo&#x2F;</span><br><span class="line"># en</span><br><span class="line"># Site</span><br><span class="line">title: &#39;向阳&#39; #网站名称</span><br><span class="line">subtitle: &#39;一只站在树上的鸟，从来不害怕树枝突然折断，因为它相信的不是树枝，而是它自己的翅膀！&#39; #副标题</span><br><span class="line">description: &#39;&#39; #描述</span><br><span class="line">keywords:</span><br><span class="line">author: kziwws #底部作者</span><br><span class="line">language: zh-CN #显示中文</span><br><span class="line">timezone: &#39;&#39;</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &#39;http:&#x2F;&#x2F;yoursite.com&#x2F;child&#39; and root as &#39;&#x2F;child&#x2F;&#39;</span><br><span class="line">url: #如果有网址填写你的域名 没有可以填写服务器IP地址</span><br><span class="line">root: &#x2F;</span><br><span class="line">permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: true # Set to false to remove trailing &#39;index.html&#39; from permalinks</span><br><span class="line">  trailing_html: true # Set to false to remove trailing &#39;.html&#39; from permalinks</span><br><span class="line"></span><br><span class="line"># Directory</span><br><span class="line">source_dir: source</span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads&#x2F;code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"># Writing</span><br><span class="line">new_post_name: :title.md # File name of new posts</span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: false # Transform title into titlecase</span><br><span class="line">external_link:</span><br><span class="line">  enable: true # Open external links in new tab</span><br><span class="line">  field: site # Apply to the whole site</span><br><span class="line">  exclude: &#39;&#39;</span><br><span class="line">filename_case: 0</span><br><span class="line">render_drafts: false</span><br><span class="line">post_asset_folder: false</span><br><span class="line">relative_link: false</span><br><span class="line">future: true</span><br><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace: &#39;&#39;</span><br><span class="line">  wrap: true</span><br><span class="line">  hljs: false</span><br><span class="line"></span><br><span class="line"># Home page setting</span><br><span class="line"># path: Root path for your blogs index page. (default &#x3D; &#39;&#39;)</span><br><span class="line"># per_page: Posts displayed per page. (0 &#x3D; disable pagination)</span><br><span class="line"># order_by: Posts order. (Order by date descending by default)</span><br><span class="line">index_generator:</span><br><span class="line">  path: &#39;&#39;</span><br><span class="line">  per_page: 8</span><br><span class="line">  order_by: -date</span><br><span class="line"></span><br><span class="line"># Category &amp; Tag</span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"># search</span><br><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 1000</span><br><span class="line"></span><br><span class="line"># Valine.</span><br><span class="line"># You can get your appid and appkey from https:&#x2F;&#x2F;leancloud.cn</span><br><span class="line"># more info please open https:&#x2F;&#x2F;valine.js.org</span><br><span class="line">  </span><br><span class="line"># Metadata elements</span><br><span class="line">## https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTML&#x2F;Element&#x2F;meta</span><br><span class="line">meta_generator: true</span><br><span class="line"></span><br><span class="line"># Date &#x2F; Time format</span><br><span class="line">## Hexo uses Moment.js to parse and display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">## http:&#x2F;&#x2F;momentjs.com&#x2F;docs&#x2F;#&#x2F;displaying&#x2F;format&#x2F;</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line">## Use posts date for updated date unless set in front-matter</span><br><span class="line">use_date_for_updated: false</span><br><span class="line"></span><br><span class="line"># Pagination</span><br><span class="line">## Set per_page to 0 to disable pagination</span><br><span class="line">per_page: 15</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"># Include &#x2F; Exclude file(s)</span><br><span class="line">## include:&#x2F;exclude: options only apply to the &#39;source&#x2F;&#39; folder</span><br><span class="line">include:</span><br><span class="line">exclude:</span><br><span class="line">ignore:</span><br><span class="line"></span><br><span class="line"># Extensions</span><br><span class="line">## Plugins: https:&#x2F;&#x2F;hexo.io&#x2F;plugins&#x2F;</span><br><span class="line">## Themes: https:&#x2F;&#x2F;hexo.io&#x2F;themes&#x2F;</span><br><span class="line">theme: landscape-plus</span><br><span class="line"></span><br><span class="line"># Deployment</span><br><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span><br><span class="line">#使用git提交到github仓库里</span><br><span class="line">#xxx换成你的使用的github的用户名</span><br><span class="line">deploy:</span><br><span class="line">  type: git #这儿前面有两个空格 中间有一个空格 后面的类似</span><br><span class="line">  repository: git@github.com:xxx&#x2F;xxx.github.io.git </span><br><span class="line">  branch: master</span><br><span class="line">  </span><br><span class="line">#如果是使用rsync部署到服务器 </span><br><span class="line">deploy:</span><br><span class="line">  type: rsync</span><br><span class="line">  host: 服务器名 主机IP</span><br><span class="line">  user: 用户名 ssh的用户名</span><br><span class="line">  root: 远程主机目录</span><br><span class="line">  port: ssh登录端口 如22</span><br></pre></td></tr></table></figure>

<h4 id="关于写文章和新建分类"><a href="#关于写文章和新建分类" class="headerlink" title="关于写文章和新建分类:"></a>关于写文章和新建分类:</h4><ul>
<li><p><code>hexo new page categories</code> 这儿本身有 _posts和tags 新建过后会出现一个文件，然后打开这个文件,打开里面的<code>index.md</code>,写上 <code>type: &quot;categories&quot;</code>，类别建立成功。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2020-01-06 15:51:07</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
</li>
<li><p>新写文章 <code>hexo new &quot;文件名字如:title&quot;</code>会在 <code>source/_post</code> 文件夹下创建一个文件，命名为：<code>title.md</code>.</p>
</li>
<li><p>这儿打开过后</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 比如hexo如果写文件</span><br><span class="line">date: 2018-03-18 04:31:11</span><br><span class="line">categories:&#x2F;&#x2F;这个是文章对应的分类，如果一篇文章只能属于一个大的分类，但是这个大的分类又可以细分，比如这儿这儿写的这篇属于技术technology，细分过后属于hexo 博客搭建，这儿写上阶梯型的就像是二叉树一样的结构。这个当然你明白了就行了，后面也可以根据分类去查找文章</span><br><span class="line"> - technology</span><br><span class="line"> - hexo</span><br><span class="line">tags: &#x2F;&#x2F;这儿文章可以属于任何一个标签，你喜欢它属于哪一个标签就写上，同一篇文章可以属于不同的标签，这个理解没有问题吧，先懂这点就行,因为建类别的时候就是根据这个标签去查找的。这个是如果有同阶梯的，表示同等级的权重。</span><br><span class="line"> - hexo</span><br><span class="line">keywords: hexo博客,landscape-plus，新建分类，基础配置介绍</span><br><span class="line">description: Hexo写文章新建分类和基础配置介绍</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
</li>
<li><p>写文章这儿推荐使用<a href="http://soft.down9.xyz/typoraformac_1503.dmg" target="_blank" rel="noopener">Typora</a> 这个链接我放了一个Mac版本的，不知道是不是最新，自己鉴定，不过是真心好用的。如果你SSH工具使用的是<a href="http://www.hostbuf.com/" target="_blank" rel="noopener">FinalShell 前往下载</a>这个的话，你可以直接设置<code>文件点击右键-&gt;选择文本编辑器-&gt;设置外部文本编辑器-&gt;然后选择Typora</code>下一次打开方式选择<code>文本编辑器</code>,就方便多了，只要在文章的时候就会打开这个方便的工具。</p>
</li>
<li><p>现在开始如何设置分类。现在 <code>/soft/hexo/nginxblog/themes/landscape-plus</code>我的是这目录，你的我不知道，现在要打开的是主题下<code>landscape-plus-&gt;_config.yml</code>，直接上配置更加直观。里面会详细介绍。</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  首页: &#x2F;</span><br><span class="line">  编程技术: &#x2F;tags&#x2F;technology </span><br><span class="line">  诗: &#x2F;tags&#x2F;poetry</span><br><span class="line">  生活随笔: &#x2F;tags&#x2F;life</span><br><span class="line">  所有文章: &#x2F;archives</span><br><span class="line">rss: &#x2F;atom.xml</span><br><span class="line"></span><br><span class="line">#上面分类解释一下,前面不是介绍了tags和categories这儿举一个例子，就拿编程技术来说有两种都可以，第一种根据tags标签来分类，&#x2F;tags&#x2F;technology 凡是文章属于大的标签”技术“都是属于这一类，还有另外一种就是&#x2F;categories&#x2F;technology&#x2F;hexo 也可以塞选出来。但是遇到分类的时候就会出现塞选不全面。所以使用tags感觉好一点。</span><br><span class="line"></span><br><span class="line"># Content</span><br><span class="line">excerpt_link: &quot;阅读全文&quot; #Read More 这个是查看更多是文本</span><br><span class="line">fancybox: true #相册功能</span><br><span class="line">mathjax: true  #开启渲染数学公式</span><br><span class="line"></span><br><span class="line"># Sidebar</span><br><span class="line">sidebar: right #左边sidebar位置</span><br><span class="line">widgets:       #各个挂件的widget</span><br><span class="line">- category</span><br><span class="line">- tag</span><br><span class="line">- tagcloud</span><br><span class="line">- archive</span><br><span class="line">- recent_posts</span><br><span class="line">- links</span><br><span class="line"></span><br><span class="line"># Links</span><br><span class="line">links: #友情链接</span><br><span class="line">  github: ～</span><br><span class="line"></span><br><span class="line"># Miscellaneous</span><br><span class="line"># google_analytics: UA-066185928-1 #这个东西需要翻墙,谷歌统计分析，这儿是一个不能使用的ID，后来我放弃了。所以被我改成百度统计了</span><br><span class="line"></span><br><span class="line">baidu_tongji: &#39;81e087347845b30641d06f11be8hb143&#39;#去百度统计里注册,谷歌统计分析，这儿是一个不能使用的ID,只是为了模拟数据</span><br><span class="line">favicon: &#x2F;favicon.png</span><br><span class="line">twitter:</span><br><span class="line">google_plus:</span><br><span class="line">fb_admins: </span><br><span class="line">fb_app_id:</span><br><span class="line"></span><br><span class="line"># Toc</span><br><span class="line">toc:</span><br><span class="line">  article: true   ## show contents in article.</span><br><span class="line">  aside: true     ## show contents in aside.</span><br><span class="line"># Scroll to top</span><br><span class="line">go_top: true</span><br><span class="line"></span><br><span class="line"># search # 这儿之前是跳转到百度搜索引擎 于是参考网上的小伙伴分享的技术和自己的琢磨移植了next主题内部的搜素功能，又很多坑，我趟过来了。哈哈后面我会将具体的移值分分享。</span><br><span class="line">local_search:</span><br><span class="line">  enable: true </span><br><span class="line">  trigger: auto  #表示搜索结果会不会打字时自动显示</span><br><span class="line">  top_n_per_article: -1 #表示每篇文章最多显示几条结果（-1为不限数字）</span><br><span class="line"></span><br><span class="line"># Duoshuo</span><br><span class="line"># duoshuo_shortname: reqianduan</span><br><span class="line">#这儿之前是”多说“现在官网都打不开了好吧,然后移植了leancloud, 后面也会分享出来的。</span><br><span class="line"></span><br><span class="line"># valine leancloud</span><br><span class="line">valine_enable: true # valine评论是否开启</span><br><span class="line">valine:</span><br><span class="line">  appid: vh2N08Qk3UIsu1N8QHu468BH-gzGZoHsz #leancloud中的appid 这儿是模拟的一个ID，无效你需要注册替换成你自己官网注册的。</span><br><span class="line">  appkey: JxrjTSEoPMfc35OMLWhHzcHk #leancloud中的appKey这儿是模拟的一个ID，无效你需要注册替换成你自己官网注册的。</span><br><span class="line">  placeholder: 想说点什么...  #默认留言框内的文字</span><br><span class="line">  notify: false  #新留言是否需要通知 https:&#x2F;&#x2F;github.com&#x2F;xCss&#x2F;Valine&#x2F;wiki</span><br><span class="line">  verify: false  #是否需要验证 验证比较反人类建议false关闭</span><br><span class="line">  avatar: mm  #默认头像</span><br><span class="line">  guest_info: nick,mail # 默认留言框的头部需要访问者输入的信息</span><br><span class="line">  pageSize: 15 #默认单页的留言条数</span><br><span class="line">  </span><br><span class="line"># Baidu share</span><br><span class="line">baidushare: true #是否开启百度分享</span><br></pre></td></tr></table></figure>
</li>
<li><p>这儿由于上面的移植next主题search功能，和替换掉了”多说”评论 valine leancloud,所以里面的代码肯定是没有修改过的，你先屏蔽掉。然后运行，应该你想要的样子新的类别和新写的文章和一些<code>config.yml</code>里设置的基础配置应该就出来。</p>
</li>
</ul>
<h4 id="这儿再分享一个404页面"><a href="#这儿再分享一个404页面" class="headerlink" title="这儿再分享一个404页面:"></a>这儿再分享一个404页面:</h4><ul>
<li><p>当服务器在找不到页面和加载失败的时候使用,直接保存成<code>404x.html</code>文件放在nginx所在的目录下。<code>/usr/local/nginx/html</code>我的是这个目录，放进去过后是<code>/usr/local/nginx/html/404x.html</code>，中间有三个链接，自己填成你的。这个页面也是网上看到扁平化简约风格页面我挺喜欢。也在次感谢提供这个<code>h5</code>的小伙伴。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Error<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">body, div, h3, h4, li, ol &#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0</span><br><span class="line">&#125;</span><br><span class="line">body &#123;</span><br><span class="line">	font: 14px/1.5 'Microsoft YaHei', '微软雅黑', Helvetica, Sans-serif;</span><br><span class="line">	min-width: 1100px;</span><br><span class="line"><span class="css">	<span class="selector-tag">background</span>: <span class="selector-id">#f0f1f3</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line">	outline: 0</span><br><span class="line">&#125;</span><br><span class="line">h3, h4, strong &#123;</span><br><span class="line">	font-weight: 700</span><br><span class="line">&#125;</span><br><span class="line">a &#123;</span><br><span class="line"><span class="css">	<span class="selector-tag">color</span>: <span class="selector-id">#428bca</span>;</span></span><br><span class="line">	text-decoration: none</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">	text-decoration: underline</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page</span> &#123;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">background</span>: <span class="selector-id">#f0f1f3</span>;</span></span><br><span class="line">	padding: 80px 0 180px</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-container</span> &#123;</span></span><br><span class="line">	position: relative;</span><br><span class="line">	z-index: 1</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-main</span> &#123;</span></span><br><span class="line">	position: relative;</span><br><span class="line"><span class="css">	<span class="selector-tag">background</span>: <span class="selector-id">#f9f9f9</span>;</span></span><br><span class="line">	margin: 0 auto;</span><br><span class="line">	width: 617px;</span><br><span class="line">	-ms-box-sizing: border-box;</span><br><span class="line">	-webkit-box-sizing: border-box;</span><br><span class="line">	-moz-box-sizing: border-box;</span><br><span class="line">	box-sizing: border-box;</span><br><span class="line">	padding: 50px 50px 70px</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-main</span><span class="selector-pseudo">:before</span> &#123;</span></span><br><span class="line">	content: '';</span><br><span class="line">	display: block;</span><br><span class="line">	background: url(img/errorPageBorder.png?1427783409637);</span><br><span class="line">	height: 7px;</span><br><span class="line">	position: absolute;</span><br><span class="line">	top: -7px;</span><br><span class="line">	width: 100%;</span><br><span class="line">	left: 0</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-main</span> <span class="selector-tag">h3</span> &#123;</span></span><br><span class="line">	font-size: 24px;</span><br><span class="line">	font-weight: 400;</span><br><span class="line"><span class="css">	<span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#d0d0d0</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-main</span> <span class="selector-tag">h3</span> <span class="selector-tag">strong</span> &#123;</span></span><br><span class="line">	font-size: 54px;</span><br><span class="line">	font-weight: 400;</span><br><span class="line">	margin-right: 20px</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.error-page-main</span> <span class="selector-tag">h4</span> &#123;</span></span><br><span class="line">	font-size: 20px;</span><br><span class="line">	font-weight: 400;</span><br><span class="line"><span class="css">	<span class="selector-tag">color</span>: <span class="selector-id">#333</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-actions</span> &#123;</span></span><br><span class="line">	font-size: 0;</span><br><span class="line">	z-index: 100</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-actions</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">	font-size: 14px;</span><br><span class="line">	display: inline-block;</span><br><span class="line">	padding: 30px 0 0 10px;</span><br><span class="line">	width: 50%;</span><br><span class="line">	-ms-box-sizing: border-box;</span><br><span class="line">	-webkit-box-sizing: border-box;</span><br><span class="line">	-moz-box-sizing: border-box;</span><br><span class="line">	box-sizing: border-box;</span><br><span class="line"><span class="css">	<span class="selector-tag">color</span>: <span class="selector-id">#838383</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.error-page-actions</span> <span class="selector-tag">ol</span> &#123;</span></span><br><span class="line">	list-style: decimal;</span><br><span class="line">	padding-left: 20px</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-actions</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">line-height</span>: 2<span class="selector-class">.5em</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-actions</span><span class="selector-pseudo">:before</span> &#123;</span></span><br><span class="line">	content: '';</span><br><span class="line">	display: block;</span><br><span class="line">	position: absolute;</span><br><span class="line">	z-index: -1;</span><br><span class="line">	bottom: 17px;</span><br><span class="line">	left: 50px;</span><br><span class="line">	width: 200px;</span><br><span class="line">	height: 10px;</span><br><span class="line"><span class="css">	<span class="selector-tag">-moz-box-shadow</span>: 4<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 31<span class="selector-tag">px</span> 11<span class="selector-tag">px</span> <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">-webkit-box-shadow</span>: 4<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 31<span class="selector-tag">px</span> 11<span class="selector-tag">px</span> <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">box-shadow</span>: 4<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 31<span class="selector-tag">px</span> 11<span class="selector-tag">px</span> <span class="selector-id">#999</span>;</span></span><br><span class="line">	-moz-transform: rotate(-4deg);</span><br><span class="line">	-webkit-transform: rotate(-4deg);</span><br><span class="line">	-ms-transform: rotate(-4deg);</span><br><span class="line">	-o-transform: rotate(-4deg);</span><br><span class="line">	transform: rotate(-4deg)</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.error-page-actions</span><span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line">	content: '';</span><br><span class="line">	display: block;</span><br><span class="line">	position: absolute;</span><br><span class="line">	z-index: -1;</span><br><span class="line">	bottom: 17px;</span><br><span class="line">	right: 50px;</span><br><span class="line">	width: 200px;</span><br><span class="line">	height: 10px;</span><br><span class="line"><span class="css">	<span class="selector-tag">-moz-box-shadow</span>: 4<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 31<span class="selector-tag">px</span> 11<span class="selector-tag">px</span> <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">-webkit-box-shadow</span>: 4<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 31<span class="selector-tag">px</span> 11<span class="selector-tag">px</span> <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">box-shadow</span>: 4<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 31<span class="selector-tag">px</span> 11<span class="selector-tag">px</span> <span class="selector-id">#999</span>;</span></span><br><span class="line">	-moz-transform: rotate(4deg);</span><br><span class="line">	-webkit-transform: rotate(4deg);</span><br><span class="line">	-ms-transform: rotate(4deg);</span><br><span class="line">	-o-transform: rotate(4deg);</span><br><span class="line">	transform: rotate(4deg)</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-page"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-page-container"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-page-main"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">strong</span>&gt;</span>404<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>很抱歉，您要访问的页面不存在！</span><br><span class="line">				<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-page-actions"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">h4</span>&gt;</span>可能原因：<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span>&gt;</span>网络信号差不稳定<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span>&gt;</span>找不到请求的页面<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span>&gt;</span>输入的网址不正确<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">h4</span>&gt;</span>可以尝试：<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.rumoss.cn"</span>&gt;</span>返回首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>留言反馈<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>联系站长<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>nginx中去配置:</p>
<p>对应的nginx配置目录<code>/usr/local/nginx/conf/nginx.conf</code>,然后打开</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># redirect server error pages to the static page &#x2F;50x.html</span><br><span class="line">error_page   500 502 503 504 404 &#x2F;404x.html;</span><br><span class="line">location &#x3D; &#x2F;404x.html &#123;</span><br><span class="line">    root   html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>我这个主题相对于landscape-plus来说修改了一些细节上的样式，好奇的话后面我会发一篇，具体的修改了哪些样式。</strong></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Python基础语法</title>
    <url>/2019/01/12/technology20190112101223/</url>
    <content><![CDATA[<p><font color="#4183C4">1、</font>以单下划线开头 _foo 的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用 from xxx import * 而导入。</p>
<p><font color="#4183C4">2、</font>以双下划线开头的_<em>foo 代表类的私有成员，以双下划线开头和结尾的_<em>foo</em></em> 代表 Python 里特殊方法专用的标识，如_<em>init_</em>() 代表类的构造函数。</p>
<p><font color="#4183C4">3、</font>Python 的关键字只包含小写字母，and、exec、not、assert、finally、or、break、for    pass、class、from、print、continue、global    、raise、def、if、return、del、import、try、elif、in、while、else、is、with、except、lambda、yield。</p>
<p><font color="#4183C4">4、</font>缩进的空白数量是可变的，但是所有代码块语句必须包含相同的缩进空白数量，这个必须严格执行。</p>
<p><font color="#4183C4">5、</font>Python语句中一般以新行作为语句的结束符，一行可以执行多个语句用;分开，可以使用斜杠\将一行的语句分为多行显示。</p>
<p><font color="#4183C4">6、</font>使用引号( ‘ )、双引号( “ )、三引号( ‘’’ 或 “”” ) 来表示字符串，三引号可以由多行组成，编写多行文本的快捷语法，常用于文档字符串，在文件的特定地点，被当做注释。</p>
<p><font color="#4183C4">7、</font>python中单行注释采用 # 开头，多行注释使用三个单引号(‘’’)或三个双引号(“””)。</p>
<p><font color="#4183C4">8、</font>print 默认输出是换行的，如果要实现不换行需要在变量末尾加上逗号 ,。</p>
<p><font color="#4183C4">9、</font>Python 中的变量赋值不需要类型声明，每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。</p>
<p><font color="#4183C4">10、</font>标准数据类型，Numbers（数字）、String（字符串）、List（列表）、Tuple（元组）、Dictionary（字典）。</p>
<p><font color="#4183C4">11、</font>Python支持四种不同的数字类型，int（有符号整型）、long（长整型[也可以代表八进制和十六进制])、float（浮点型）、complex（复数）</p>
<p><font color="#4183C4">12、</font>Python 还支持复数，复数由实数部分和虚数部分构成，可以用 a + bj,或者 complex(a,b) 表示， 复数的实部 a 和虚部 b 都是浮点型。 </p>
<p><font color="#4183C4">13、</font>字符串截取 [头下标:尾下标] 获取的子字符串包含头下标的字符，但不包含尾下标的字符。例如 s = ‘abcdef’ s[1:5] 输出’bcde’，s[2:]，输出从第三个字符开始的字符串 s[1] 的值 b ，s[5] 的值 f。</p>
<p><font color="#4183C4">14、</font>列表相当于IOS中的数组。截取可以接收第三个参数，参数作用是截取的步长，以下实例在索引 1 到索引 4 的位置并设置为步长为 2（间隔一个位置）来截取字符串，如：ss = [‘c’,’h’,’e’,’c’,’k’,’i’,’o’] ss[1:4:2] 结果为[‘h’,’c’]。</p>
<p><font color="#4183C4">15、</font>加号（+）是字符串连接运算符 str + “TEST” ，星号（*）是重复操作 s * 2 输出字符串两次。</p>
<p><font color="#4183C4">16、</font>元组是另一个数据类型，类似于 List（列表）。元组用 () 标识。内部元素用逗号隔开。但是元组不能二次赋值，相当于只读列表。tuple = ( ‘runoob’, 786 , 2.23, ‘john’, 70.2 ) list = [ ‘runoob’, 786 , 2.23, ‘john’, 70.2 ] tuple[2] = 1000 元组中是非法应用 list[2] = 1000 列表中是合法应用</p>
<p><font color="#4183C4">17、</font>pythan中的字典当中的元素是通过键来存取的，而不是通过偏移存取。字典用”{ }”标识。字典由索引(key)和它对应的值value组成。dict.keys()取出所有键 dict.values()取出所有值 和IOS基本无异。</p>
<p><font color="#4183C4">18、</font>数据类型转换 float(x) 将x转换到一个浮点数 int(x [,base])将x转换为一个整数 str(x) 将对象 x 转换为字符串 set(s) 转换为可变集合 dict(d) 创建一个字典。d 必须是一个序列 (key,value)元组。</p>
<p><font color="#4183C4">19、</font>算术运算符，这儿介绍一个// 取整除 - 返回商的整数部分（向下取整）9//2 4 和js基本无异。</p>
<p><font color="#4183C4">20、</font>Python身份运算符 is 是判断两个标识符是不是引用自一个对象 x is y,  id() 函数用于获取对象内存地址 类似 id(x) == id(y) , 如果引用的是同一个对象则返回 True，否则返回 False is not 是判断两个标识符是不是引用自不同对象</p>
<p><font color="#4183C4">21、</font>is 与 == 区别 is 用于判断两个变量引用对象是否为同一个(同一块内存空间)， == 用于判断引用变量的值是否相等。</p>
<p><font color="#4183C4">22、</font>简单的语句，可以在同一行的位置上使用if条件判断语句，如：var = 100 ;if ( var  == 100 ) : print “变量 var 的值为100” .</p>
<p><font color="#4183C4">23、</font>Python for 循环语句 for iterating_var in sequence: statements(s) for letter in ‘Python’:     # 第一个实例  print ‘当前字母 :’, letter </p>
<p><font color="#4183C4">24、 </font>使用 class 语句来创建一个新类，class 之后为类的名称并以冒号结尾:<br>class Employee:<br>   ‘所有员工的基类’<br>   empCount = 0</p>
<p>   def <strong>init</strong>(self, name, salary):<br>      self.name = name<br>      self.salary = salary<br>      Employee.empCount += 1</p>
<p>   def displayCount(self):<br>     print “Total Employee %d” % Employee.empCount</p>
<p>   def displayEmployee(self):<br>      print “Name : “, self.name,  “, Salary: “, self.salary</p>
<p>empCount 变量是一个类变量，它的值将在这个类的所有实例之间共享。你可以在内部类或外部类使用 Employee.empCount 访问。第一种方法<strong>init</strong>()方法是一种特殊的方法，被称为类的构造函数或初始化方法，当创建了这个类的实例时就会调用该方法，self 代表类的实例，self 在定义类的方法时是必须有的，虽然在调用时不必传入相应的参数。</p>
<p><font color="#4183C4">25、</font>self代表类的实例，而非类 类的方法与普通的函数只有一个特别的区别——它们必须有一个额外的第一个参数名称, 按照惯例它的名称是 self。<br>class Test:<br>    def prt(self):<br>        print(self)<br>        print(self.<strong>class</strong>)</p>
<p>t = Test()<br>t.prt()</p>
<p><font color="#4183C4">26、</font>使用点号 . 来访问对象的属性。使用如下类的名称访问类变量:</p>
<p>emp1.displayEmployee()<br>emp2.displayEmployee()<br>print “Total Employee %d” % Employee.empCount</p>
<p>也可以删除 del emp1.age  # 删除 ‘age’ 属性</p>
<p>hasattr(emp1, ‘age’)    # 如果存在 ‘age’ 属性返回 True。<br>getattr(emp1, ‘age’)    # 返回 ‘age’ 属性的值<br>setattr(emp1, ‘age’, 8) # 添加属性 ‘age’ 值为 8<br>delattr(emp1, ‘age’)    # 删除属性 ‘age’</p>
<p><font color="#4183C4">27、</font>pythan可以多继承，继承过后父类方法的功能不能满足你的需求，子类重写你父类的方法。你可以使用issubclass()或者isinstance()方法来检测。issubclass() - 布尔函数判断一个类是另一个类的子类或者子孙类，语法：issubclass(sub,sup)， isinstance(obj, Class) 布尔函数如果obj是Class类的实例对象或者是一个Class子类的实例对象则返回true。</p>
<p><font color="#4183C4">28、</font>Python同样支持运算符重载，实例如下：</p>
<p>class Vector:<br>   def _<em>init_</em>(self, a, b):<br>      self.a = a<br>      self.b = b</p>
<p>   def _<em>str_</em>(self):<br>      return ‘Vector (%d, %d)’ % (self.a, self.b)</p>
<p>   def_<em>add_</em>(self,other):<br>      return Vector(self.a + other.a, self.b + other.b)</p>
<p>v1 = Vector(2,10)<br>v2 = Vector(5,-2)<br>print v1 + v2<br>结果：Vector(7,8)</p>
<p><font color="#4183C4">29、</font>类的私有属性__private_attrs：两个下划线开头，声明该属性为私有，不能在类的外部被使用或直接访问。在类内部的方法中使用时 self.__private_attrs，在类的内部，使用 def 关键字可以为类定义一个方法，与一般函数定义不同，类方法必须包含参数 self,且为第一个参数。</p>
<p><font color="#4183C4">30、</font>单下划线、双下划线、头尾双下划线说明：<br>_<em>foo_</em>: 定义的是特殊方法，一般是系统定义名字 ，类似_<em>init_</em>() 之类的。</p>
<p> _foo: 以单下划线开头的表示的是 protected 类型的变量，即保护类型只能允许其本身与子类进行访问，不能用于 from module import *</p>
<p>__foo: 双下划线的表示的是私有类型(private)的变量, 只能是允许这个类本身进行访问了。</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>CocosCreator打包原生Android项目接入微信登陆</title>
    <url>/2019/05/04/technology20190504061234/</url>
    <content><![CDATA[<p>前往 <a href="https://developers.weixin.qq.com/doc/oplatform/Downloads/Android_Resource.html" target="_blank" rel="noopener">微信官方文档 •开放平台</a> ，<a href="https://dl.bintray.com/wechat-sdk-team/maven/com/tencent/mm/opensdk/wechat-sdk-android-without-mta/6.6.4/" target="_blank" rel="noopener">Android开发工具包下载</a>，范例代码<a href="https://res.wx.qq.com/op_res/dl_hmdniBHBL1Jh2zHwHaZ-FM8YE9hTH6H6U7NKwbshR0QSgb7vH5aL4zwhtGqEt" target="_blank" rel="noopener">HelloWeixin下载</a>。</p>
<p><img src="https://s1.ax1x.com/2020/06/22/NGhlSe.png" alt=""></p>
<h5 id="一、生成安卓keystore签名"><a href="#一、生成安卓keystore签名" class="headerlink" title=" 一、生成安卓keystore签名"></a><font color="#4183C4"> 一、生成安卓keystore签名</font></h5><p>使用这个Android Studio 生成的keystore，有一个在线生成<a href="http://www.applicationloader.net/appuploader/keystore.php" target="_blank" rel="noopener">安卓证书在线制作工具</a></p>
<p><img src="https://s1.ax1x.com/2020/06/22/NGzbMn.png" alt=""></p>
<h5 id="二、在所在包名下的目录新建一个文件夹wxapi"><a href="#二、在所在包名下的目录新建一个文件夹wxapi" class="headerlink" title=" 二、在所在包名下的目录新建一个文件夹wxapi"></a><font color="#4183C4"> 二、在所在包名下的目录新建一个文件夹wxapi</font></h5><p>然后新建一个类 <code>WXEntryActivity.java</code>名字和文件名需要一样。</p>
<p><img src="https://s1.ax1x.com/2020/06/22/NJpatO.png" alt=""></p>
<h5 id="三、实现WXEntryActivity-java代码"><a href="#三、实现WXEntryActivity-java代码" class="headerlink" title=" 三、实现WXEntryActivity.java代码"></a><font color="#4183C4"> 三、实现WXEntryActivity.java代码</font></h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Copyright (c) 2015-2016 Chukong Technologies Inc.</span></span><br><span class="line"><span class="comment"> Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.</span></span><br><span class="line"><span class="comment"> http://www.cocos2d-x.org</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> com.ds.quwami.wxapi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelbase.BaseReq;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelbase.BaseResp;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelmsg.SendAuth;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPI;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPIEventHandler;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.WXAPIFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.cocos2dx.javascript.AppActivity;</span><br><span class="line"><span class="keyword">import</span> org.cocos2dx.lib.Cocos2dxJavascriptJavaBridge;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WXEntryActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">IWXAPIEventHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String APP_ID = <span class="string">"wxq28466eh4b48be59"</span>;<span class="comment">//这个ID是错误的换成你自己的</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 微信的登录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IWXAPI api;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        api= WXAPIFactory.createWXAPI(<span class="keyword">this</span>,APP_ID,<span class="keyword">true</span>);</span><br><span class="line">        api.registerApp(APP_ID);</span><br><span class="line">        api.handleIntent(getIntent(), <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onNewIntent</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onNewIntent(intent);</span><br><span class="line">        setIntent(intent);</span><br><span class="line">        api.handleIntent(intent,<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReq</span><span class="params">(BaseReq baseReq)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResp</span><span class="params">(BaseResp resp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> errorCode = resp.errCode;</span><br><span class="line">        <span class="keyword">switch</span> (errorCode) &#123;</span><br><span class="line">            <span class="keyword">case</span> BaseResp.ErrCode.ERR_OK:</span><br><span class="line">                <span class="comment">//用户同意</span></span><br><span class="line">                <span class="keyword">final</span> String code = ((SendAuth.Resp) resp).code;</span><br><span class="line">                Log.i(<span class="string">"WXEntryActivity"</span>, <span class="string">"WXEntryActivity onResp:  code="</span> + code);</span><br><span class="line"></span><br><span class="line">                AppActivity.calljs(code);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> BaseResp.ErrCode.ERR_AUTH_DENIED:</span><br><span class="line">                <span class="comment">//用户拒绝</span></span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"微信登录 用户拒绝"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> BaseResp.ErrCode.ERR_USER_CANCEL:</span><br><span class="line">                <span class="comment">//用户取消</span></span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>, <span class="string">"微信登录 用户取消"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        finish();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在<font color="#4183C4"> <strong>AndroidManifest.xml</strong></font>主文件中添加</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.ds.~.wxapi.WXEntryActivity"</span>//这儿换成你自己的</span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.Translucent.NoTitleBar"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:taskAffinity</span>=<span class="string">"com.ds.～"</span>//这儿换成你自己的</span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">"singleTask"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加位置，如图红色框的部分:</p>
<p><img src="https://s1.ax1x.com/2020/06/22/NJPe0I.png" alt=""></p>
<p>其中<code>android:name = &quot;com.~.wxapi.WXEntryActivity&quot;</code>这个就是对应这个路径目录。</p>
<p><font color="#4183C4"> 添加WXAPI依赖</font>，打开build.gradle文件,注意是proj.android-studio/～你的项目名字 目录下,在dependencies中加下面的代码 <code>api &#39;com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+&#39;</code>，这儿game下的 build.gradle也要添加。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation fileTree(dir: 'libs', include: ['*.jar','*.aar'])</span><br><span class="line">    implementation fileTree(dir: "/Applications/CocosCreator2.3.2.app/Contents/Resources/cocos2d-x/cocos/platform/android/java/libs", include: ['*.jar'])</span><br><span class="line">    implementation project(':libcocos2dx')</span><br><span class="line">    api 'com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+' </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>AppActivity.java中的实现，wxLogin函数必须是静态的,这样才可以去外部调用。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Copyright (c) 2015-2016 Chukong Technologies Inc.</span></span><br><span class="line"><span class="comment"> Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.</span></span><br><span class="line"><span class="comment"> http://www.cocos2d-x.org</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> org.cocos2dx.javascript;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.modelmsg.SendAuth;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.IWXAPI;</span><br><span class="line"><span class="keyword">import</span> com.tencent.mm.opensdk.openapi.WXAPIFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.cocos2dx.lib.Cocos2dxActivity;</span><br><span class="line"><span class="keyword">import</span> org.cocos2dx.lib.Cocos2dxGLSurfaceView;</span><br><span class="line"><span class="keyword">import</span> org.cocos2dx.lib.Cocos2dxJavascriptJavaBridge;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppActivity</span> <span class="keyword">extends</span> <span class="title">Cocos2dxActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String APP_ID = <span class="string">"wxq28466eh4b48be59"</span>;<span class="comment">//这个ID是错误的换成你自己的</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 微信的登录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IWXAPI api;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AppActivity act;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">if</span> (!isTaskRoot()) &#123;</span><br><span class="line">            <span class="comment">// Android launched another instance of the root activity into an existing task</span></span><br><span class="line">            <span class="comment">// so just quietly finish and go away, dropping the user back into the activity</span></span><br><span class="line">            <span class="comment">// at the top of the stack (ie: the last state of this task)</span></span><br><span class="line">            <span class="comment">// Don't need to finish it again since it's finished in super.onCreate .</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// DO OTHER INITIALIZATION BELOW</span></span><br><span class="line">        SDKWrapper.getInstance().init(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        api= WXAPIFactory.createWXAPI(<span class="keyword">this</span>,APP_ID);</span><br><span class="line">        api.registerApp(APP_ID);</span><br><span class="line">        act = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Cocos2dxGLSurfaceView <span class="title">onCreateView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Cocos2dxGLSurfaceView glSurfaceView = <span class="keyword">new</span> Cocos2dxGLSurfaceView(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">// TestCpp should create stencil buffer</span></span><br><span class="line">        glSurfaceView.setEGLConfigChooser(<span class="number">5</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">16</span>, <span class="number">8</span>);</span><br><span class="line">        SDKWrapper.getInstance().setGLSurfaceView(glSurfaceView, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> glSurfaceView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        SDKWrapper.getInstance().onResume();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        SDKWrapper.getInstance().onPause();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="keyword">if</span> (!isTaskRoot()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        SDKWrapper.getInstance().onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        SDKWrapper.getInstance().onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onNewIntent</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onNewIntent(intent);</span><br><span class="line">        SDKWrapper.getInstance().onNewIntent(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onRestart();</span><br><span class="line">        SDKWrapper.getInstance().onRestart();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStop();</span><br><span class="line">        SDKWrapper.getInstance().onStop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBackPressed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SDKWrapper.getInstance().onBackPressed();</span><br><span class="line">        <span class="keyword">super</span>.onBackPressed();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> </span>&#123;</span><br><span class="line">        SDKWrapper.getInstance().onConfigurationChanged(newConfig);</span><br><span class="line">        <span class="keyword">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestoreInstanceState</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        SDKWrapper.getInstance().onRestoreInstanceState(savedInstanceState);</span><br><span class="line">        <span class="keyword">super</span>.onRestoreInstanceState(savedInstanceState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">        SDKWrapper.getInstance().onSaveInstanceState(outState);</span><br><span class="line">        <span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SDKWrapper.getInstance().onStart();</span><br><span class="line">        <span class="keyword">super</span>.onStart();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 微信登录-唤起微信</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">wxLogin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!api.isWXAppInstalled()) &#123;</span><br><span class="line">            Toast.makeText(act, <span class="string">"您还未安装微信客户端"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            SendAuth.Req req=<span class="keyword">new</span> SendAuth.Req();</span><br><span class="line">            req.scope=<span class="string">"snsapi_userinfo"</span>;</span><br><span class="line">            req.state=<span class="string">"wx_login"</span>;</span><br><span class="line">            api.sendReq(req);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">calljs</span><span class="params">(<span class="keyword">final</span> String code)</span></span>&#123;</span><br><span class="line">        act.runOnGLThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">final</span> String jvCallCode =String.format(<span class="string">"cc.jsEngineCallback(\"%s\")"</span>,code);</span><br><span class="line">                Cocos2dxJavascriptJavaBridge.evalString(jvCallCode);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color="#4183C4">  cocos登陆页面调用，微信登陆。</font></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">wxChatLogin()&#123;</span><br><span class="line">    <span class="keyword">if</span>(cc.sys.OS_ANDROID == cc.sys.os)&#123;<span class="comment">//安卓</span></span><br><span class="line">        jsb.reflection.callStaticMethod(<span class="string">"org/cocos2dx/javascript/AppActivity"</span>, <span class="string">"wxLogin"</span>, <span class="string">"()V"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cc.sys.OS_IOS == cc.sys.os)&#123;<span class="comment">//苹果</span></span><br><span class="line">       jsb.reflection.callStaticMethod(<span class="string">"AppController"</span>, <span class="string">"wxSendAuth"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        cc.hud.show(<span class="number">1.5</span>,<span class="string">'非移动客户端暂不支持微信登陆'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//响应过后传递过来的值</span></span><br><span class="line">    cc.jsEngineCallback = <span class="function"><span class="keyword">function</span>(<span class="params">wxCode</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getWXCodeSuceess(wxCode);</span><br><span class="line">    &#125;.bind(<span class="keyword">this</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><font color="#4183C4"> 这儿微信登陆需要真机调试，为了方便直接打包debug和release使用之前生成keystore。</font></p>
<p><img src="https://s1.ax1x.com/2020/06/22/NJZCb4.png" alt=""></p>
<p>上面的密码改成生成 keystore时的密码，然后再调试运行在手机上。</p>
<p>这儿如果有什么问题可以直接企鹅上留言: <font color="#4183C4">1197696574</font> 交流。</p>
]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>CocosCreator中JS调用Android平台实现复制功能</title>
    <url>/2018/08/15/technology20180815161022/</url>
    <content><![CDATA[<p>在cocos2dx-js中先在判断是否是手机端<code>isMobile</code>,手机端包括手机网页<code>isNative</code>和手机原生端<code>cc.sys.OS_IOS 、 cc.sys.OS_ANDROID</code>，web端<code>isBrowser</code>。</p>
<p><strong>在cocos项目中需要点击复制的地方写上方法</strong></p>
<a id="more"></a>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">touchCopy()&#123;</span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">this</span>.label.string;</span><br><span class="line">    <span class="keyword">if</span>(cc.sys.isMobile)&#123;</span><br><span class="line">        jsb.reflection.callStaticMethod(<span class="string">"org/cocos2dx/javascript/AppActivity"</span>, <span class="string">"copyTextFuc"</span>, <span class="string">"(Ljava/lang/String;)V"</span>,text);</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cc.sys.isBrowser)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> el = <span class="built_in">document</span>.createElement(<span class="string">'textarea'</span>);</span><br><span class="line">        el.value = text;</span><br><span class="line">        el.setAttribute(<span class="string">'readonly'</span>, <span class="string">''</span>);</span><br><span class="line">        el.style.contain = <span class="string">'strict'</span>;</span><br><span class="line">        el.style.position = <span class="string">'absolute'</span>;</span><br><span class="line">        el.style.left = <span class="string">'-9999px'</span>;</span><br><span class="line">        el.style.fontSize = <span class="string">'12pt'</span>; <span class="comment">// Prevent zooming on iOS</span></span><br><span class="line">        <span class="keyword">const</span> selection = getSelection();</span><br><span class="line">        <span class="keyword">var</span> originalRange = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (selection.rangeCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            originalRange = selection.getRangeAt(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(el);</span><br><span class="line">        el.select();</span><br><span class="line">        el.selectionStart = <span class="number">0</span>;</span><br><span class="line">        el.selectionEnd = input.length;</span><br><span class="line">        <span class="keyword">var</span> success = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            success = <span class="built_in">document</span>.execCommand(<span class="string">'copy'</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(el);</span><br><span class="line">            <span class="keyword">if</span> (originalRange) &#123;</span><br><span class="line">                selection.removeAllRanges();</span><br><span class="line">                selection.addRange(originalRange);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>


<p><b> 关于 <font color="red">jsb.reflection.callStaticMethod(className, methodName, methodSignature, parameters…) </font>方法中参数介绍: </b></p>
<ul>
<li>第一个参：第一个为打包过后需要调用的类的所在文件下的包名+类名。</li>
<li>第二个参:方法名，在该类下的方法名字需公共方法 <code>public static</code>。</li>
<li>第三个参:<code>(Ljava/lang/String;)V</code>代表带一个字符串参数没有返回值的方法函数。<ul>
<li>例一: <font color='red'>(II)V </font>代表含有两个int类型的没有返回值的方法函数。</li>
<li>例二：<font color='red'>(Ljava/lang/String;Ljava/lang/String;)I </font> 代表含有两个字符串参数的返回值为int类型的方法函数。</li>
<li>例三：<font color='red'>(FI)Z</font> 代表含有一个float和一个int，返回值为boolean的方法函数。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>java类型</th>
<th align="center">签名</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td align="center">I</td>
</tr>
<tr>
<td>float</td>
<td align="center">F</td>
</tr>
<tr>
<td>boolean</td>
<td align="center">Z</td>
</tr>
<tr>
<td>String</td>
<td align="center">Ljava/lang/String;</td>
</tr>
</tbody></table>
<p><strong>用Android Studio打开项目</strong><br>在AppActivity中写入上面的回调方法函数</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppActivity</span> <span class="keyword">extends</span> <span class="title">Cocos2dxActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> AppActivity app;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">// Workaround in https://stackoverflow.com/questions/16283079/re-launch-of-activity-on-home-button-but-only-the-first-time/16447508</span></span><br><span class="line">        <span class="keyword">if</span> (!isTaskRoot()) &#123;</span><br><span class="line">            <span class="comment">// Android launched another instance of the root activity into an existing task</span></span><br><span class="line">            <span class="comment">//  so just quietly finish and go away, dropping the user back into the activity</span></span><br><span class="line">            <span class="comment">//  at the top of the stack (ie: the last state of this task)</span></span><br><span class="line">            <span class="comment">// Don't need to finish it again since it's finished in super.onCreate .</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// DO OTHER INITIALIZATION BELOW</span></span><br><span class="line">        SDKWrapper.getInstance().init(<span class="keyword">this</span>);</span><br><span class="line">        app = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyTextFuc</span><span class="params">(<span class="keyword">final</span> String message)</span></span>&#123;</span><br><span class="line">        app.showAlertDialog(message);</span><br><span class="line">        <span class="comment">//获取剪贴板管理器：</span></span><br><span class="line">        ClipboardManager cm = (ClipboardManager) app.getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line">        <span class="comment">// 创建普通字符型ClipData</span></span><br><span class="line">        ClipData mClipData = ClipData.newPlainText(<span class="string">"Label"</span>, message);</span><br><span class="line">        <span class="comment">//将ClipData内容放到系统剪贴板里。</span></span><br><span class="line">        cm.setPrimaryClip(mClipData);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showAlertDialog</span><span class="params">(<span class="keyword">final</span> String message)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用runOnUiThread</span></span><br><span class="line">        app.runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                AlertDialog alertDialog = <span class="keyword">new</span> AlertDialog.Builder(app).create();</span><br><span class="line">                alertDialog.setMessage(message);</span><br><span class="line">                alertDialog.setIcon(R.drawable.ic_dialog_alert);</span><br><span class="line">                alertDialog.show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果是mac端的Android studio 直接使用option+enter 快捷导入使用到的包名。</p>
<blockquote>
<p>import android.R;<br>import android.app.AlertDialog;<br>import android.content.ClipData;<br>import android.content.ClipboardManager;</p>
</blockquote>
<h3 id="然后打包测试-应该就可以复制粘贴了。"><a href="#然后打包测试-应该就可以复制粘贴了。" class="headerlink" title="然后打包测试 应该就可以复制粘贴了。"></a>然后打包测试 应该就可以复制粘贴了。</h3>]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
      </tags>
  </entry>
  <entry>
    <title>CocosCreator中XMLHttpReques 网络数据请求</title>
    <url>/2019/08/01/technology20190801101045/</url>
    <content><![CDATA[<p>XMLHttpRequest 用于短连接, Web 平台上最广泛使用的标准网络接口，在IOS中 类似 AFNetworking 做IOS的应该知道。标准文档请参考 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener">MDN 中文文档</a>。</p>
<p><strong>初始化</strong></p>
<ul>
<li>可以直接使用 <code>new XMLHttpRequest()</code> 来创建一个连接对象。</li>
<li><code>cc.loader.getXMLHttpRequest()</code> 来创建。</li>
</ul>
<p><strong>使用</strong><br>提交一个表单，它里面有两个字段，假如为 phone = 10086888888 和 password=1234`x。参数有特殊符号转换为ASCII HEX值。如果你用 POST 方法，那么服务器将会接收到一个字符串类似于下面三种情况之一，其中的区别依赖于你采用何种编码类型:</p>
<ul>
<li><p>POST ,Content-Type 为  application/x-www-form-urlencoded 编码类型</p>
<blockquote>
<p> Content-Type: application/x-www-form-urlencoded<br>phone=10086888888&amp;password=1234%60x</p>
</blockquote>
</li>
<li><p>POST ,Content-Type 为  text/plain 编码类型</p>
<blockquote>
<p>Content-Type: text/plain<br>phone=10086888888<br>password=1234%60x</p>
</blockquote>
</li>
<li><p>POST ,Content-Type 为  multipart/form-data 编码类型<br>multipart/form-data不会对参数编码，使用的boundary(分割线)，相当于&amp;，<br>boundary的值是——–314911788813839</p>
<blockquote>
<p>Content-Type: multipart/form-data;<br>——–314911788813839<br>Content-Disposition: form-data; name=”phone”<br>10086888888&amp;<br>——–314911788813839<br>Content-Disposition: form-data; name=”password”<br>1234%60x<br>——–314911788813839</p>
</blockquote>
</li>
<li><p>使用 GET 方法 请求Content-Type 属性会被忽略，像下面这样的字符串将被简单的附加到 URL</p>
<blockquote>
<p>?phone=10086888888&amp;password=1234%60x</p>
</blockquote>
</li>
</ul>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest" target="_blank" rel="noopener">XMLHttpRequest的基础使用在MDN web docs参考</a>,<font color="red"></p>
<p>直接上代码。如果有问题可以下面评论留言交流。</font></p>
<a id="more"></a>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XMLRequest</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="comment">//console.log('constructor');</span></span><br><span class="line">        <span class="keyword">this</span>._token = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>._timeout = <span class="number">10.0</span> * <span class="number">1000</span>; <span class="comment">//10s 请求超时时间</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * get请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>url Url请求地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>params 请求参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>callback 数据回调</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">get</span>(url,params,callback)&#123;</span><br><span class="line">        <span class="keyword">this</span>.logintoken(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> requestUrl = cc.config.host_address + url + <span class="string">"?"</span>;</span><br><span class="line">            <span class="keyword">if</span>(params)&#123;</span><br><span class="line">               params = <span class="keyword">this</span>.queryStringFromParameters(params);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.xhrRequest(<span class="string">"GET"</span>,requestUrl,params,<span class="literal">true</span>,<span class="function"><span class="keyword">function</span>(<span class="params">xhr</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">400</span>)) &#123;</span><br><span class="line">                    <span class="keyword">var</span> response = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">                    <span class="built_in">console</span>.log(requestUrl + params + <span class="string">"\n\n"</span>+ <span class="built_in">JSON</span>.stringify(response));</span><br><span class="line">                    <span class="keyword">if</span>(response[<span class="string">"code"</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">                        cc.hud.show(<span class="number">1.5</span>,response[<span class="string">"msg"</span>],<span class="literal">undefined</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                        &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">var</span> data = response[<span class="string">"data"</span>];</span><br><span class="line">                        <span class="keyword">if</span>(data &amp;&amp; callback)&#123;</span><br><span class="line">                            callback(data);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">        &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * post请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>url Url请求地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>params 请求参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>callback 数据回调</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    post(url,params,callback)&#123;</span><br><span class="line">        <span class="keyword">this</span>.logintoken(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> requestUrl = cc.config.host_address + url;</span><br><span class="line">            <span class="keyword">if</span>(params)&#123;</span><br><span class="line">               params = <span class="keyword">this</span>.queryStringFromParameters(params);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.xhrRequest(<span class="string">"POST"</span>,requestUrl,params,<span class="literal">true</span>,<span class="function"><span class="keyword">function</span>(<span class="params">xhr</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">400</span>)) &#123;</span><br><span class="line">                    <span class="keyword">var</span> response = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">                    <span class="built_in">console</span>.log(requestUrl + params + <span class="string">"\n\n"</span>+ <span class="built_in">JSON</span>.stringify(response));</span><br><span class="line">                    <span class="keyword">if</span>(response[<span class="string">"code"</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">                        cc.hud.show(<span class="number">1.5</span>,response[<span class="string">"msg"</span>],<span class="literal">undefined</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                        &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">var</span> data = response[<span class="string">"data"</span>];</span><br><span class="line">                        <span class="keyword">if</span>(data &amp;&amp; callback)&#123;</span><br><span class="line">                            callback(data);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">        &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化一个请求类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>method "POST GET"</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>url 请求地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>params 请求的参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>async 是否移步</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>onreadystatechangeCallback 回调函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    xhrRequest(method, url, params, <span class="keyword">async</span>,onreadystatechangeCallback)&#123;</span><br><span class="line">        <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">        xhr.timeout = <span class="keyword">this</span>._timeout;</span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(onreadystatechangeCallback)&#123;</span><br><span class="line">               onreadystatechangeCallback(xhr);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.open(method, url, <span class="keyword">async</span>);</span><br><span class="line">        xhr.setRequestHeader(<span class="string">"Content-Type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">        <span class="keyword">if</span>(cc.request._token)&#123;</span><br><span class="line">            xhr.setRequestHeader(<span class="string">"token"</span>,cc.request._token);</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.withCredentials = <span class="literal">true</span>;</span><br><span class="line">        xhr.send(params);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 登录token</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    logintoken(callback)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>._token == <span class="literal">undefined</span> ||<span class="keyword">this</span>._token == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">let</span> requestUrl = cc.config.host_address + cc.config.login;</span><br><span class="line">            <span class="keyword">let</span> params = &#123;<span class="attr">password</span>: <span class="string">"123456"</span>,<span class="attr">phone</span>:<span class="string">"18888888888"</span>&#125;;</span><br><span class="line">            <span class="keyword">var</span> mutablePairs = <span class="keyword">this</span>.queryStringFromParameters(params);</span><br><span class="line">            <span class="keyword">this</span>.xhrRequest(<span class="string">"POST"</span>,requestUrl,mutablePairs,<span class="literal">true</span>,<span class="function"><span class="keyword">function</span>(<span class="params">xhr</span>)</span>&#123;</span><br><span class="line">                xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">400</span>)) &#123;</span><br><span class="line">                        <span class="keyword">var</span> response = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">                        cc.request._token = response[<span class="string">"data"</span>];</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"登录校验token "</span> + cc.request._token);</span><br><span class="line">                        <span class="keyword">if</span>(callback)&#123;</span><br><span class="line">                            callback();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(callback)&#123;</span><br><span class="line">                callback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字典转拼接的字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    queryStringFromParameters(parameters)&#123;</span><br><span class="line">        <span class="keyword">var</span> mutablePairs = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">var</span> res = <span class="built_in">Object</span>.keys(parameters).sort(); </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> res)&#123;  </span><br><span class="line">            <span class="keyword">let</span> tempkey = res[key];</span><br><span class="line">            <span class="keyword">let</span> value = parameters[res[key]];</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(value))&#123;</span><br><span class="line">                mutablePairs += tempkey + <span class="string">"="</span> + <span class="built_in">JSON</span>.stringify(value) +<span class="string">"&amp;"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                mutablePairs += tempkey + <span class="string">"="</span> + value +<span class="string">"&amp;"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(mutablePairs.length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            mutablePairs = mutablePairs.substr(<span class="number">0</span>,mutablePairs.length<span class="number">-1</span>);</span><br><span class="line">            mutablePairs = <span class="built_in">encodeURI</span>(mutablePairs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mutablePairs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Set the imageView `image` with an `url` and a placeholder.</span></span><br><span class="line"><span class="comment">    * The download is asynchronous and cached.</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param </span>url         The url for the image.</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param </span>placeholder The image to be set initially, until the image request finishes.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    setImageWithURL(sprite,url, placeholderImage)&#123;</span><br><span class="line">        <span class="keyword">let</span> remoteUrl = url;</span><br><span class="line">        <span class="keyword">if</span>(placeholderImage)&#123;</span><br><span class="line">            <span class="keyword">let</span> pathURL = placeholderImage;</span><br><span class="line">            cc.loader.loadRes(pathURL, cc.SpriteFrame, <span class="function"><span class="keyword">function</span> (<span class="params">err, sf</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">                    <span class="keyword">this</span>.spriteFrame = sf;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"error:"</span>+err);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;.bind(sprite));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(remoteUrl)&#123;</span><br><span class="line">            cc.loader.load(remoteUrl, <span class="function"><span class="keyword">function</span> (<span class="params">err, texture</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// Use texture to create sprite frame</span></span><br><span class="line">                <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">                    <span class="keyword">this</span>.spriteFrame = <span class="keyword">new</span> cc.SpriteFrame(texture);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"加载网络图片出错:"</span>+ err);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;.bind(sprite));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* get XMLRequest</span></span><br><span class="line"><span class="comment">* <span class="doctag">@returns <span class="type">&#123;XMLRequest&#125;</span></span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> instance;</span><br><span class="line"><span class="keyword">var</span> getXMLRequest = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!instance)&#123;</span><br><span class="line">        instance = <span class="keyword">new</span> XMLRequest();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = cc.request = getXMLRequest();</span><br></pre></td></tr></table></figure>

<p>上面是对 XMLHttpRequest简单的封装</p>
<ul>
<li>网络数据调用:<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">第一个参数为你接口路径地址,第二个为参数字典。</span><br><span class="line"></span><br><span class="line">cc.request.post(cc.config.question_getrandonequestion,<span class="literal">null</span>,<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">this</span>._data = response;</span><br><span class="line">     <span class="keyword">this</span>.setDataResponse(response);</span><br><span class="line">&#125;.bind(<span class="keyword">this</span>));</span><br></pre></td></tr></table></figure></li>
<li>远程图片Url调用:<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">cc.request.setImageWithURL(<span class="keyword">this</span>.questionImg.getComponent(cc.Sprite),imgUrl);</span><br></pre></td></tr></table></figure>



</li>
</ul>
<p><strong>creator.d.ts加载本地图片的两种方式</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> pathURL = <span class="string">"singleColor"</span>;<span class="comment">//这儿指必须在 resources 目标下的资源图片</span></span><br><span class="line">cc.loader.loadRes(pathURL, cc.SpriteFrame, <span class="function"><span class="keyword">function</span> (<span class="params">err, sf</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">        <span class="keyword">this</span>.hudNode.getComponent(cc.Sprite).spriteFrame = sf;</span><br><span class="line">        <span class="keyword">this</span>.hudNode.color = cc.Color.BLACK;</span><br><span class="line">        <span class="keyword">this</span>.hudNode.opacity = <span class="number">230</span>;</span><br><span class="line">        <span class="comment">//透明度级联功能从 v2.0 开始已移除 节点的不透明度值是否影响其子节点，默认值为 true</span></span><br><span class="line">        <span class="comment">//this.hudNode.cascadeOpacity = false;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"error:"</span>+err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;.bind(<span class="keyword">this</span>));</span><br></pre></td></tr></table></figure>
<p>第二种加载出Texture 构造SpriteFrame ，Use texture to create sprite frame。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.hudNode.spriteFrame = <span class="keyword">new</span> cc.SpriteFrame(cc.textureCache.addImage(cc.url.raw(pathURL)));</span><br><span class="line"></span><br><span class="line">等效</span><br><span class="line"></span><br><span class="line">cc.loader.loadRes(pathURL, cc.SpriteFrame, <span class="function"><span class="keyword">function</span> (<span class="params">err, sf</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">        <span class="keyword">this</span>.spriteFrame = sf;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"error:"</span>+err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;.bind(sprite));</span><br></pre></td></tr></table></figure>



<p>如果出现 同源策略禁止读取位于 ‘http://你的地址’ 的远程资源。（原因：凭据不支持，如果 CORS 头 ‘Access-Control-Allow-Origin’ 为 ‘*’）一般情况下 </p>
<ul>
<li><p>请求的url是aspx页面，则需要在aspx页面中添加代码：Response.AddHeader(“Access-Control-Allow-Origin”, “*”);</p>
</li>
<li><p>请求的url是PHP页面，则需要在PHP页面中添加代码：header(“Access-Control-Allow-Origin: *”);</p>
</li>
<li><p>请求的url是静态的html页面，则需要在页面中添加meta标签代码。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac上安装Cocoapods基础和一些踩坑记录</title>
    <url>/2019/12/06/technology20191206020145/</url>
    <content><![CDATA[<h5 id="Cocoapods-为Xcode中的项目添加依赖库，我其实觉得这个真不好用，用过Android-Studio本身自带，链接第三方依赖库比这个方便。废话不多说，直接上步骤。"><a href="#Cocoapods-为Xcode中的项目添加依赖库，我其实觉得这个真不好用，用过Android-Studio本身自带，链接第三方依赖库比这个方便。废话不多说，直接上步骤。" class="headerlink" title="Cocoapods 为Xcode中的项目添加依赖库，我其实觉得这个真不好用，用过Android Studio本身自带，链接第三方依赖库比这个方便。废话不多说，直接上步骤。"></a>Cocoapods 为Xcode中的项目添加依赖库，我其实觉得这个真不好用，用过Android Studio本身自带，链接第三方依赖库比这个方便。废话不多说，直接上步骤。</h5><h4 id="Cocoapods安装步骤"><a href="#Cocoapods安装步骤" class="headerlink" title="Cocoapods安装步骤"></a>Cocoapods安装步骤</h4><p><strong>一、更新Ruby环境</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gem update --system</span><br></pre></td></tr></table></figure>
<p><strong>二、换Ruby镜像</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gem sources -l  #查看当前镜像</span><br><span class="line">gem sources --remove https:&#x2F;&#x2F;rubygems.org&#x2F; #移除当前的镜像 淘宝的Ruby镜像也不更新</span><br><span class="line">gem sources -a https:&#x2F;&#x2F;gems.ruby-china.com  #换成这个</span><br></pre></td></tr></table></figure>
<p><strong>三、安装CocoaPods</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure>

<p>上面如果没有权限需要输入 <code>sudo gem install -n /usr/local/bin cocoapods</code> ，横下以下是各种折腾。</p>
<hr>
<p><font color="#4183C4"> 如果出现: </font>  MacBook-Air ~ % sudo gem install cocoapods<br>ERROR:  Could not find a valid gem ‘cocoapods’ (&gt;= 0), here is why:<br>          Unable to download data from <a href="https://rubygems.org/" target="_blank" rel="noopener">https://rubygems.org/</a> - timed out (<a href="https://rubygems.org/specs.4.8.gz" target="_blank" rel="noopener">https://rubygems.org/specs.4.8.gz</a>)</p>
<p>请检查 <code>gem sources -l</code>是否是 <a href="https://gems.ruby-china.com" target="_blank" rel="noopener">https://gems.ruby-china.com</a></p>
<p><font color="red">如果再出现各种奇葩问题，这儿可以卸载 gem 安装的所有东西然后再重新安装。</font></p>
<p>可以在终端输入 <code>sudo rm -rf /usr/local/bin/pod</code>  然后在查看<code>gem list</code>看到中间部分以cocoapods开头的列表  </p>
<p>cocoapods (1.9.2)<br>cocoapods-core (1.9.2)<br>cocoapods-deintegrate (1.0.4)<br>cocoapods-downloader (1.3.0)<br>cocoapods-plugins (1.0.0)<br>cocoapods-search (1.0.0)<br>cocoapods-stats (1.1.0)<br>cocoapods-trunk (1.5.0)<br>cocoapods-try (1.2.0)</p>
<p>这儿以第一个为例挨个卸载，sudo gem uninstall cocoapods -v 1.9.2  sudo gem uninstall cocoapods-core -v 1.9.2 后面的类似。删除过后再执行重新<code>sudo gem install cocoapods</code></p>
<p><font color="red">上面的完成过后再次执行下面的命令，关键的时候来了，呵呵呵…. (网上说 这个过程是漫长的，要有耐心)，这哪是慢，根本不行好么，坑死人了。</font></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pod setup</span><br></pre></td></tr></table></figure>

<p>看别人说pod setup 过后会出现 Setting up CocoaPods master repo这个，这个至少会去下载，我特么直接出现Setup completed 这个，无论怎么网上的找方法试过了都没折，自己的笔记本上再 <font color="#4183C4">活动监视器</font> 搜索git至少还在 10k/s再走，然后之前回家等了两三个小时 然后居然直接中断了，什么垃圾东西呀，这是人干的事么。</p>
<p>我公司这一台什么都没有下载直接Setup completed 说完成了，clone repo到本地成功，压根就没有下载下来。然后我在电脑上执行 <code>pod search AFNetworking</code></p>
<p>是100%的出现 <font color="#4183C4">[!] Unable to find a pod with name, author, summary, or description matching AFNetworking</font></p>
<p>关于出现这个的帖子<a href="https://www.cnblogs.com/huaida/p/12701080.html" target="_blank" rel="noopener">https://www.cnblogs.com/huaida/p/12701080.html</a>,大部分说是因为缓存,然后删除~/Library/Caches/CocoaPods/search_index.json,这根本没用好么，然后试了一下这个</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pod repo remove master</span><br><span class="line">cd ~&#x2F;.cocoapods&#x2F;repos</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;CocoaPods&#x2F;Specs.git master</span><br><span class="line">rm ~&#x2F;Library&#x2F;Caches&#x2F;CocoaPods&#x2F;search_index.json</span><br><span class="line">pod search afnetworking</span><br></pre></td></tr></table></figure>

<p>这个执行到从git仓库拉一样的慢成”苟“我去这个也太受不了了，恶心人么，这不是。</p>
<p>冷静一下 <code>pod setup</code>本身是把这个 <a href="https://github.com/CocoaPods/Specs.git" target="_blank" rel="noopener">https://github.com/CocoaPods/Specs.git</a> 地址中的文件clone下来，这儿慢的原因就是从git上下载，后来了解到可以直接把这个仓库克隆到国内的码云<a href="https://gitee.com" target="_blank" rel="noopener">https://gitee.com</a> ,这样子再从码云上clone下来。</p>
<p>然后这个是从git导入到码云上的地址: <a href="https://gitee.com/Kziwws/Specs.git" target="_blank" rel="noopener">https://gitee.com/Kziwws/Specs.git</a> ，然后把这句<code>git clone https://github.com/CocoaPods/Specs.git master</code> 换成 <code>git clone https://gitee.com/Kziwws/Specs.git</code>，这个clone 到 ~/.cocoapods/repos 这个目录。这下速度从三四个小时变成七八分钟就完成了。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@MacBook-Pro ~ % cd ~&#x2F;.cocoapods&#x2F;</span><br><span class="line">@MacBook-Pro .cocoapods % du -sh *</span><br><span class="line">1.6G	repos #这大概1.81G呢 你得稍微等一下</span><br></pre></td></tr></table></figure>



<p>其实上面 <code>pod setup</code>和 <code>git clone https://gitee.com/Kziwws/Specs.git ~/.cocoapods/repos/master</code>等效的。如果上面不行用这个句命令。</p>
<hr>
<p>经过上面一些列的折腾基本上一会下载完成了，然后你再输入 <code>pod search AFNetworking</code>,如果出现 Creating search index for spec repo ‘master’.. Done! 一直等待。你就安静等一会儿。 </p>
<p><font color="#4183C4">如果出现:</font> </p>
<p>[!] CDN: trunk URL couldn’t be downloaded: <a href="https://cdn.cocoapods.org/all_pods_versions_8_9_b.txt" target="_blank" rel="noopener">https://cdn.cocoapods.org/all_pods_versions_8_9_b.txt</a> Response: Timeout was reached</p>
<p>或者</p>
<p>[!] CDN: trunk Repo update failed - 3 error(s):</p>
<p>CDN: trunk URL couldn’t be downloaded: <a href="https://cdn.cocoapods.org/Specs/a/e/1/XJNetworking/1.0.0/XJNetworking.podspec.json" target="_blank" rel="noopener">https://cdn.cocoapods.org/Specs/a/e/1/XJNetworking/1.0.0/XJNetworking.podspec.json</a> Response: Timeout was reached</p>
<p>CDN: trunk URL couldn’t be downloaded: <a href="https://cdn.cocoapods.org/Specs/a/e/1/XJNetworking/1.0.1/XJNetworking.podspec.json" target="_blank" rel="noopener">https://cdn.cocoapods.org/Specs/a/e/1/XJNetworking/1.0.1/XJNetworking.podspec.json</a> Response: Timeout was reached</p>
<p>CDN: trunk URL couldn’t be downloaded: <a href="https://cdn.cocoapods.org/Specs/a/e/1/XJNetworking/1.0.2/XJNetworking.podspec.json" target="_blank" rel="noopener">https://cdn.cocoapods.org/Specs/a/e/1/XJNetworking/1.0.2/XJNetworking.podspec.json</a> Response: Timeout was reached</p>
<p><font color="red">解决:CDN: trunk URL couldn’t be downloaded </font>,参考一下这篇帖子<a href="https://blog.csdn.net/miaopf123/article/details/104406595" target="_blank" rel="noopener">https://blog.csdn.net/miaopf123/article/details/104406595</a>,然后再 pod search AFNetworking 会出现：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-&gt; AFNetworking (4.0.1)</span><br><span class="line">   A delightful networking framework for Apple platforms.</span><br><span class="line">   pod &#39;AFNetworking&#39;, &#39;~&gt; 4.0.1&#39;</span><br><span class="line">   - Homepage: https:&#x2F;&#x2F;github.com&#x2F;AFNetworking&#x2F;AFNetworking</span><br><span class="line">   - Source:   https:&#x2F;&#x2F;github.com&#x2F;AFNetworking&#x2F;AFNetworking.git</span><br><span class="line">   - Versions: 4.0.1, 4.0.0, 3.2.1, 3.2.0, 3.1.0, 3.0.4, 3.0.3, 3.0.2, 3.0.1,</span><br><span class="line">   3.0.0, 3.0.0-beta.3, 3.0.0-beta.2, 3.0.0-beta.1, 2.7.0, 2.6.3, 2.6.2, 2.6.1,</span><br><span class="line">   2.6.0, 2.5.4, 2.5.3, 2.5.2, 2.5.1, 2.5.0, 2.4.1, 2.4.0, 2.3.1, 2.3.0, 2.2.4,</span><br><span class="line">   2.2.3, 2.2.2, 2.2.1, 2.2.0, 2.1.0, 2.0.3, 2.0.2, 2.0.1, 2.0.0, 2.0.0-RC3,</span><br><span class="line">   2.0.0-RC2, 2.0.0-RC1, 1.3.4, 1.3.3, 1.3.2, 1.3.1, 1.3.0, 1.2.1, 1.2.0, 1.1.0,</span><br><span class="line">   1.0.1, 1.0, 1.0RC3, 1.0RC2, 1.0RC1, 0.10.1, 0.10.0, 0.9.2, 0.9.1, 0.9.0,</span><br><span class="line">   0.7.0, 0.5.1 [master repo] ～</span><br></pre></td></tr></table></figure>

<p>这儿在多说一点，如果经过上面的折腾还是没有成功，你直接<a href="https://gitee.com/Kziwws/Specs.git" target="_blank" rel="noopener">https://gitee.com/Kziwws/Specs.git</a> 下载这个到桌面然后zip大概 367M，也相对挺快的。</p>
<p><img src="https://s1.ax1x.com/2020/06/19/Nu1kSU.png" alt=""></p>
<p>把右边的标记1～8的文件拷贝到左边的目录里，然后右边标记的零的如果直接拷贝不过来的，直接用记事本挨个打开把内容拷贝到右边来的文件相应的里面来。然后执行 <code>pod repo remove trunk</code>，基本就可以使用了。</p>
<hr>
<p><strong>四、CocoaPods基础使用</strong></p>
<p>  一、找到项目目录 </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;Users&#x2F;wenshuang&#x2F;Desktop&#x2F;testPodDemo</span><br><span class="line">touch  Podfile   #项目里会出现Podfile文件</span><br><span class="line">vim pod file     #开始打开Podfile文件</span><br></pre></td></tr></table></figure>

<p> 二、输入i 开始编辑，输入所需要到的第三方库,如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">platform :ios,‘8.0’</span><br><span class="line">target‘testPodDemo’do</span><br><span class="line">pod‘AFNetworking’,‘~&gt; 3.0.4’</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>三、在按 esc 然后输入 : 然后再输入wq 然后回车，保存。</p>
<p>四、在终端里输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure>

<p>然后等一会就会出现</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MacBook-Pro testPodDemo % pod install</span><br><span class="line">Analyzing dependencies</span><br><span class="line">Downloading dependencies</span><br><span class="line">Installing AFNetworking (3.0.4)</span><br><span class="line">Generating Pods project</span><br><span class="line">Integrating client project</span><br><span class="line"></span><br><span class="line">[!] Please close any current Xcode sessions and use &#96;testPodDemo.xcworkspace&#96; for this project from now on.</span><br><span class="line"></span><br><span class="line">Pod installation complete! There is 1 dependency from the Podfile and 1 total pod installed.</span><br></pre></td></tr></table></figure>

<p>然后再用Xcode重新打开 testPodDemo.xcworkspace 这个文件就可以了。</p>
]]></content>
      <categories>
        <category>cocoapods</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocoapods</tag>
      </tags>
  </entry>
  <entry>
    <title>CocosCreator运行自带的模拟器报spawn python ENOENT</title>
    <url>/2020/11/05/technology20201105160509/</url>
    <content><![CDATA[<h5 id="CocosCreator在运行时浏览器里正常，在自带的模拟器上会报错，错误如下："><a href="#CocosCreator在运行时浏览器里正常，在自带的模拟器上会报错，错误如下：" class="headerlink" title="CocosCreator在运行时浏览器里正常，在自带的模拟器上会报错，错误如下："></a>CocosCreator在运行时浏览器里正常，在自带的模拟器上会报错，错误如下：</h5><p><font color="red">Error: spawn python ENOENT </font><br>at Process.onexit (internal/child_process.js:267:19)<br>at onErrorNT (internal/child_process.js:469:16)<br>at processTicksAndRejections (internal/process/task_queues.js:84:21)<br>errno: ‘ENOENT’,<br>code: ‘ENOENT’,<br>/syscall: ‘spawn python’,<br> path: ‘python’,<br> spawnargs: [<br> ‘-c’,<br> &lt;Buffer 69 6d 70 6f 72 74 20 6c 6f 63 61 6c 65 0a 0a 73 79 73 5f 6c  61 6e 67 2c 20 65 6e 63 6f 64 69 6e 67 20 3d 20 6c 6f 63 61 6c 65 2e 67  65 74 64 65 66 61 … 28 more bytes&gt;<br> ]</p>
<p>看上面提示好像是python版本的原因，之前可能是下载过python升级过然后在python3找不到。</p>
<p><font color="green"><strong><em>解决办法：</em></strong></font></p>
<p><strong>一、查看python的路径</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">which python</span><br></pre></td></tr></table></figure>

<p>如果没有安装，直接下载安装一个python2.7的pkg安装包， <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.python.org%2Fftp%2Fpython%2F2.7.18%2Fpython-2.7.18-macosx10.9.pkg" target="_blank" rel="noopener">下载地址</a>，然后安装过后，在重新运行。</p>
<p><strong>二、如果已经安装</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line">export PYTHON_PATH = 上面第一步得到python路径地址，例如：/usr/local/bin/python</span><br><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>

<p>然后重启mac 就是重启过后找到python</p>
<p><strong>三、如果存在python3然后找不到python可以建立软连接</strong></p>
<p>删除原有的软链接</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rm -rf /usr/bin/python</span><br></pre></td></tr></table></figure>
<p>根据查询的python3位置，创建自己的软链接，</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">which python3</span><br></pre></td></tr></table></figure>
<p>如上诉查询出来的是python3的位置的安装位置是: /usr/local/python3/bin/python3</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ln -s /usr/local/python3/bin/python3 /usr/bin/python</span><br></pre></td></tr></table></figure>



<h5 id="CocosDashboard不能打开，点击打开闪退："><a href="#CocosDashboard不能打开，点击打开闪退：" class="headerlink" title="CocosDashboard不能打开，点击打开闪退："></a>CocosDashboard不能打开，点击打开闪退：</h5><p><font color="green"><strong><em>解决办法：</em></strong></font></p>
<p>找到你的Mac电脑目录: 这儿比如说你的电脑名字叫mac就是以下目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/Users/mac/.CocosCreator </span><br><span class="line">/Users/mac/.Cocos</span><br></pre></td></tr></table></figure>

<p>这儿如果你进入了过后不显示 .开头的了目录文件可按住同时按住 <code>shift + command + .</code>然后就会显示.CocosCreator 和 .Cocos，然后删除掉文件夹重新打开CocosDashboard。</p>
<p>这个是项目资源出错问题，一般如果找到出错的项目，重新打开也是可以正常运行。</p>
]]></content>
      <categories>
        <category>error</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>基础正则表达式</title>
    <url>/2019/03/05/technology20190305060134/</url>
    <content><![CDATA[<p><strong>正则表达式</strong>，又称规则表达式<strong>。</strong>在代码中常简写为regex、regexp或RE，计算机科学的一个概念。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。</p>
<p>给定一个正则表达式和另一个字符串，我们可以达到如下的目的：</p>
<blockquote>
<p>给定的字符串是否符合正则表达式的过滤逻辑（“匹配”）；<br>通过正则表达式，从文本字符串中获取我们想要的特定部分（“过滤”）。</p>
</blockquote>
<h5 id="正则表达式匹配规则"><a href="#正则表达式匹配规则" class="headerlink" title="正则表达式匹配规则"></a>正则表达式匹配规则</h5><ul>
<li><a href="#ZF_install">字符</a></li>
<li><a href="#YDZF_install">预定义字符集</a>(可以写在字符集[…]中)</li>
<li><a href="#SL_install">数量词</a>(用在字符或(…)之后)</li>
<li><a href="#BJPP_install">边界匹配</a>(不消耗待匹配字符串中的字符)</li>
<li><a href="#LJFZ_install">逻辑、分组</a></li>
<li><a href="#TSGZ_install">特殊构造</a>(不作为分组)</li>
</ul>
<table>
<thead>
<tr>
<th align="center">语法</th>
<th align="left">说明</th>
<th align="center">表达式实例</th>
<th align="center">完整匹配的字符串</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="left"><a name='ZF_install'><strong><font color = red>字符</font></strong></a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">一般字符</td>
<td align="left">匹配自身</td>
<td align="center">abc</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">.</td>
<td align="left">匹配任意除换行符”\n”外的字符。在DOTALL模式中也能匹配换行符。</td>
<td align="center">a.c</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">\</td>
<td align="left">转义字符，使后一个字符改变原来的意思,如果字符串中有字符<em>需要匹配，可以使用\</em>或者字符集[*].</td>
<td align="center">a\.c   a\\c</td>
<td align="center">a\c</td>
</tr>
<tr>
<td align="center">[…]</td>
<td align="left">字符集(字符类)。对应的位置可以是字符集中任意字符。字符集中的字符可以逐个列出，也可以给出范围，如[abc]或[a-c].第一个字符如果是^则表示取反，如[^abc]表示不是abc的其他字符。所有的特殊字符在字符集中都失去其原有的特俗含义。在字符集中如果要使用]、-或^,可以在前面加上反斜杠,或把]、-放在第一个字符，把^放在非第一个字符。</td>
<td align="center">a[bcd]c</td>
<td align="center">abe ace ade</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><a name='YDZF_install'><strong><font color = red>预定义字符集</font></strong></a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">\d</td>
<td align="left">数字:[0-9]</td>
<td align="center">a\dc</td>
<td align="center">a1c</td>
</tr>
<tr>
<td align="center">\D</td>
<td align="left">非数字:[^\d]</td>
<td align="center">a\Dc</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">\s</td>
<td align="left">空白字符:[&lt;空格&gt;\t\r\n\f\v]</td>
<td align="center">a\sc</td>
<td align="center">a c</td>
</tr>
<tr>
<td align="center">\w</td>
<td align="left">单词字符:[A-Z a-Z 0-9_]</td>
<td align="center">a\wc</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">\W</td>
<td align="left">非单词字符:[^\W]</td>
<td align="center">a\Wc</td>
<td align="center">a c</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><a name='SL_install'><strong><font color = red>数量词</font></strong></a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">*</td>
<td align="left">匹配前一个字符0或无限次</td>
<td align="center">abc*</td>
<td align="center">ab abcc</td>
</tr>
<tr>
<td align="center">+</td>
<td align="left">匹配前一个字符1次或无限次</td>
<td align="center">abc+</td>
<td align="center">abc abcc</td>
</tr>
<tr>
<td align="center">?</td>
<td align="left">匹配前一个字符0次或1次</td>
<td align="center">abc?</td>
<td align="center">ab abc abbc</td>
</tr>
<tr>
<td align="center">{m}</td>
<td align="left">匹配前一个字符m次</td>
<td align="center">ab{2}c</td>
<td align="center">abbc</td>
</tr>
<tr>
<td align="center">{m,n}</td>
<td align="left">匹配前一个字符m至n次。m和n可以省略:若省略m,则匹配0至n次；若省略n则匹配m至无限次。</td>
<td align="center">ab{1,2}c</td>
<td align="center">abc abbc</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><a name='BJPP_install'><strong><font color = red>边界匹配</font></strong></a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">^</td>
<td align="left">匹配字符串开头。在多行模式中匹配每一行的开头</td>
<td align="center">^abc</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">$</td>
<td align="left">匹配字符串末尾。在多行模式中匹配每一行的末尾</td>
<td align="center">abc$</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">\A</td>
<td align="left">仅匹配字符串开头。</td>
<td align="center">\Aabc</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">\Z</td>
<td align="left">仅匹配字符串末尾。</td>
<td align="center">abc\Z</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center">\b</td>
<td align="left">匹配字\w和\W之间。</td>
<td align="center">a\b!bc</td>
<td align="center">a!bc</td>
</tr>
<tr>
<td align="center">\B</td>
<td align="left">[^\b]</td>
<td align="center">a\Bbc</td>
<td align="center">abc</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><a name='LJFZ_install'><strong><font color = red>逻辑分组</font></strong></a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">|</td>
<td align="left">|代表左右表达式任意匹配一个。它总是先尝试匹配左边的表达式，一旦成功匹配则跳过匹配右边的表达式。如果|没有被包括在()中,则它的范围是整个正则表达式。</td>
<td align="center">abc|def</td>
<td align="center">abc def</td>
</tr>
<tr>
<td align="center">(…)</td>
<td align="left">被括起来的表达式将作为分组，从表达式左边开始每遇到一个分组的左括号’(‘,编号+1.另外分组表达式作为一个整体,可以后接数量词。表达式中的|仅在该组中有效。</td>
<td align="center">(abc){2} a{123|456)c</td>
<td align="center">abcabc a456c</td>
</tr>
<tr>
<td align="center">(?P&lt;name&gt;…)</td>
<td align="left">分组除了原来的编号另外再指定一个额外的别名。</td>
<td align="center">(?P&lt;id&gt;abc){2}</td>
<td align="center">abcabc</td>
</tr>
<tr>
<td align="center">\&lt;number&gt;</td>
<td align="left">引用编号为&lt;number&gt;的分组匹配到的字符串。</td>
<td align="center">(\d)abc\1</td>
<td align="center">1abc1 5abc5</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><a name='TSGZ_install'><strong><font color = red>特殊构造</font></strong></a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">(?…)</td>
<td align="left">(…)的部分组版本，用于使用”|”或后接数量词。</td>
<td align="center">(?:abc){2}</td>
<td align="center">abcabc</td>
</tr>
<tr>
<td align="center">(?iLmsux)</td>
<td align="left">iLmsux的每个字符代表一个匹配模式，只能用在正则表达式的开头，可选多个。匹配模式将在下文介绍。</td>
<td align="center">(?i)abc</td>
<td align="center">Abc</td>
</tr>
<tr>
<td align="center">(?#…)</td>
<td align="left">#后的内容将作为注释被忽略。</td>
<td align="center">abc(?#comment)123</td>
<td align="center">abc123</td>
</tr>
<tr>
<td align="center">(?=…)</td>
<td align="left">之后的字符串内容需要匹配表达式。才能成功匹配。不消耗字符串内容。</td>
<td align="center">a(?=\d)后面是数字的a</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">(?!…)</td>
<td align="left">之后的字符串内容需要不匹配表达式。才能成功匹配。不消耗字符串内容。</td>
<td align="center">a(?!\d) 后面不是数字的a</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">(?&lt;=…)</td>
<td align="left">之前的字符串内容需要匹配表达式。才能成功匹配。不消耗字符串内容。</td>
<td align="center">a(?&lt;=\d)a 前面是数字的a</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">(?&lt;!…)</td>
<td align="left">之前的字符串内容需要不匹配表达式。才能成功匹配。不消耗字符串内容。</td>
<td align="center">a(?&lt;!\d)a 前面不是数字的a</td>
<td align="center"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center"><strong>表达式</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">[abc]</td>
<td>字符集。匹配集合中所含的任一字符。</td>
</tr>
<tr>
<td align="center">[^abc]</td>
<td>否定字符集。匹配任何不在集合中的字符。</td>
</tr>
<tr>
<td align="center">[a-z]</td>
<td>字符范围。匹配指定范围内的任意字符。</td>
</tr>
<tr>
<td align="center">.</td>
<td>匹配除换行符以外的任何单个字符。</td>
</tr>
<tr>
<td align="center">\</td>
<td>转义字符。</td>
</tr>
<tr>
<td align="center">\w</td>
<td>匹配任何字母数字，包括下划线（等价于<code>[A-Za-z0-9_]</code>）。</td>
</tr>
<tr>
<td align="center">\W</td>
<td>匹配任何非字母数字（等价于<code>[^A-Za-z0-9_]</code>）。</td>
</tr>
<tr>
<td align="center">\d</td>
<td>数字。匹配任何数字。</td>
</tr>
<tr>
<td align="center">\D</td>
<td>非数字。匹配任何非数字字符。</td>
</tr>
<tr>
<td align="center">\s</td>
<td>空白。匹配任何空白字符，包括空格、制表符等。</td>
</tr>
<tr>
<td align="center">\S</td>
<td>非空白。匹配任何非空白字符。</td>
</tr>
<tr>
<td align="center">(expression)</td>
<td>分组。匹配括号里的整个表达式。</td>
</tr>
<tr>
<td align="center">(?:expression)</td>
<td>非捕获分组。匹配括号里的整个字符串但不获取匹配结果，拿不到分组引用。</td>
</tr>
<tr>
<td align="center">\num</td>
<td>对前面所匹配分组的引用。比如<code>(\d)\1</code>可以匹配两个相同的数字，<code>(Code)(Sheep)\1\2</code>则可以匹配<code>CodeSheepCodeSheep</code>。</td>
</tr>
<tr>
<td align="center">^</td>
<td>匹配字符串或行开头。</td>
</tr>
<tr>
<td align="center">$</td>
<td>匹配字符串或行结尾。</td>
</tr>
<tr>
<td align="center">\b</td>
<td>匹配单词边界。比如Sheep\b可以匹配CodeSheep末尾的Sheep，不能匹配CodeSheepCode中的Sheep</td>
</tr>
<tr>
<td align="center">\B</td>
<td>匹配非单词边界。比如Code\B可以匹配HelloCodeSheep中的Code，不能匹配HelloCode中的Code。</td>
</tr>
<tr>
<td align="center">?</td>
<td>匹配前面的表达式0个或1个。即表示可选项。</td>
</tr>
<tr>
<td align="center">+</td>
<td>匹配前面的表达式至少1个。</td>
</tr>
<tr>
<td align="center">*</td>
<td>匹配前面的表达式0个或多个。</td>
</tr>
<tr>
<td align="center">|</td>
<td>或运算符。并集，可以匹配符号前后的表达式。</td>
</tr>
<tr>
<td align="center">{m}</td>
<td>匹配前面的表达式m个。</td>
</tr>
<tr>
<td align="center">{m,}</td>
<td>匹配前面的表达式最少m个。</td>
</tr>
<tr>
<td align="center">{m,n}</td>
<td>匹配前面的表达式最少m个，最多n个。</td>
</tr>
<tr>
<td align="center">(?=)</td>
<td>正向预查。比如Code(?=Sheep)能匹配CodeSheep中的Code，但不能匹配CodePig中的Code。</td>
</tr>
<tr>
<td align="center">(?!)</td>
<td>正向否定预查。比如`Code(?!Sheep)不能匹配CodeSheep中的Code，但能匹配CodePig中的Code。</td>
</tr>
<tr>
<td align="center">(?&lt;=)</td>
<td>反向预查。比如(?&lt;=Code)Sheep能匹配CodeSheep中的Sheep，但不能匹配`ReadSheep中的Sheep。</td>
</tr>
<tr>
<td align="center">(?&lt;!)</td>
<td>反向否定预查。比如(?&lt;!Code)Sheep不能匹配CodeSheep中的Sheep，但能匹配`ReadSheep中的Sheep。</td>
</tr>
<tr>
<td align="center">/…/i</td>
<td>忽略大小写。</td>
</tr>
<tr>
<td align="center">/…/g</td>
<td>全局匹配。</td>
</tr>
<tr>
<td align="center">/…/m</td>
<td>多行修饰符。用于多行匹配。</td>
</tr>
</tbody></table>
<ul>
<li><strong>数字校验</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>描述</strong></th>
<th><strong>正则表达式</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>数字</td>
<td><code>^[0-9]*$</code></td>
<td></td>
</tr>
<tr>
<td>n位数字</td>
<td><code>^\d{n}$</code></td>
<td></td>
</tr>
<tr>
<td>至少n位数字</td>
<td><code>^\d{n,}$</code></td>
<td></td>
</tr>
<tr>
<td>m~n位数字</td>
<td><code>^\d{m,n}$</code></td>
<td></td>
</tr>
<tr>
<td>整数</td>
<td><code>^(-?[1-9]\d*)$</code></td>
<td>非0开头，包括正整数和负整数</td>
</tr>
<tr>
<td>正整数</td>
<td><code>^[1-9]\d*$</code></td>
<td></td>
</tr>
<tr>
<td>负整数</td>
<td><code>^-[1-9]\d*$</code></td>
<td></td>
</tr>
<tr>
<td>非负整数</td>
<td>`^(([1-9]\d*)</td>
<td>0)$`</td>
</tr>
<tr>
<td>非正整数</td>
<td>`^((-[1-9]\d*)</td>
<td>0)$`</td>
</tr>
<tr>
<td>浮点数</td>
<td>`^-?(?:[1-9]\d<em>.\d</em></td>
<td>0.\d<em>[1-9]\d</em></td>
</tr>
<tr>
<td>正浮点数</td>
<td>`^(?:[1-9]\d<em>.\d</em></td>
<td>0.\d<em>[1-9]\d</em>)$`</td>
</tr>
<tr>
<td>负浮点数</td>
<td>`^-(?:[1-9]\d<em>.\d</em></td>
<td>0.\d<em>[1-9]\d</em>)$`</td>
</tr>
<tr>
<td>非正浮点数</td>
<td>`^(?:-(?:[1-9]\d*.\d+</td>
<td>0.\d<em>[1-9]\d</em>)</td>
</tr>
<tr>
<td>非负浮点数</td>
<td>`^(?:[1-9]\d*.\d+</td>
<td>0.\d+</td>
</tr>
<tr>
<td>仅一位小数</td>
<td>`^-?(?:0</td>
<td>[1-9][0-9]*).[0-9]{1}$`</td>
</tr>
<tr>
<td>最少一位小数</td>
<td>`^-?(?:0</td>
<td>[1-9][0-9]*).[0-9]{1,}$`</td>
</tr>
<tr>
<td>最多两位小数</td>
<td>`^-?(?:0</td>
<td>[1-9][0-9]*).[0-9]{1,2}$`</td>
</tr>
<tr>
<td>连续重复的数字</td>
<td><code>^(\d)\1+$</code></td>
<td>例如：<code>111</code>，<code>222</code></td>
</tr>
</tbody></table>
<hr>
<ul>
<li><strong>字符校验</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>描述</strong></th>
<th><strong>正则表达式</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>中文</td>
<td><code>^[\u4E00-\u9FA5]+$</code></td>
<td></td>
</tr>
<tr>
<td>全角字符</td>
<td><code>^[\uFF00-\uFFFF]+$</code></td>
<td></td>
</tr>
<tr>
<td>半角字符</td>
<td><code>^[\u0000-\u00FF]+$</code></td>
<td></td>
</tr>
<tr>
<td>英文字符串（大写）</td>
<td><code>^[A-Z]+$</code></td>
<td></td>
</tr>
<tr>
<td>英文字符串（小写）</td>
<td><code>^[a-z]+$</code></td>
<td></td>
</tr>
<tr>
<td>英文字符串（不区分大小写）</td>
<td><code>^[A-Za-z]+$</code></td>
<td></td>
</tr>
<tr>
<td>中文和数字</td>
<td>`^(?:[\u4E00-\u9FA5]{0,}</td>
<td>\d)+$`</td>
</tr>
<tr>
<td>英文和数字</td>
<td><code>^[A-Za-z0-9]+$</code></td>
<td></td>
</tr>
<tr>
<td>数字、英文字母或者下划线组成的字符串</td>
<td><code>^\w+$</code></td>
<td></td>
</tr>
<tr>
<td>中文、英文、数字包括下划线</td>
<td><code>^[\u4E00-\u9FA5\w]+$</code></td>
<td></td>
</tr>
<tr>
<td>不含字母的字符串</td>
<td><code>^[^A-Za-z]*$</code></td>
<td></td>
</tr>
<tr>
<td>连续重复的字符串</td>
<td><code>^(.)\1+$</code></td>
<td>例如：<code>aa</code>，<code>bb</code></td>
</tr>
<tr>
<td>长度为n的字符串</td>
<td><code>^.{n}$</code></td>
<td></td>
</tr>
<tr>
<td>ASCII</td>
<td><code>^[ -~]$</code></td>
<td></td>
</tr>
</tbody></table>
<hr>
<ul>
<li><strong>日期和时间校验</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>描述</strong></th>
<th><strong>正则表达式</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>日期</td>
<td>`^\d{1,4}-(?:1[0-2]</td>
<td>0?[1-9])-(?:0?[1-9]</td>
</tr>
<tr>
<td>日期</td>
<td>`^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]</td>
<td>1[0-2])-(?:0[1-9]</td>
</tr>
<tr>
<td>时间</td>
<td>`^(?:1[0-2]</td>
<td>0?[1-9]):[0-5]\d:[0-5]\d$`</td>
</tr>
<tr>
<td>时间</td>
<td>`^(?:[01]\d</td>
<td>2[0-3]):[0-5]\d:[0-5]\d$`</td>
</tr>
<tr>
<td>日期+时间</td>
<td>`^(\d{1,4}-(?:1[0-2]</td>
<td>0?[1-9])-(?:0?[1-9]</td>
</tr>
</tbody></table>
<hr>
<ul>
<li><strong>日常生活相关</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>描述</strong></th>
<th><strong>正则表达式</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>中文名</td>
<td><code>^[\u4E00-\u9FA5·]{2,16}$</code></td>
<td></td>
</tr>
<tr>
<td>英文名</td>
<td><code>^[a-zA-Z][a-zA-Z\s]{0,20}[a-zA-Z]$</code></td>
<td></td>
</tr>
<tr>
<td>车牌号</td>
<td><code>^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-HJ-NP-Z][A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]$</code></td>
<td>不含新能源</td>
</tr>
<tr>
<td>车牌号</td>
<td>`^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领]<a href="?:(?:[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]">A-HJ-NP-Z</a></td>
<td>(?:(?:\d{5}[A-HJK])</td>
</tr>
<tr>
<td>火车车次</td>
<td><code>^[GCDZTSPKXLY1-9]\d{1,4}$</code></td>
<td>例如：<code>G1234</code></td>
</tr>
<tr>
<td>手机号</td>
<td>`^(?:(?:+</td>
<td>00)86)?1[3-9]\d{9}$`</td>
</tr>
<tr>
<td>手机号</td>
<td>`^(?:(?:+</td>
<td>00)86)?1(?:(?:3[\d])</td>
</tr>
<tr>
<td>固话号码</td>
<td>`^(?:(?:\d{3}-)?\d{8}</td>
<td>^(?:\d{4}-)?\d{7,8})(?:-\d+)?$`</td>
</tr>
<tr>
<td>手机IMEI码</td>
<td><code>^\d{15,17}$</code></td>
<td>一般是15位</td>
</tr>
<tr>
<td>邮编</td>
<td>`^(?:0[1-7]</td>
<td>1[0-356]</td>
</tr>
<tr>
<td>统一社会信用代码</td>
<td><code>^[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}$</code></td>
<td></td>
</tr>
<tr>
<td>身份证号码(1代)</td>
<td>`^[1-9]\d{7}(?:0\d</td>
<td>10</td>
</tr>
<tr>
<td>身份证号码(2代)</td>
<td>`^[1-9]\d{5}(?:18</td>
<td>19</td>
</tr>
<tr>
<td>QQ号</td>
<td><code>^[1-9][0-9]{4,}$</code></td>
<td>一般是5到10位</td>
</tr>
<tr>
<td>微信号</td>
<td><code>^[a-zA-Z][-_a-zA-Z0-9]{5,19}$</code></td>
<td>一般6~20位，字母开头，可包含字母、数字、-、_，不含特殊字符</td>
</tr>
<tr>
<td>股票代码</td>
<td>`^(s[hz]</td>
<td>S[HZ])(000[\d]{3}</td>
</tr>
<tr>
<td>银行卡卡号</td>
<td>`^[1-9]{1}(?:\d{15}</td>
<td>\d{18})$`</td>
</tr>
</tbody></table>
<hr>
<ul>
<li><strong>互联网相关</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>描述</strong></th>
<th><strong>正则表达式</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>域名</td>
<td><code>^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(?:\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$</code></td>
<td>例如：<code>r2coding.com</code></td>
</tr>
<tr>
<td>网址</td>
<td><code>^(?:https?:\/\/)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(?:\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$</code></td>
<td>例如：<code>https://www.r2coding.com/</code></td>
</tr>
<tr>
<td>带端口号的网址(或IP)</td>
<td><code>^(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+:\d{1,5}\/?$</code></td>
<td>例如：<code>http://127.0.0.1:8888/</code></td>
</tr>
<tr>
<td>URL</td>
<td><code>^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()!@:%_\+.~#?&amp;\/\/=]*)$</code></td>
<td>例如：<code>https://www.r2coding.com/#/README?id=1</code></td>
</tr>
<tr>
<td>邮箱email</td>
<td><code>^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(?:\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$</code></td>
<td>支持中文，例如：<code>codesheep@cs.com</code></td>
</tr>
<tr>
<td>用户名</td>
<td><code>^[a-zA-Z0-9_-]{4,20}$</code></td>
<td>4到20位</td>
</tr>
<tr>
<td>弱密码</td>
<td><code>^[\w]{6,16}$</code></td>
<td>6~16位，包含大小写字母和数字的组合</td>
</tr>
<tr>
<td>强密码</td>
<td><code>^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@\.#$%^&amp;*? ]).*$</code></td>
<td>至少6位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符</td>
</tr>
<tr>
<td>端口号</td>
<td>`^(?:[0-9]</td>
<td>[1-9][0-9]{1,3}</td>
</tr>
<tr>
<td>IPv4地址</td>
<td>`^(?:(?:\d</td>
<td>[1-9]\d</td>
</tr>
<tr>
<td>IPv4地址+端口</td>
<td>`^(?:(?:\d</td>
<td>[1-9]\d</td>
</tr>
<tr>
<td>IPv6地址</td>
<td>`^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}</td>
<td>([0-9a-fA-F]{1,4}:){1,7}:</td>
</tr>
<tr>
<td>IPv6地址+端口</td>
<td>`^[(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}</td>
<td>([0-9a-fA-F]{1,4}:){1,7}:</td>
</tr>
<tr>
<td>子网掩码</td>
<td>`^(?:254</td>
<td>252</td>
</tr>
<tr>
<td>MAC地址</td>
<td>`^(?:(?:[a-f0-9A-F]{2}:){5}</td>
<td>(?:[a-f0-9A-F]{2}-){5})[a-f0-9A-F]{2}$`</td>
</tr>
<tr>
<td>Version版本号</td>
<td><code>^\d+(?:\.\d+){2}$</code></td>
<td>例如：<code>12.1.1</code></td>
</tr>
<tr>
<td>图片后缀</td>
<td>`.(gif</td>
<td>png</td>
</tr>
<tr>
<td>视频后缀</td>
<td>`.(swf</td>
<td>avi</td>
</tr>
<tr>
<td>图片链接</td>
<td>`(?:https?://)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(?:.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+.+.(gif</td>
<td>png</td>
</tr>
<tr>
<td>视频链接</td>
<td>`(?:https?://)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(?:.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+.+.(swf</td>
<td>avi</td>
</tr>
<tr>
<td>迅雷链接</td>
<td><code>thunderx?:\/\/[a-zA-Z\d]+=</code></td>
<td></td>
</tr>
<tr>
<td>ed2k链接</td>
<td><code>ed2k:\/\/|file|.+|\/</code></td>
<td></td>
</tr>
<tr>
<td>磁力链接</td>
<td><code>magnet:\?xt=urn:btih:[0-9a-fA-F]{40,}.*</code></td>
<td></td>
</tr>
</tbody></table>
<hr>
<ul>
<li><strong>其他</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>描述</strong></th>
<th><strong>正则表达式</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>MD5格式</td>
<td>`^(?:[a-f\d]{32}</td>
<td>[A-F\d]{32})$`</td>
</tr>
<tr>
<td>BASE64格式</td>
<td><code>^\s*data:(?:[a-z]+\/[a-z0-9-+.]+(?:;[a-z-]+=[a-z0-9-]+)?)?(?:;base64)?,([a-z0-9!$&amp;&#39;,()*+;=\-._~:@/?%\s]*?)\s*$</code></td>
<td>例如：<code>data:image/jpeg;base64,xxxx==</code></td>
</tr>
<tr>
<td>UUID</td>
<td><code>^[a-f\d]{4}(?:[a-f\d]{4}-){4}[a-f\d]{12}$</code></td>
<td>例如：<code>94f9d45a-71b0-4b3c-b69d-20c4bc9c8fdd</code></td>
</tr>
<tr>
<td>16进制</td>
<td><code>^[A-Fa-f0-9]+$</code></td>
<td>例如：<code>FFFFFF</code></td>
</tr>
<tr>
<td>16进制颜色</td>
<td>`^#?([0-9a-fA-F]{3}</td>
<td>[0-9a-fA-F]{6})$`</td>
</tr>
<tr>
<td>SQL语句</td>
<td>`^(?:select</td>
<td>drop</td>
</tr>
<tr>
<td>Java包名</td>
<td><code>^(?:[a-zA-Z_]\w*)+(?:[.][a-zA-Z_]\w*)+$</code></td>
<td>例如：<code>com.r2coding.controller</code></td>
</tr>
<tr>
<td>文件扩展名</td>
<td>`.(?:doc</td>
<td>pdf</td>
</tr>
<tr>
<td>Windows文件路径</td>
<td><code>^[a-zA-Z]:(?:\\[\w\u4E00-\u9FA5\s]+)+[.\w\u4E00-\u9FA5\s]+$</code></td>
<td>例如：<code>C:\Users\Administrator\Desktop\a.txt</code></td>
</tr>
<tr>
<td>Windows文件夹路径</td>
<td><code>^[a-zA-Z]:(?:\\[\w\u4E00-\u9FA5\s]+)+$</code></td>
<td>例如：<code>C:\Users\Administrator\Desktop</code></td>
</tr>
<tr>
<td>Linux文件路径</td>
<td><code>^\/(?:[^/]+\/)*[^/]+$</code></td>
<td>例如：<code>/root/library/a.txt</code></td>
</tr>
<tr>
<td>Linux文件夹路径</td>
<td><code>^\/(?:[^/]+\/)*$</code></td>
<td>例如：<code>/root/library/</code></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>regexp</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>regexp</tag>
      </tags>
  </entry>
  <entry>
    <title>flutter基础学习</title>
    <url>/2021/10/10/technology20211010110234/</url>
    <content><![CDATA[<p>最近学习了一周flutter,做了一下笔记，之前看到一个推荐入门的视频，初步看了一下很不错，推荐给大家。<strong><strong><a href="https://www.bilibili.com/video/BV1kh411a7Lr?p=2" target="_blank" rel="noopener">全新升级小码哥Flutter实战教学完整版附资料</a></strong></strong> ，如果有Android和IOS原生开发经验的感觉学起来是相对好理解一点。最后面也分享一下写的一个页面代码，由于最近一周公司内部的业务笔记多相对较忙，然后断断续续的学。</p>
<p><font color="#B22222">1、</font>stl 回车快捷键创建 <code>StatelessWidget</code>。</p>
<p><font color="#B22222">2、</font>如果像<code>IOS UITableViewCell</code>中子视图设置间距的话，可以使用<code>SizeBox(height: 8)</code>,就是设置上下之前的控件距离8个像素，<br>有点类似<code>IOS ToolBar</code>中添加多个item时的 <code>UIBarButtonSystemItemFlexibleSpace.</code></p>
<p><font color="#B22222">3、</font>去掉APP展示<code>debug LOGO</code>时在启动 MaterialAPP内 使用<code>debugShowCheckedModeBanner: false</code>。</p>
<p><font color="#B22222">4、</font> 关于widget 有状态的Widget:StatefulWidget在运行过程中有一些状态data数据需要改变，无状态的widget:StatelessWidget内容是确定的没有状态data数据的改变。</p>
<p><font color="#B22222">5、</font>两个组件widget并排时用Row组件可以放多个组件，想要水平居中，使用Center组件包裹。想要Row里面的子元素在父widget x轴居中 使用<code>mainAxisAlignment: MainAxisAlignment.center.</code></p>
<p><font color="#B22222">6、</font>想要子元素垂直流水布局使用Cloumn组件，也是widget但是如果里面的元素超出手机最大长度，就是不能滚动的区域，会展示黄色条纹斑马线的多余区域，解决办法就是使用ListView 可滚动的widget。</p>
<p><font color="#B22222">7、</font>使用网络加载图片<code>Image.network(url)</code>。</p>
<p><font color="#B22222">8、</font>statelessWidget里的属性必须是不可修改的 用<code>final</code>修饰。并且是实现构造函数就是当前类型传进去的命名的各个参数。</p>
<p><font color="#B22222">9、</font>如果使用Checkbox组件有按钮点击回调参数如 <code>onChangeed:(value) =&gt;flag = value.</code></p>
<p><font color="#B22222">10、</font>@immutable注解标明的类或者子类都必须是不可变的。所以比如statelessWidget类的属性用final修饰。</p>
<p><font color="#B22222">11、</font>StatefullWidget继承自StatefulWidget的类(可以接受父Widget传过来的数据/state类(状态))。StatefulWidget 要实现 <code>createState()</code>方法，然后实现State类 这个类就是实现可变的属性。</p>
<p><font color="#B22222">12、</font>如果实现边框和内间距可以使用Container，<code>alt + enter</code> 快捷键可实现一个Widget快速包裹一个Container. Container其中有一个属性decoration翻译过来为装饰，<code>BoxDecoration(border: Border.all( width: 5</code>,//设置边框的宽度, <code>color: Colors.purple</code>//设置边框的颜色))。如果设置Container内间距(子视图到Container的内部间距) padding: EdgeInsets.all(8) 上下左右为8个像素的间距。</p>
<p><font color="#B22222">13、</font>Text组件中的textAlign相当于IOS中的UILable中的属性<code>textAlignment</code>。</p>
<p><font color="#B22222">14、</font>Column中属性主轴和交叉轴 <code>mainAxisAlignment: MainAxisAlignment.center</code> 交叉轴<code>crossAxisAlignment: CrossAxisAlignment.start</code>(就是开始元素在) Column中开始最左边显示。如果<code>CrossAxisAlignment.end</code> 从右边开始显示相当于。(Column垂直方向就是主轴，Row来说水平方向是主轴).</p>
<p><font color="#B22222">14、</font>一个类中如果有@protected 如: <code>createState()</code>修饰表示该方法是必须实现的。widget类是不加下划线的，暴露给别人使用,State是加下划线的，状态这个类只给widget使用。为什么Flutter在设计的时候StatefulWidget的build方法放在State中？原因有 一、build出来的Widget是需要依赖State中的变量(状态/数量) 二、在运行的过程中 widget是不断的销毁和创建的。当自己的状态发生改变时，并不希望重新创建一个新的State类。</p>
<p><font color="#B22222">15、</font>RaisedButton按钮组件 <code>Raisebutton( child; Icon(Icons.add)),onPressed:()=&gt; print(&quot;点击+&quot;)) Icon</code>是展示图标。</p>
<p><font color="#B22222">16、</font>如果在State状态类中想可变的参数和不可变的参数（接受StatefulWidget的值时），State本身会持有所归属的widget组件，所以在StatefulWidget类中之间申请属性然后直接可以使用<code>${widget.message}</code> 这儿的widget就是前面自定义的StatefulWidget组件 message属性就是自定义的StatefulWidget类的属性。</p>
<p><font color="#B22222">17、</font>StatelessWidget的生命周期： 只有本身的构造方法和<code>build(BuildContext context)</code>方法。<br>   StatefulWidget 的生命周期包括两个类widget和state，其中StatefulWidget的生命周期是<code>Constructor</code>、<code>Widget.createState()</code>. State类生命周期 先调用Constructor（构造方法）、initState(初始化状态)、<code>didChangeDependencies</code>(状态值发生改变的时候)、<code>build</code>、<code>dispose</code>(销毁方法)，这儿如果子类中实现了initState方法，这个方法在父内中是@mustCallSuper意思是自内必须调用的。调用会对父类做一些初始化，同理dispose方法也是一样子。</p>
<p><font color="#B22222">18、</font>state类里调用<code>setState(VoidCallback fn)</code>，会去先执行fn(),然后setState里会去执行<code>markneedsBuild()</code>方法，然后去执行build(),刷新UI。</p>
<p><font color="#B22222">19、</font>带边框的按钮OutlineButton、平坦的按钮FlatButton、浮动按钮<code>FloatingActionButton(child: Icon(Icons.add),onPressed:()=&gt;)</code>、凸出的按钮RaiseButton.</p>
<p><font color="#B22222">20、</font>当自定义按钮时<code>FlatButton(color: Colors.red,child: Row(mainAxisSize: MainAxisSize.max,children: &lt;widget&gt;[Icon(Icons.favorite,color: Colors.red,),Text(&quot;A&quot;)]),onPressed:(){})</code>, mainAxisSize 主轴上的大小。</p>
<p><font color="#B22222">21、</font>FlatButton使用圆角时<code>shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(8))</code>。</p>
<p><font color="#B22222">22、</font>加载图片<code>Image(image: NetworkImage(&quot;https://~&quot;)),width: 200,height:200,fit:BoxFit.fitWidth,alignment: Alignment.BottomCenter)</code>。其中如果设置了图片的背景颜色是会覆盖在最上层，不过可以设置颜色混入模式与图片融合一体，<code>color: Colors.red,colorBlendMode: BlendMode.colorDodge</code>.</p>
<a id="more"></a>

<p><font color="#B22222">23、</font>加载本地图片<code>Image(image: AssetImage(&quot;&quot;))</code>，这个里面的图片路径有3个步骤，1、在项目中创建一个文件夹，存储图片 2、在pubspec.yaml进行配置 3、使用图片 如pubspec里的配置 <code>assets: - assets/images/ 这儿后面的可以不写图片名字</code>，就加载所有这个images目录的图片资源，然后在使用的时候<code>Image(image: AssetImage(&quot;assets/images/图片名字.png&quot;))</code>.</p>
<p><font color="#B22222">24、</font>FlatButton按钮如果再Column中会自动展示 48px间距，如果不足48px会自动填充48 padded，如果想去掉使用，<code>FlatButton(Flatbutton(color: Colors.red,materialTapTargetSize: MaterialTapTargetSize.shrinkWrap,child: Text(&quot;Flot Button&quot;),textColor: Colors.white,onPressed:(){}))</code>.</p>
<p><font color="#B22222">25、</font>将StatelessWidget转 StatefulWidget 鼠标选中需要转换的类名,或光标放到类名之间 option + enter，抽取代码为单独的Widget 有时候代码嵌套太多,不方便阅读,抽取Widget为一个单独的类,提高代码的阅读性 鼠标选中需要转换的类名,或光标放到类名之间<code>command  + option + W</code>。</p>
<p><font color="#B22222">26、</font>初始化函数 <code>Person(this.name,{int age}):this.age = age ?? 10{}</code>。</p>
<p><font color="#B22222">27、</font><code>decoration = decoration ?? (color != null ? BoxDecorayion(color: color):null)</code>就是一个赋值语句，意思就是decoration不为空就用这个值，否则就用后面的值。</p>
<p><strong>一个注册页面</strong></p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/cupertino.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/gestures.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:pro_summary/utils/util.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WSLoginPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> WSLoginPage(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _WSLoginPageState createState() =&gt; _WSLoginPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_WSLoginPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">WSLoginPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> themeColor = <span class="keyword">const</span> Color.fromRGBO(<span class="number">250</span>, <span class="number">250</span>, <span class="number">250</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: <span class="keyword">const</span> Text(<span class="string">"注册"</span>, style: TextStyle(color: Colors.black)),</span><br><span class="line">          backgroundColor: themeColor,</span><br><span class="line">          elevation: <span class="number">0</span>, <span class="comment">//默认为4 设置成零就没有阴影</span></span><br><span class="line">          <span class="comment">//设置主题颜色无效</span></span><br><span class="line">          <span class="comment">/*iconTheme: IconThemeData(</span></span><br><span class="line"><span class="comment">            color: themeColor,</span></span><br><span class="line"><span class="comment">          ),*/</span></span><br><span class="line">          <span class="comment">//修改返回按钮的颜色</span></span><br><span class="line">          leading: BackButton(color: Colors.grey.withOpacity(<span class="number">0.5</span>)),</span><br><span class="line">        ),</span><br><span class="line">        backgroundColor: themeColor,</span><br><span class="line">        body: WSContentBody());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WSContentBody</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> WSContentBody(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;WSContentBody&gt; createState() =&gt; _WSContentBodyState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_WSContentBodyState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">WSContentBody</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ListView(</span><br><span class="line">      padding: <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">15</span>, kToolbarHeight, <span class="number">15</span>, <span class="number">0</span>),</span><br><span class="line">      children: [</span><br><span class="line">        Expanded(</span><br><span class="line">          child: Column(children: [</span><br><span class="line">            BoxCellContainer(</span><br><span class="line">                <span class="string">"请输入邀请码"</span>, Toast2.loadImage(<span class="string">"icon_inputbox_recommend"</span>), <span class="number">0</span>),</span><br><span class="line">            BoxCellContainer(</span><br><span class="line">                <span class="string">"请输入11位手机号码"</span>, Toast2.loadImage(<span class="string">"icon_inputbox_phone"</span>), <span class="number">1</span>),</span><br><span class="line">            BoxCellContainer(</span><br><span class="line">                <span class="string">"请输入验证码"</span>, Toast2.loadImage(<span class="string">"icon_inputbox_code"</span>), <span class="number">2</span>),</span><br><span class="line">            <span class="keyword">const</span> SizedBox(height: <span class="number">38</span>),</span><br><span class="line">            getNextBtn()</span><br><span class="line">          ] <span class="comment">//下一步按钮,</span></span><br><span class="line">              ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="keyword">const</span> SizedBox(height: <span class="number">350</span>),</span><br><span class="line">        buildBottomRich()</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*构建底部富文本*/</span></span><br><span class="line">  buildBottomRich() &#123;</span><br><span class="line">    <span class="keyword">return</span> Expanded(</span><br><span class="line">      child: Row(mainAxisAlignment: MainAxisAlignment.center, children: [</span><br><span class="line">        SizedBox(</span><br><span class="line">          width: <span class="number">34</span>,</span><br><span class="line">          height: <span class="number">34</span>,</span><br><span class="line">          child: FlatButton(</span><br><span class="line">              materialTapTargetSize: MaterialTapTargetSize.shrinkWrap,</span><br><span class="line">              splashColor: Colors.white10,</span><br><span class="line">              highlightColor: Colors.white,</span><br><span class="line">              padding:</span><br><span class="line">                  <span class="keyword">const</span> EdgeInsets.only(left: <span class="number">0</span>, top: <span class="number">0</span>, right: <span class="number">0</span>, bottom: <span class="number">18</span>),</span><br><span class="line">              child: Image(</span><br><span class="line">                  width: <span class="number">14</span>,</span><br><span class="line">                  height: <span class="number">14</span>,</span><br><span class="line">                  image: AssetImage(Toast2.loadImage(<span class="string">"btn_bottom_agree_nor"</span>)),</span><br><span class="line">                  fit: BoxFit.contain),</span><br><span class="line">              <span class="comment">//color: const Color.fromRGBO(153, 153, 153, 0.3),</span></span><br><span class="line">              <span class="comment">//textColor: Colors.white,</span></span><br><span class="line">              onPressed: () &#123;&#125;),</span><br><span class="line">        ),</span><br><span class="line">        RichText(</span><br><span class="line">            textAlign: TextAlign.justify,</span><br><span class="line">            maxLines: <span class="number">2</span>,</span><br><span class="line">            text: TextSpan(</span><br><span class="line">                <span class="comment">//协议说明文案</span></span><br><span class="line">                text: <span class="string">"阅读并同意"</span>,</span><br><span class="line">                style: <span class="keyword">const</span> TextStyle(color: Colors.grey),</span><br><span class="line">                children: [</span><br><span class="line">                  <span class="comment">// Expanded(child: )</span></span><br><span class="line">                  TextSpan(</span><br><span class="line">                    text: <span class="string">"《喔刷伙伴Pro支付经销商协议》"</span>,</span><br><span class="line">                    style: <span class="keyword">const</span> TextStyle(color: Colors.blue),</span><br><span class="line">                    recognizer: TapGestureRecognizer()</span><br><span class="line">                      ..onTap = () &#123;</span><br><span class="line">                        opendUserProtocol();</span><br><span class="line">                      &#125;,</span><br><span class="line">                  ),</span><br><span class="line">                  <span class="keyword">const</span> TextSpan(</span><br><span class="line">                      text: <span class="string">"\n与"</span>, style: TextStyle(color: Colors.grey)),</span><br><span class="line">                  TextSpan(</span><br><span class="line">                    text: <span class="string">"《隐私协议》"</span>,</span><br><span class="line">                    style: <span class="keyword">const</span> TextStyle(color: Colors.blue),</span><br><span class="line">                    recognizer: TapGestureRecognizer()</span><br><span class="line">                      ..onTap = () &#123;</span><br><span class="line">                        opendUserProtocol();</span><br><span class="line">                      &#125;,</span><br><span class="line">                  )</span><br><span class="line">                ]))</span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*打开协议*/</span></span><br><span class="line">  opendUserProtocol() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  getNextBtn() &#123;</span><br><span class="line">    <span class="keyword">final</span> size = MediaQuery.of(context).size;</span><br><span class="line">    <span class="keyword">return</span> TextButton(</span><br><span class="line">        onPressed: _onPressed(<span class="string">""</span>),</span><br><span class="line">        child: <span class="keyword">const</span> Text(<span class="string">"下一步"</span>),</span><br><span class="line">        autofocus: <span class="keyword">true</span>,</span><br><span class="line">        <span class="comment">/*style: TextButton.styleFrom(</span></span><br><span class="line"><span class="comment">            //定义文本样式 这里设置的颜色是不起作用的</span></span><br><span class="line"><span class="comment">            textStyle: const TextStyle(fontSize: 19,color: Colors.white),</span></span><br><span class="line"><span class="comment">            padding: const EdgeInsets.all(15),</span></span><br><span class="line"><span class="comment">            backgroundColor: const Color.fromRGBO(153, 153, 153, 0.3)</span></span><br><span class="line"><span class="comment">          ),*/</span></span><br><span class="line">        style: ButtonStyle(</span><br><span class="line">            <span class="comment">//定义文本样式 这里设置的颜色是不起作用的</span></span><br><span class="line">            textStyle: MaterialStateProperty.all(</span><br><span class="line">              <span class="keyword">const</span> TextStyle(</span><br><span class="line">                  fontSize: <span class="number">19</span>, color: Color.fromRGBO(<span class="number">153</span>, <span class="number">153</span>, <span class="number">153</span>, <span class="number">0.3</span>)),</span><br><span class="line">            ),</span><br><span class="line">            <span class="comment">//设置按钮字体颜色</span></span><br><span class="line">            foregroundColor: MaterialStateProperty.resolveWith((states) &#123;</span><br><span class="line">              <span class="keyword">if</span> (states.contains(MaterialState.focused) &amp;&amp;</span><br><span class="line">                  !states.contains(MaterialState.pressed)) &#123;</span><br><span class="line">                <span class="comment">//获取焦点时的颜色</span></span><br><span class="line">                <span class="keyword">return</span> Colors.blue;</span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (states.contains(MaterialState.pressed)) &#123;</span><br><span class="line">                <span class="keyword">return</span> Colors.red;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Colors.white;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="comment">//按钮的背景颜色</span></span><br><span class="line">            backgroundColor: MaterialStateProperty.resolveWith((states) &#123;</span><br><span class="line">              <span class="keyword">const</span> btnBGColor = Color.fromRGBO(<span class="number">153</span>, <span class="number">153</span>, <span class="number">153</span>, <span class="number">0.3</span>);</span><br><span class="line">              <span class="keyword">if</span> (states.contains(MaterialState.pressed)) &#123;</span><br><span class="line">                <span class="keyword">return</span> btnBGColor;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> btnBGColor;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="comment">//padding: MaterialStateProperty.all(EdgeInsets.fromLTRB(15, 0, 15, 0)),</span></span><br><span class="line">            <span class="comment">//设置按钮大小</span></span><br><span class="line">            minimumSize: MaterialStateProperty.all(Size(size.width, <span class="number">52</span>)),</span><br><span class="line">            <span class="comment">//设置水波纹颜色</span></span><br><span class="line">            overlayColor: MaterialStateProperty.all(Colors.purple)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*按钮事件*/</span></span><br><span class="line">  _onPressed(states) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"点击了按钮"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*单元格*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BoxCellContainer</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> placeholder;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> iconName;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> index;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> BoxCellContainer(<span class="keyword">this</span>.placeholder, <span class="keyword">this</span>.iconName, <span class="keyword">this</span>.index,</span><br><span class="line">      &#123;Key? key&#125;)</span><br><span class="line">      : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SizedBox(</span><br><span class="line">      height: <span class="number">75</span>,</span><br><span class="line">      child: Column(children: [</span><br><span class="line">        Row(</span><br><span class="line">          mainAxisSize: MainAxisSize.max,</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Image(</span><br><span class="line">                width: <span class="number">20</span>,</span><br><span class="line">                height: <span class="number">20</span>,</span><br><span class="line">                image: AssetImage(iconName),</span><br><span class="line">                fit: BoxFit.contain),</span><br><span class="line">            Expanded(</span><br><span class="line">              child: CupertinoTextField(</span><br><span class="line">                padding: <span class="keyword">const</span> EdgeInsets.only(left: <span class="number">15</span>, right: <span class="number">40</span>),</span><br><span class="line">                placeholder: placeholder,</span><br><span class="line">                decoration: BoxDecoration(</span><br><span class="line">                    borderRadius: BorderRadius.circular(<span class="number">2.0</span>),</span><br><span class="line">                    border: Border.all(</span><br><span class="line">                        color: <span class="keyword">const</span> Color.fromRGBO(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">                        style: BorderStyle.solid,</span><br><span class="line">                        width: <span class="number">2.0</span>)),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            <span class="keyword">if</span> (index == <span class="number">0</span>)</span><br><span class="line">              Image(</span><br><span class="line">                  width: <span class="number">20</span>,</span><br><span class="line">                  height: <span class="number">20</span>,</span><br><span class="line">                  image: AssetImage(Toast2.loadImage(<span class="string">"btn_inputbox_scan_nor"</span>)),</span><br><span class="line">                  fit: BoxFit.cover),</span><br><span class="line">            <span class="comment">//获取验证码</span></span><br><span class="line">            <span class="keyword">if</span> (index == <span class="number">2</span>)</span><br><span class="line">              FlatButton(</span><br><span class="line">                  child: <span class="keyword">const</span> Text(<span class="string">"获取验证码"</span>),</span><br><span class="line">                  color: <span class="keyword">const</span> Color.fromRGBO(<span class="number">153</span>, <span class="number">153</span>, <span class="number">153</span>, <span class="number">0.3</span>),</span><br><span class="line">                  textColor: Colors.white,</span><br><span class="line">                  onPressed: () &#123;&#125;)</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        <span class="keyword">const</span> Divider(</span><br><span class="line">            height: <span class="number">10</span>,</span><br><span class="line">            <span class="comment">//分割线区域的高度，并非分割线的高度</span></span><br><span class="line">            thickness: <span class="number">0.8</span>,</span><br><span class="line">            <span class="comment">//分割线的厚度，真正的分割线的高度</span></span><br><span class="line">            color: Color.fromRGBO(<span class="number">153</span>, <span class="number">153</span>, <span class="number">153</span>, <span class="number">0.3</span>),</span><br><span class="line">            <span class="comment">//分割线颜色</span></span><br><span class="line">            indent: <span class="number">0</span>,</span><br><span class="line">            <span class="comment">//起点缩进距离</span></span><br><span class="line">            endIndent: <span class="number">0</span>) <span class="comment">//终点缩进距离</span></span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>flutter</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac青花瓷Charles抓包使用详解</title>
    <url>/2021/12/10/technology20211210100122/</url>
    <content><![CDATA[<p><a href="https://imgtu.com/i/7TVvvD" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7TVvvD.png" alt=""></a></p>
<h5 id="Charles青花瓷是一个HTTP代理服务器-HTTP监视器-反转代理服务器，当程序连接Charles的代理访问互联网时，Charles可以监控这个程序发送和接收的所有数据。它允许一个开发者查看所有连接互联网的HTTP通信，这些包括request-response和HTTP-headers-（包含cookies与caching信息）。"><a href="#Charles青花瓷是一个HTTP代理服务器-HTTP监视器-反转代理服务器，当程序连接Charles的代理访问互联网时，Charles可以监控这个程序发送和接收的所有数据。它允许一个开发者查看所有连接互联网的HTTP通信，这些包括request-response和HTTP-headers-（包含cookies与caching信息）。" class="headerlink" title="Charles青花瓷是一个HTTP代理服务器,HTTP监视器,反转代理服务器，当程序连接Charles的代理访问互联网时，Charles可以监控这个程序发送和接收的所有数据。它允许一个开发者查看所有连接互联网的HTTP通信，这些包括request, response和HTTP headers （包含cookies与caching信息）。"></a>Charles青花瓷是一个HTTP代理服务器,HTTP监视器,反转代理服务器，当程序连接Charles的代理访问互联网时，Charles可以监控这个程序发送和接收的所有数据。它允许一个开发者查看所有连接互联网的HTTP通信，这些包括request, response和HTTP headers （包含cookies与caching信息）。</h5><p><font color="#B22222">青花瓷 v 4.6.2</font>下载链接 <a href="https://www.charlesproxy.com/assets/release/4.6.2/charles-proxy-4.6.2.dmg?k=ba07c34dbd" target="_blank" rel="noopener">点击下载 macOS (dmg, 54.3 MB)<br>Compatible with macOS 10.7 - 10.15</a></p>
<p>青花瓷注册码<br>Registered Name: <code>https://zhile.io</code><br>License Key: <code>48891cf209c6d32bf4</code></p>
<p>打开charles–help–register charles 输入上面注册码，然后就可以使用了</p>
<p><strong>使用步骤</strong></p>
<ul>
<li><a href="#certificate_install">安装Mac证书 浏览器请求抓包</a></li>
<li><a href="#client_install">移动客户端请求抓包</a></li>
</ul>
<h6 id="一、安装Mac证书"><a href="#一、安装Mac证书" class="headerlink" title="一、安装Mac证书"></a><a name='certificate_install'><font color="black">一、安装Mac证书</font></a></h6><p><code>Charles主界面</code> -&gt;<code>Help</code> -&gt; <code>SSL Proxying</code> -&gt;<code>Install Charles Root Certificate</code> </p>
<p><a href="https://imgtu.com/i/7TZ3GV" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7TZ3GV.png" alt=""></a></p>
<p>然后在钥匙串找到 Charles Root Certificate 证书，我这边显示Charles Proxy CA ，然后系统默认是不信任Charles的证书的，此时<code>右键证书</code>-&gt;<code>显示简介</code> -&gt; <code>信任</code>中<code>使用此证书时</code>，把<code>使用系统默认</code>改为<code>始终信任</code></p>
<a id="more"></a>
<h6 id="二、安装客户端证书"><a href="#二、安装客户端证书" class="headerlink" title="二、安装客户端证书"></a><a name='client_install'><font color="black">二、安装客户端证书</font></a></h6><ul>
<li>设置客户端网络ip地址</li>
</ul>
<p><code>Charles主界面</code> -&gt;<code>Help</code> -&gt; <code>SSL Proxying</code> -&gt;<code>Install Charles Root Certificate Device or Remote Browser</code></p>
<p><a href="https://imgtu.com/i/7oTarj" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7oTarj.png" alt=""></a></p>
<p>只要手机和电脑链接的同一个网络就行，然后在 <code>设置</code> -&gt; <code>无线局域网</code> -&gt; <code>当前连接的无线</code> -&gt; <code>配置代理</code> –&gt; <code>手动</code> –&gt; 在<code>服务器</code>中输入<code>上面图片展示的IP地址</code> –&gt; <code>端口</code>添加<code>8888</code> -&gt; 点击右上角<code>存储</code>按钮。</p>
<p>备注: 如何有在Charles设置中修改过这个端口号，则上面这个端口号填写修改过后的没有修改过直接服务器ip和端口号填写你自己电脑点开上图上面的ip和端口。</p>
<p>也可以通过 <code>cat /etc/resolv.conf</code> 指令来查看ip 地址</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># This file is not consulted for DNS hostname resolution, address</span><br><span class="line"># resolution, or the DNS query routing mechanism used by most</span><br><span class="line"># processes on this system.</span><br><span class="line">#</span><br><span class="line"># To view the DNS configuration used by this system, use:</span><br><span class="line">#   scutil --dns</span><br><span class="line"></span><br><span class="line"># SEE ALSO</span><br><span class="line">#   dns-sd(1), scutil(8)</span><br><span class="line"># This file is automatically generated.</span><br><span class="line"></span><br><span class="line">nameserver 172.16.200.161 你的ip地址 </span><br><span class="line">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure>
<ul>
<li><p>下载移动端证书</p>
<p>1、确保Mac上的Charles软件是打开状态。</p>
<p>2、打开苹果自带的safari浏览器输入 <code>http://charlesproxy.com/getssl</code> 或者<code>http://chls.pro/ssl</code>然后回车，会出现提示 此网站正尝试下载一个配置描述文件。您要允许？点击下载按钮。</p>
<p>如果出现以下问题:</p>
<p><font color="red">Q1:</font> safari输入出现 ，Charles SSL CA Certificate installation<br>Your browser should download and offer to install the Charles SSL CA Certificate in just a moment. If this doesn’t work, please check that your OS, or browser, is configured to use Charles as its proxy.<br><font color="red">w1:</font> 请看一下你手机所连接网络是否跳网，不是和电脑所在同一个网络。</p>
<p><font color="red">Q2:</font> 如何上面你都试过了还是不行。</p>
<p><font color="red">w1:</font>请直接safari浏览器输入<code>https://www.charlesproxy.com/documentation/additional/legacy-ssl-proxying/</code> 然后点击 itself here(for instaling on mobile devices)下载下来。</p>
</li>
</ul>
<ul>
<li><p>安装手机端的证书<br>1、然后点击<code>设置</code> -&gt; <code>通用</code> -&gt; <code>描述文件</code> -&gt;<code>选中 Charles Proxy SSL Proxying</code>按照要求进行安装就可以了。</p>
<p>2、然后信任证书，点击<code>设置</code> -&gt; <code>关于</code> -&gt; <code>证书信任设置</code> 在针对根证书启用完全信任勾上，Charles proxy SSL Proxying。<br><a href="https://imgtu.com/i/7T9PUS" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7T9PUS.png" alt=""></a></p>
</li>
</ul>
<h6 id="三、Mac端Charles中的设置"><a href="#三、Mac端Charles中的设置" class="headerlink" title="三、Mac端Charles中的设置"></a><font color="black">三、Mac端Charles中的设置</font></h6><h5 id="1、以上一系列设置过后，证书就安装完成。然后就是开始在Mac端-Charles-中开启macOS-Proxy。"><a href="#1、以上一系列设置过后，证书就安装完成。然后就是开始在Mac端-Charles-中开启macOS-Proxy。" class="headerlink" title="1、以上一系列设置过后，证书就安装完成。然后就是开始在Mac端 Charles 中开启macOS Proxy。"></a>1、以上一系列设置过后，证书就安装完成。然后就是开始在Mac端 Charles 中开启macOS Proxy。</h5><p><a href="https://imgtu.com/i/7T96KI" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7T96KI.png" alt="" style="zoom:50%;" /></a></p>
<h5 id="2、打开-ProxySettings开启-Enable-transparent-http-proxying。"><a href="#2、打开-ProxySettings开启-Enable-transparent-http-proxying。" class="headerlink" title="2、打开 ProxySettings开启 Enable transparent http proxying。"></a>2、打开 <code>ProxySettings</code>开启 Enable transparent http proxying。</h5><p><a href="https://imgtu.com/i/7TCSz9" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7TCSz9.png" alt="" style="zoom: 50%;" /></a></p>
<h5 id="3、打开-SSL-Proxying-Settings-位置在Proxy-gt-SSL-Proxying-Settings-然后在-Enable-SSL-Proxying-这个一定要勾上-然后在Location-添加-表示全部拦截。到这儿位置就全部设置完毕了。然后开始拦截请求数据吧！"><a href="#3、打开-SSL-Proxying-Settings-位置在Proxy-gt-SSL-Proxying-Settings-然后在-Enable-SSL-Proxying-这个一定要勾上-然后在Location-添加-表示全部拦截。到这儿位置就全部设置完毕了。然后开始拦截请求数据吧！" class="headerlink" title="3、打开 SSL Proxying Settings,位置在Proxy-&gt;SSL Proxying Settings,然后在 Enable SSL Proxying 这个一定要勾上,然后在Location 添加*:*表示全部拦截。到这儿位置就全部设置完毕了。然后开始拦截请求数据吧！"></a>3、打开 SSL Proxying Settings,位置在<code>Proxy</code>-&gt;<code>SSL Proxying Settings</code>,然后在 <font color="red">Enable SSL Proxying</font> 这个一定要勾上,然后在Location 添加*:*表示全部拦截。到这儿位置就全部设置完毕了。然后开始拦截请求数据吧！</h5><p><a href="https://imgtu.com/i/7TCOOI" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7TCOOI.png" alt=""></a></p>
<h5 id="最后开始尽情的享受不用找接口然后看到各个接口的数据的快乐吧"><a href="#最后开始尽情的享受不用找接口然后看到各个接口的数据的快乐吧" class="headerlink" title="最后开始尽情的享受不用找接口然后看到各个接口的数据的快乐吧"></a>最后开始尽情的享受不用找接口然后看到各个接口的数据的快乐吧</h5><h5 id="1、如果是客户端加证书请求的APP不可以抓包需要导入Client-Certificaters才可以。"><a href="#1、如果是客户端加证书请求的APP不可以抓包需要导入Client-Certificaters才可以。" class="headerlink" title="1、如果是客户端加证书请求的APP不可以抓包需要导入Client Certificaters才可以。"></a>1、如果是客户端加证书请求的APP不可以抓包需要导入Client Certificaters才可以。</h5><h5 id="2、有些APP是加密了，需要了解解密方式，把抓出来的解密才可以看到数据。"><a href="#2、有些APP是加密了，需要了解解密方式，把抓出来的解密才可以看到数据。" class="headerlink" title="2、有些APP是加密了，需要了解解密方式，把抓出来的解密才可以看到数据。"></a>2、有些APP是加密了，需要了解解密方式，把抓出来的解密才可以看到数据。</h5><p><a href="https://imgtu.com/i/7TieKA" target="_blank" rel="noopener"><img src="https://s4.ax1x.com/2022/01/24/7TieKA.png" alt=""></a></p>
]]></content>
      <categories>
        <category>charles</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title>如何解绑微信小程序游戏</title>
    <url>/2022/01/03/technology20220103111021/</url>
    <content><![CDATA[<p>本文将介绍如何在手机上解绑微信小程序，并提供详细的操作步骤和截图，帮助您顺利解除与小程序的关联。</p>
<p>打开微信应用 首先，确保您已经打开了微信应用程序并登录到自己的账号。</p>
<h4 id="1、微信里进入-【小程序助手】"><a href="#1、微信里进入-【小程序助手】" class="headerlink" title="1、微信里进入 【小程序助手】"></a>1、微信里进入 【小程序助手】</h4><p>微信小程序。可以通过微信聊天界面中的小程序图标进入，也可以通过微信中的“发现”–&gt;“小程序”进入。在小程序界面中，我们可以看到所有已经添加的小程序，以及个人信息等选项。备注：这个小程序名字就是叫《小程序助手》</p>
<h4 id="2、找到需要解绑的小程序"><a href="#2、找到需要解绑的小程序" class="headerlink" title="2、找到需要解绑的小程序"></a>2、找到需要解绑的小程序</h4><p>在【小程序助手】管理页面中，浏览已关联的小程序列表，找到您需要解绑的小程序。<br><a href="https://imgse.com/i/pCM0d8U" target="_blank" rel="noopener"><br>    <img src="https://s1.ax1x.com/2023/06/16/pCM0d8U.jpg" alt="图片描述" width="375" height="667"><br></a></p>
<h4 id="3、点击顶部要解绑的小程序"><a href="#3、点击顶部要解绑的小程序" class="headerlink" title="3、点击顶部要解绑的小程序"></a>3、点击顶部要解绑的小程序</h4><p>在您找到需要解绑的小程序后，点击对应小程序顶部按钮。<br><a href="https://imgse.com/i/pCM0w2F" target="_blank" rel="noopener"><br>    <img src="https://s1.ax1x.com/2023/06/16/pCM0w2F.jpg" alt="图片描述" width="375" height="667"><br></a></p>
<h4 id="4、进入【解绑】页面"><a href="#4、进入【解绑】页面" class="headerlink" title="4、进入【解绑】页面"></a>4、进入【解绑】页面</h4><p>在小程序的设置页中，找到“解绑”选项，点击进入【解绑】页面。<br><a href="https://imgse.com/i/pCM0aCT" target="_blank" rel="noopener"><br>    <img src="https://s1.ax1x.com/2023/06/16/pCM0aCT.jpg" alt="图片描述" width="375" height="667"><br></a></p>
<h4 id="5、确认解绑操作"><a href="#5、确认解绑操作" class="headerlink" title="5、确认解绑操作"></a>5、确认解绑操作</h4><p>在【解绑】页面中，系统将提醒您解绑后将无法再使用该小程序的相关功能。请仔细阅读提示并确认解绑操作。</p>
<h4 id="6、点击【解绑】按钮"><a href="#6、点击【解绑】按钮" class="headerlink" title="6、点击【解绑】按钮"></a>6、点击【解绑】按钮</h4><p>在确认无误后，点击页面底部的“解绑”按钮，完成解绑操作。</p>
<p>注意事项：</p>
<ul>
<li>解绑小程序后，您将无法再访问和使用该小程序的相关功能。请确保您不再需要与该小程序有任何关联。</li>
<li>解绑小程序不会删除您的个人信息或数据。如果您需要删除与该小程序相关的个人信息，请联系小程序开发者。</li>
<li>在解绑小程序之前，您可以备份和保存与该小程序相关的任何数据或信息。</li>
</ul>
<p>通过以上步骤，您可以在手机上轻松解绑微信小程序。请确保您在解绑之前仔细阅读提示信息并确认解绑操作，以免造成不必要的麻烦。如果您需要重新关联或有任何问题，请联系小程序的开发者或寻求微信客服的帮助。</p>
]]></content>
      <categories>
        <category>knowledge</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>knowledge</tag>
      </tags>
  </entry>
  <entry>
    <title>Pycharm运行闪退报parseVMOptions PYCHARM_VM_OPTIONS</title>
    <url>/2022/09/16/technology20220916182205/</url>
    <content><![CDATA[<h5 id="Pycharm之前安装了2021版本，然后破解了过后，不知道什么原因可能把文件删除掉了，然后无论重装版本都不可行，报错如下。"><a href="#Pycharm之前安装了2021版本，然后破解了过后，不知道什么原因可能把文件删除掉了，然后无论重装版本都不可行，报错如下。" class="headerlink" title="Pycharm之前安装了2021版本，然后破解了过后，不知道什么原因可能把文件删除掉了，然后无论重装版本都不可行，报错如下。"></a>Pycharm之前安装了2021版本，然后破解了过后，不知道什么原因可能把文件删除掉了，然后无论重装版本都不可行，报错如下。</h5><p>pycharm[5868:93254] allVms required 1.8*,1.8+<br>pycharm[5868:93258] Current Directory: /Applications/PyCharm.app/Contents/MacOS<br>pycharm[5868:93258] <font color="red">parseVMOptions: PYCHARM_VM_OPTIONS = /Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/pycharm.vmoptions</font><br>pycharm[5868:93258] parseVMOptions: platform=-1 user=-1 file=(null)<br>pycharm[5868:93258]  Terminating app due to uncaught exception ‘NSInternalInconsistencyException’, reason: ‘NSWindow drag regions should only be invalidated on the Main Thread!’<br> First throw call stack:<br> (<br>0   CoreFoundation                      0x00007ff81b5b943b <em>exceptionPreprocess + 242<br>    1   libobjc.A.dylib                     0x00007ff81b108e25 objc_exception_throw + 48<br>    2   CoreFoundation                      0x00007ff81b5e15d6 <em>CFBundleGetValueForInfoKey + 0<br>    3   AppKit                              0x00007ff81e688161 -[NSWindow(NSWindow_Theme) _postWindowNeedsToResetDragMarginsUnlessPostingDisabled] + 307<br>    4   AppKit                              0x00007ff81e674f4f -[NSWindow _initContent:styleMask:backing:defer:contentView:] + 1247<br>    5   AppKit                              0x00007ff81e80f412 -[NSPanel _initContent:styleMask:backing:defer:contentView:] + 50<br>    6   AppKit                              0x00007ff81e674a69 -[NSWindow initWithContentRect:styleMask:backing:defer:] + 42<br>    7   AppKit                              0x00007ff81e80f3cb -[NSPanel initWithContentRect:styleMask:backing:defer:] + 59<br>    8   AppKit                              0x00007ff81e672f88 -[NSWindowTemplate nibInstantiate] + 354<br>    9   AppKit                              0x00007ff81e64142a -[NSIBObjectData instantiateObject:] + 222<br>    10  AppKit                              0x00007ff81e640b9c -[NSIBObjectData nibInstantiateWithOwner:options:topLevelObjects:] + 476<br>    11  AppKit                              0x00007ff81e63567f loadNib + 420<br>    12  AppKit                              0x00007ff81e634a67 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:options:withZone:ownerBundle:] + 737<br>    13  AppKit                              0x00007ff81e634691 -[NSBundle(NSNibLoading) loadNibNamed:owner:topLevelObjects:] + 201<br>    14  AppKit                              0x00007ff81e9877a0 -[NSAlert init] + 101<br>    15  pycharm                             0x000000010b885ae8 -[Launcher buildArgsFor:] + 1416<br>    16  pycharm                             0x000000010b885fd4 -[Launcher launch] + 340<br>    17  Foundation                          0x00007ff81c39082c _NSThreadstart</em></em> + 1009<br>    18  libsystem_pthread.dylib             0x00007ff81b466259 _pthread_start + 125<br>    19  libsystem_pthread.dylib             0x00007ff81b461c7b thread_start + 15<br>)<br>libc++abi: terminating with uncaught exception of type NSException<br>zsh: abort      ./pycharm<br>macPro MacOS % </p>
<p>仔细看上面报的错误是 <code>jetbra/vmoptions/pycharm.vmoption</code>位置未找到，由于之前是直接下载然后在桌面解压破解的，所以那个文件夹在在桌面引用了。后面删除了导致找不到。</p>
<p><strong>1、查找资料说这个<code>/Users/mac/Library/Application\ Support/JetBrains</code> 中间mac是您的电脑用户名</strong></p>
<p>rm -rf 这个路径下的 JetBrains依旧不行。</p>
<p><strong>2、下载重新安装其他版本也还是闪退</strong></p>
<p>重新在了PyCharm2022版本依旧行不通。</p>
<p><strong>3、清除原有配置</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">rm -rf  /Users/mac/Library/Preferences/PyCharm2021.3</span><br></pre></td></tr></table></figure>

<p>重新删除这个文件运行还是闪退。</p>
<a id="more"></a>

<p><font color="green"><strong><em>解决办法：</em></strong></font></p>
<h4 id="首先看见上面的问题，应该找-parseVMOptions-PYCHARM-VM-OPTIONS"><a href="#首先看见上面的问题，应该找-parseVMOptions-PYCHARM-VM-OPTIONS" class="headerlink" title="首先看见上面的问题，应该找 parseVMOptions: PYCHARM_VM_OPTIONS"></a>首先看见上面的问题，应该找 <code>parseVMOptions: PYCHARM_VM_OPTIONS</code></h4><p><strong>一、找到PyCharm在mac上安装位置，在应用程序里。</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;Applications&#x2F;PyCharm.app&#x2F;Contents&#x2F;MacOS</span><br><span class="line">.&#x2F;pycharm</span><br></pre></td></tr></table></figure>
<p>找到后先后执行上面命令，第一句你直接cd过后直接拖上去<code>PyCharm软件的图标</code>，然后都执行完成过后，就会展示出闪退报错我的位置。</p>
<p><strong>二、如果也是报的上面vmoptions文件的问题</strong></p>
<p><a href="https://imgse.com/i/pSuia11" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/01/12/pSuia11.jpg" alt="pSuia11.jpg"></a></p>
<p>找到 <code>/Users/mac/Library/LaunchAgents/jetbrains.vmoptions.plist</code>，你也可以点击mac前往/Users/mac/Library/LaunchAgents/  mac换成你的电脑用户名。</p>
<p>然后找到<code>jetbrains.vmoptions.plist</code>文件，用Xcode或者VsCode或者其他工具打开，然后可以看到</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">plist</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="meta-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span><span class="tag">&lt;<span class="name">dict</span>&gt;</span><span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span><span class="tag">&lt;<span class="name">string</span>&gt;</span>jetbrains.vmoptions<span class="tag">&lt;/<span class="name">string</span>&gt;</span><span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span><span class="tag">&lt;<span class="name">array</span>&gt;</span><span class="tag">&lt;<span class="name">string</span>&gt;</span>sh<span class="tag">&lt;/<span class="name">string</span>&gt;</span><span class="tag">&lt;<span class="name">string</span>&gt;</span>-c<span class="tag">&lt;/<span class="name">string</span>&gt;</span><span class="tag">&lt;<span class="name">string</span>&gt;</span></span><br><span class="line">launchctl setenv "IDEA_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/idea.vmoptions"</span><br><span class="line">launchctl setenv "CLION_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/clion.vmoptions"</span><br><span class="line">launchctl setenv "PHPSTORM_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/phpstorm.vmoptions"</span><br><span class="line">launchctl setenv "GOLAND_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/goland.vmoptions"</span><br><span class="line">launchctl setenv "PYCHARM_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/pycharm.vmoptions"</span><br><span class="line">launchctl setenv "WEBSTORM_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/webstorm.vmoptions"</span><br><span class="line">launchctl setenv "WEBIDE_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/webide.vmoptions"</span><br><span class="line">launchctl setenv "RIDER_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/rider.vmoptions"</span><br><span class="line">launchctl setenv "DATAGRIP_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/datagrip.vmoptions"</span><br><span class="line">launchctl setenv "RUBYMINE_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/rubymine.vmoptions"</span><br><span class="line">launchctl setenv "APPCODE_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/appcode.vmoptions"</span><br><span class="line">launchctl setenv "DATASPELL_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/dataspell.vmoptions"</span><br><span class="line">launchctl setenv "GATEWAY_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/gateway.vmoptions"</span><br><span class="line">launchctl setenv "JETBRAINS_CLIENT_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/jetbrains_client.vmoptions"</span><br><span class="line">launchctl setenv "JETBRAINSCLIENT_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/jetbrainsclient.vmoptions"</span><br><span class="line">launchctl setenv "STUDIO_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/studio.vmoptions"</span><br><span class="line">launchctl setenv "DEVECOSTUDIO_VM_OPTIONS" "/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/devecostudio.vmoptions"</span><br><span class="line"><span class="tag">&lt;/<span class="name">string</span>&gt;</span><span class="tag">&lt;/<span class="name">array</span>&gt;</span><span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span><span class="tag">&lt;<span class="name">true</span>/&gt;</span><span class="tag">&lt;/<span class="name">dict</span>&gt;</span><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>找到过后，将上面的目录指向之前破解版的目录vmoptions文件。如果防止以后删除你可以保存一份在/Users/mac/vmoptions 根目录下，然后例如上面的位置：</p>
<p><code>/Users/mac/Desktop/未命名文件夹/jetbra/vmoptions/idea.vmoptions</code><br>改成<br><code>/Users/mac/vmoptions/idea.vmoptions</code></p>
<p>将上面的路径全部修改完毕，然后保存，再退出。</p>
<p><strong>重新运行PyCharm就可以重新运行了</strong></p>
]]></content>
      <categories>
        <category>error</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>使用fvm管理Flutter SDK版本</title>
    <url>/2022/10/12/technology20221012070215/</url>
    <content><![CDATA[<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>fvm是一个非常有用的工具，可以帮助我们在Flutter项目中管理不同版本的Flutter SDK。使用fvm，我们可以轻松切换和管理项目所使用的Flutter SDK版本。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><p>以下是使用fvm的步骤：</p>
<p>安装fvm：打开终端并运行以下命令来安装fvm：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pub global activate fvm</span><br></pre></td></tr></table></figure>

<ol>
<li>创建一个新的Flutter项目：使用<code>flutter create</code>命令创建一个新的Flutter项目，或者进入到一个已经存在的Flutter项目目录。</li>
<li>初始化fvm：在终端中导航到你的Flutter项目目录，并运行以下命令来初始化fvm：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm init</span><br></pre></td></tr></table></figure>

<p>列出可用的Flutter版本：运行以下命令来列出所有可用的Flutter SDK版本：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm list-remote</span><br></pre></td></tr></table></figure>

<p>安装特定版本的Flutter SDK：从列表中选择一个你想要的版本号，并运行以下命令来安装该版本的Flutter SDK：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm install &lt;version&gt;</span><br></pre></td></tr></table></figure>

<p>确保将<code>&lt;version&gt;</code>替换为你想要安装的实际版本号。</p>
<p>例如安装 <code>3.0.0-stable</code>  fvm install 3.0.0-stable ，如何安装失败报错，先再次尝试运行改命令。</p>
<p>关联项目到特定版本的Flutter SDK：通过以下命令将你的项目关联到已安装的特定版本的Flutter SDK：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm use &lt;version&gt;</span><br></pre></td></tr></table></figure>

<p>确保将<code>&lt;version&gt;</code>替换为你实际安装的版本号，例如使用 <code>3.0.0-stable</code>  fvm use 3.0.0-stable 。</p>
<p>在项目中使用fvm：现在，你的Flutter项目已经和特定版本的Flutter SDK关联起来了。可以使用以下命令来运行Flutter命令，例如运行应用程序：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm flutter run</span><br></pre></td></tr></table></figure>

<p>查询当前使用的版本：要查询当前项目所使用的Flutter SDK版本，请运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm current</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>如果 <code>fvm current</code>运行查看当前使用的指令，当前使用的已经是想要的flutter SDK 版本了，还是不行的话，请检查例如使用 Android Studio中 Fluter SDK path使用的路径，如果你之前是使用的绝对路径，请替换成fvm 当前指定的路径，/Users/mac/.fvm/current  替换成你的电脑名字。</p>
<p><a href="https://imgse.com/i/pCKtJeK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/06/15/pCKtJeK.jpg" alt="pCKtJeK.jpg"></a></p>
<p>Dart path: /Users/mac/.fvm/current/bin/cache/dart-sdk</p>
<p>Flutter SDK path: /Users/mac/.fvm/current</p>
<p>这儿如果你选择了过后发现 version中的版本 没有变动的话，证明这个目录没有下载成功或者其他原因。如果没有下载或者残损，重新执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm install &lt;version&gt; 所对应的版本下载</span><br></pre></td></tr></table></figure>

<p>如果想卸载掉一个对应的版本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm flutter uninstall &lt;version&gt; 所对应的版本</span><br></pre></td></tr></table></figure>

<p>1、如果遇到：</p>
<p><font color='red'>fvm use 3.0.1 Switch flutter to =&gt; version:3.0.1-stable Now using flutter version:3.0.1-stable…(Please wait a moment when first switch to it!!!) /usr/local/Cellar/fvm/1.1.6/libexec/fvm.sh: 行 117: flutter: 未找到命令</font></p>
<p>解决：/Users/mac/.bash_profile 找到这个文件 然后打开编辑添加，使用fvm之前没有正确配置Flutter环境变量所致。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">"/Users/mac/.pub-cache/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"/Users/mac/.fvm/current/bin:<span class="variable">$PATH</span>"</span></span><br></pre></td></tr></table></figure>


<p>然后执行： </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> /Users/mac/.bash_profile</span><br></pre></td></tr></table></figure>

<p>然后在使用命令 </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fvm use 3.0.1</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>通过使用fvm，我们能够更好地管理Flutter项目中的不同版本的Flutter SDK。这个工具让我们可以轻松切换和管理不同版本的SDK，从而使我们能够更灵活地开发和测试Flutter应用程序。</p>
]]></content>
      <categories>
        <category>flutter</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>Pycharm2021破解版安装教程</title>
    <url>/2022/10/16/technology20221016191405/</url>
    <content><![CDATA[<h5 id="PyCharm是一种-Python-IDE-，带有一整套可以帮助用户在使用-Python-语言开发时提高其效率的工具，比如-调试-、-语法高亮-、-项目管理-、代码跳转、智能提示、-自动完成-、-单元测试-、-版本控制-。此外，该IDE提供了一些高级功能，以用于支持Django框架下的专业开发。"><a href="#PyCharm是一种-Python-IDE-，带有一整套可以帮助用户在使用-Python-语言开发时提高其效率的工具，比如-调试-、-语法高亮-、-项目管理-、代码跳转、智能提示、-自动完成-、-单元测试-、-版本控制-。此外，该IDE提供了一些高级功能，以用于支持Django框架下的专业开发。" class="headerlink" title="PyCharm是一种[Python][IDE]，带有一整套可以帮助用户在使用[Python]语言开发时提高其效率的工具，比如[调试]、[语法高亮]、[项目管理]、代码跳转、智能提示、[自动完成]、[单元测试]、[版本控制]=。此外，该IDE提供了一些高级功能，以用于支持Django框架下的专业开发。"></a>PyCharm是一种[Python][IDE]，带有一整套可以帮助用户在使用[Python]语言开发时提高其效率的工具，比如[调试]、[语法高亮]、[项目管理]、代码跳转、智能提示、[自动完成]、[单元测试]、[版本控制]=。此外，该IDE提供了一些高级功能，以用于支持<a href="https://baike.baidu.com/item/Django/61531?fromModule=lemma_inlink" target="_blank" rel="noopener">Django</a>框架下的专业开发。</h5><h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h4><p><strong>一、下载破解补丁</strong></p>
<p>下载激活所需的补丁文件，由于分享的百度网盘链接容易被封，给两个下载地址如果被删除，请换第二个，两个地址内容是一样的。</p>
<p>网盘链接一: <a href="https://pan.baidu.com/s/1GsWqGh71ksF4ahOb7sW4Kg?pwd=0q75" target="_blank" rel="noopener">https://pan.baidu.com/s/1GsWqGh71ksF4ahOb7sW4Kg?pwd=0q75</a>  提取码: 0q75</p>
<p>网盘链接二: <a href="https://pan.baidu.com/s/13V22JJ_oLBlkSp97Tz1ZFA" target="_blank" rel="noopener">https://pan.baidu.com/s/13V22JJ_oLBlkSp97Tz1ZFA</a>  提取码: g3b9</p>
<p><strong>二、下载PyCharm版本 2022.2</strong></p>
<p>开始下载: <a href="https://download.jetbrains.com.cn/python/pycharm-professional-2022.2.4.dmg?_gl=1*19zhtw1*_ga*NDk0MTY4MjMwLjE2Mzk1NTExMzU.*_ga_9J976DJZ68*MTY3MzQyNjA1NS40LjEuMTY3MzQyNjA2Mi41My4wLjA.&_ga=2.215991511.1740996901.1673343243-494168230.1639551135" target="_blank" rel="noopener">Mac PyCharm2022 Community版</a> </p>
<p>开始下载: <a href="https://download.jetbrains.com.cn/python/pycharm-community-2022.2.4.dmg?_gl=1*19zhtw1*_ga*NDk0MTY4MjMwLjE2Mzk1NTExMzU.*_ga_9J976DJZ68*MTY3MzQyNjA1NS40LjEuMTY3MzQyNjA2Mi41My4wLjA.&_ga=2.215991511.1740996901.1673343243-494168230.1639551135" target="_blank" rel="noopener">Mac PyCharm2022 Professional版</a> </p>
<p>下载其他版本<a href="https://www.jetbrains.com/pycharm/download/other.html" target="_blank" rel="noopener">https://www.jetbrains.com/pycharm/download/other.html</a></p>
<p>上面的布丁是破解PyCharm 2022版本，其他也可以自行尝试。</p>
<p><strong><em>1、在 PyCharm 官网下载安装包并且安装在自己电脑上</em></strong></p>
<p><strong><em>2、如果你电脑上的PyCharm之前就使用过其他激活教程，那么我建议你先重置你的PyCharm。这样能避免因为以前的激活补丁而导致永久激活失败，后期失效了又得折腾是很麻烦的。</em></strong>（Ps：新电脑新安装的PyCharm无需重置，可以直接跳过这一步直接开始激活。）</p>
<p>重置： 在补丁文件中打开<code>重置脚本</code>这个文件夹</p>
<p><img src="http://www.javatiku.cn/usr/img/09978955f2a65748e5c280634695a8f0.png" alt="重置1.png"></p>
<p><code>.sh</code>结尾的是Mac端执行的脚本文件 <code>.vbs</code>是windows执行的脚本</p>
<p>windows 双击运行脚本就重置好了。mac端 需要</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure>

<p> 在命令行终端中找到那个文件所在的目录，执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./reset_jetbrains_eval_mac_linux.sh</span><br></pre></td></tr></table></figure>

<p>在执行中可能会报错</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sh: .&#x2F;reset_jetbrains_eval_mac_linux.sh: Permission denied</span><br></pre></td></tr></table></figure>

<p>这是因为用户没有权限，而导致无法执行。用命令chmod 修改一下bin目录下的.sh权限就可以了。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod u+x *.sh</span><br></pre></td></tr></table></figure>

<p>这里的u 这里指文件所有者，+x 添加可执行权限，.sh表示所有的sh文件</p>
<a id="more"></a>

<p>*<em>3、还是在补丁文件中，打开 <code>scripts</code> 这个文件夹 *</em></p>
<ul>
<li>install.sh：是用于Mac和Linux系统的激活脚本。</li>
<li>install-all-users.vbs：是用于Windows系统的激活脚本。</li>
</ul>
<p>执行mac版本上的install.sh脚本</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;install.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">注意：这个激活脚本是支持 JetBrains 所有产品的！也就是说脚本运行一次之后，你电脑上安装的所有 JetBrains 软件就都可以永久了，直接按照后面的步骤输入激活码就行！</span><br><span class="line"></span><br><span class="line">比如你电脑上现在安装了IDEA 和PyCharm这两款软件，上面的激活脚本你只需要运行一次就可以了！而且后续如果你再安装其他 JetBrains 的软件也不需要再运行激活脚本，直接按照后面的步骤输入激活码就可以了！</span><br></pre></td></tr></table></figure>

<p><strong><em>4、然后我们打开 PyCharm，如下图所示点击 <code>Activation code</code></em></strong></p>
<p><img src="http://www.javatiku.cn/usr/img/d65775c73d7d062247f0e8dfa94cc657.png" alt="1.png"></p>
<p><strong><em>5、复制下面的激活码粘贴进去</em></strong></p>
<p><code>F5TRIB85C7-eyJsaWNlbnNlSWQiOiJGNVRSSUI4NUM3IiwibGljZW5zZWVOYW1lIjoiU2hhbmRvbmcgVW5pdmVyc2l0eSIsImFzc2lnbmVlTmFtZSI6ImFvIGxpIiwiYXNzaWduZWVFbWFpbCI6IjI4Njc4MTYyNjhAcXEuY29tIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiRm9yIGVkdWNhdGlvbmFsIHVzZSBvbmx5IiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJEUE4iLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IkRCIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJQUyIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiSUkiLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJTQyIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJHTyIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiRE0iLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJTRiIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJEUyIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUEMiLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJDIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJDTCIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiV1MiLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJEIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJSUzAiLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJNIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJBQyIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUlNWIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IkRDIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJSU1UiLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IkRQIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBEQiIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFNJIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBQUyIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQQ1dNUCIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQR08iLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFBDIiwicGFpZFVwVG8iOiIyMDIzLTA0LTE4IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBSQiIsInBhaWRVcFRvIjoiMjAyMy0wNC0xOCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQU1ciLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUlMiLCJwYWlkVXBUbyI6IjIwMjMtMDQtMTgiLCJleHRlbmRlZCI6dHJ1ZX1dLCJtZXRhZGF0YSI6IjAxMjAyMjA3MTVMUEFBMDA2MDA4IiwiaGFzaCI6IjMzMjc1MzQ1LzE2OTgzMDkyOjE3NTA1Njk2NTMiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-EOufLPiykodPlQXl6v9pAd7geesvSLDca88HhDihCP5LSabX33BwTVfkSQaLUah0qyH84Shzp2NZv+LZK2dTXwwF1XCYq/9Lmt3iwlFovsrifhrfTGQCEXrlyzigZdwl+cpKysVKS9DdVKQIl64L0xQkX1ZrjOhofWUMFrgNwqie1xNn9iSSnbh/NiZ0/b7kdfMukFX995RFNkPMCvqwrGpNLFHnPoiEGqIKCh+2o8YQaO7AxPHckOLZLAF+l5dIkiM7tFdICOBT/GCEEPXG2CsVoufNvGmkdSUPr6j6+EuMAv+0iBscxQrkjfqH3wED6jXR9Pjl/+6OGaT6T4YhJg==-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDCP4uk4SlVdA5nuA3DQC+NsEnZS9npFnO0zrmMWcz1++q2UWJNuGTh0rwi+3fUJIArfvVh7gNtIp93rxjtrQAuf4/Fa6sySp4c32MeFACfC0q+oUoWebhOIaYTYUxm4LAZ355vzt8YeDPmvWKxA81udqEk4gU9NNAOz1Um5/8LyR8SGsSc4EDBRSjcMWMwMkYSauGqGcEUK8WhfplsyF61lKSOFA6VmfUmeDK15rUWWLbOMKgn2cxFA98A+s74T9Oo96CU7rp/umDXvhnyhAXSukw/qCGOVhwKR8B6aeDtoBWQgjnvMtPgOUPRTPkPGbwPwwDkvAHYiuKJ7Bd2wH7rAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBAB2J1ysRudbkqmkUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/wi9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//lOmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH/0onD</code></p>
<p><strong><em>6、如果粘贴激活码之后是下图这个样子，说明激活码失效了！</em></strong></p>
<p>如果激活码失效，可前往这个网址重新获取，<a href="http://idea.javatiku.cn/" target="_blank" rel="noopener">http://idea.javatiku.cn/ </a> 选择Pycharm注册码在线生成。</p>
<img src="http://www.javatiku.cn/usr/img/f9991b4d29126a69d6fbbdb04c853a90.png" alt="激活码无效.png" title="激活码无效.png">

<p><strong><em>7、激活码粘贴之后如下图所示，就说明有效，然后我们点击 Activate 激活。</em></strong></p>
<img src="http://www.javatiku.cn/usr/img/d58480cebe35635b5178ed0a8c62b05e.png" alt="3.png" title="3.png">

<p>然后重新打开PyCharm就可以使用了，来源 <a href="http://www.javatiku.cn/pycharm/3892.html" target="_blank" rel="noopener">http://www.javatiku.cn/pycharm/3892.html</a></p>
<p>还有其他软件破解参考文献的：</p>
<p>（一键永久激活）Intellij IDEA最新2022.2版本永久激活码（支持全家桶）<br><a href="http://www.javatiku.cn/idea/3866.html" target="_blank" rel="noopener">http://www.javatiku.cn/idea/3866.html</a></p>
<p>（一键永久激活）WebStorm最新2022.2版本永久激活码（支持全家桶）<br><a href="http://www.javatiku.cn/webstorm/3879.html" target="_blank" rel="noopener">http://www.javatiku.cn/webstorm/3879.html</a></p>
<p>（一键永久激活）PyCharm最新2022.2版本永久激活码（支持全家桶）<br><a href="http://www.javatiku.cn/pycharm/3892.html" target="_blank" rel="noopener">http://www.javatiku.cn/pycharm/3892.html</a></p>
<p>（一键永久激活）GoLand最新2022.2版本永久激活码（支持全家桶）<br><a href="http://www.javatiku.cn/goland/3905.html" target="_blank" rel="noopener">http://www.javatiku.cn/goland/3905.html</a></p>
<p>（一键永久激活）PhpStorm最新2022.2版本永久激活码（支持全家桶）<br><a href="http://www.javatiku.cn/tools/3918.html" target="_blank" rel="noopener">http://www.javatiku.cn/tools/3918.html</a></p>
<p>永久激活失败，请看解决方案：<a href="http://www.javatiku.cn/idea/1511.htmls" target="_blank" rel="noopener">http://www.javatiku.cn/idea/1511.htmls</a></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>IOS项目单独脚本自动化打包</title>
    <url>/2023/01/20/technology20230120161001/</url>
    <content><![CDATA[<h5 id="通过脚本自动化打包IOS项目"><a href="#通过脚本自动化打包IOS项目" class="headerlink" title="通过脚本自动化打包IOS项目"></a>通过脚本自动化打包IOS项目</h5><p>如果想要单个包批量打包请查看<a href="https://kziwws.github.io/2023/01/21/technology20230121151206/">IOS脚本批量打包</a></p>
<h5 id="一、Shell脚本"><a href="#一、Shell脚本" class="headerlink" title="一、Shell脚本"></a><strong>一、Shell脚本</strong></h5><p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。<a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener">shell脚本基础学习</a></p>
<p>在终端输入man xcodebuild，可以看到Description里面有介绍用法。<br><a href="https://www.cnblogs.com/drewgg/p/15785467.html" target="_blank" rel="noopener">xcodebuild指令文档学习</a></p>
<p><strong>项目目录结构</strong></p>
<p><a href="https://imgse.com/i/pp9LgDP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp9LgDP.png" alt="pp9LgDP.png"></a></p>
<p><strong>结构说明：</strong></p>
<p>SinglePackageScript.sh : 为脚本文件 (可不修改)</p>
<p>各个Plist：为打包4种打包模式 AdHoc、AppStore、Development、Enterprise （不需要动）</p>
<a id="more"></a>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">plist</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="meta-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>method<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>development<span class="tag">&lt;/<span class="name">string</span>&gt;</span>//这儿development、enterprise、ad-hoc、app-store四种</span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>signingStyle<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>automatic<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>compileBitcode<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">false</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>二、开始打包操作</strong></p>
<ul>
<li>操作脚本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Users/mac/Desktop/您的项目名称/SinglePackageScript</span><br><span class="line">sh SinglePackageScript.sh</span><br></pre></td></tr></table></figure>

<p>上面要cd到当前项目文件夹下的SinglePackageScript脚本目录，原因是为了当其他项目在不同的目录路径下时，获取到项目层级会不一致，不同的电脑上可能不是同一个，所以cd项目时需要先项目目录文件下SinglePackageScript目录下。</p>
<p>所有脚本如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  Script.sh</span></span><br><span class="line"><span class="comment">#  Package</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  Created by wws on 2023/02/25.</span></span><br><span class="line"><span class="comment">#  Copyright © 2023 年 wws. All rights reserved.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.Configuration Info</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否编译工作空间 (例:若是用Cocopods管理的.xcworkspace项目,赋值true;用Xcode默认创建的.xcodeproj,赋值false)</span></span><br><span class="line">is_workspace=<span class="string">"true"</span></span><br><span class="line"><span class="comment"># 指定要打包编译的方式 : Release,Debug...</span></span><br><span class="line">build_configuration=<span class="string">"Release"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回上一级目录,进入项目工程目录</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># 获取项目名称</span></span><br><span class="line">projectName=`find . -name *.xcodeproj | awk -F <span class="string">"[/.]"</span> <span class="string">'&#123;print $(NF-1)&#125;'</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment"># Scheme Name</span></span><br><span class="line">schemeName=<span class="variable">$&#123;projectName&#125;</span></span><br><span class="line"><span class="comment"># 打包所有生成路径</span></span><br><span class="line">ipaPath=~/Desktop/<span class="variable">$&#123;schemeName&#125;</span></span><br><span class="line"><span class="comment"># 临时生成APP路径</span></span><br><span class="line">buildDir=<span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;schemeName&#125;</span>.xcarchive"</span></span><br><span class="line"></span><br><span class="line">plistPath=<span class="string">"./SinglePackageScript"</span></span><br><span class="line"><span class="comment"># 导出ipa所需要的plist文件路径 (默认为AdHocExportOptionsPlist.plist)</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AdHocExportOptionsPlist.plist"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始时间</span></span><br><span class="line">beginTime=`date +%s`</span><br><span class="line"></span><br><span class="line"><span class="comment"># 蒲公英分发参数 不分发可忽略 默认不分发 下面的两个KEY是默认测试的网址对应KEY</span></span><br><span class="line">isUploadPgyer=0</span><br><span class="line">USERKEY=<span class="string">"xxx"</span></span><br><span class="line">APIKEY=<span class="string">"xxx"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fir平台分发参数 默认分发</span></span><br><span class="line">isUploadFir=1</span><br><span class="line">FirApiToken=<span class="string">"931b41960fd41496b946e2442c910adb97"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AdHoc,AppStore,Enterprise三种打包方式的区别: http://blog.csdn.net/lwjok2007/article/details/46379945</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[36;1m请选择打包方式(输入序号,按回车即可) \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m1. AdHoc       \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m2. AppStore    \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m3. Enterprise  \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m4. Development \033[0m"</span></span><br><span class="line"> <span class="comment">#读取用户输入并存到变量里</span></span><br><span class="line"> <span class="built_in">read</span> parameter</span><br><span class="line"> sleep 0.5</span><br><span class="line"> method=<span class="string">"<span class="variable">$parameter</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判读用户是否有输入</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$method</span>"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$method</span>"</span> = <span class="string">"1"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AdHocExportOptionsPlist.plist"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">"<span class="variable">$method</span>"</span> = <span class="string">"2"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AppStoreExportOptionsPlist.plist"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">"<span class="variable">$method</span>"</span> = <span class="string">"3"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/EnterpriseExportOptionsPlist.plist"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">"<span class="variable">$method</span>"</span> = <span class="string">"4"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/DevelopmentExportOptionsPlist.plist"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"输入的参数无效!!!"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\033[32m*************************  开始构建项目  *************************  \033[0m"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清除缓存</span></span><br><span class="line">rm -rf mkdir <span class="variable">$&#123;ipaPath&#125;</span></span><br><span class="line"><span class="comment"># 创建打包目录</span></span><br><span class="line">mkdir <span class="variable">$&#123;ipaPath&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定输出文件目录不存在则创建</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$ipaPath</span>"</span> ] ; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$ipaPath</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">mkdir -pv <span class="variable">$ipaPath</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build 生成 APPs</span></span><br><span class="line"><span class="comment"># 判断编译的项目类型是workspace还是project</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">$is_workspace</span> ; <span class="keyword">then</span></span><br><span class="line"><span class="comment"># 编译前清理工程</span></span><br><span class="line">xcodebuild clean -workspace <span class="variable">$&#123;projectName&#125;</span>.xcworkspace \</span><br><span class="line">                 -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                 -configuration <span class="variable">$&#123;build_configuration&#125;</span></span><br><span class="line"></span><br><span class="line">xcodebuild archive -workspace <span class="variable">$&#123;projectName&#125;</span>.xcworkspace \</span><br><span class="line">                   -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                   -configuration <span class="variable">$&#123;build_configuration&#125;</span> \</span><br><span class="line">                   -archivePath <span class="variable">$&#123;buildDir&#125;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment"># 编译前清理工程</span></span><br><span class="line">xcodebuild clean -project <span class="variable">$&#123;projectName&#125;</span>.xcodeproj \</span><br><span class="line">                 -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                 -configuration <span class="variable">$&#123;build_configuration&#125;</span></span><br><span class="line"></span><br><span class="line">xcodebuild archive -project <span class="variable">$&#123;projectName&#125;</span>.xcodeproj \</span><br><span class="line">                   -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                   -configuration <span class="variable">$&#123;build_configuration&#125;</span> \</span><br><span class="line">                   -archivePath <span class="variable">$&#123;buildDir&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  检查是否构建成功</span></span><br><span class="line"><span class="comment">#  xcarchive 实际是一个文件夹不是一个文件所以使用 -d 判断</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$buildDir</span>"</span> ] ; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\033[32;1m项目构建成功  \033[0m"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\033[31;1m项目构建失败  \033[0m"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"33[31m appName:<span class="variable">$projectName</span> n 33[0m"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成 ipa</span></span><br><span class="line">xcodebuild -exportArchive -archivePath <span class="variable">$&#123;buildDir&#125;</span> -exportOptionsPlist <span class="variable">$&#123;exportOptionsPlistPath&#125;</span> -exportPath <span class="variable">$&#123;ipaPath&#125;</span> -allowProvisioningUpdates <span class="variable">$&#123;YES&#125;</span> -allowProvisioningDeviceRegistration <span class="variable">$&#123;YES&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ $? = 0 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"33[31m n 生成 IPA 成功 nnnnn33[0m"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"33[31m n 生成 IPA 失败 nnnnn33[0m"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">rm -rf <span class="variable">$&#123;buildDir&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动</span></span><br><span class="line"><span class="comment">#mv $&#123;ipaPath&#125;/$displayName.ipa $&#123;displayName&#125;/$appName</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传fir</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$isUploadFir</span> = 1 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"正在上传fir..."</span></span><br><span class="line">    fir p <span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;displayName&#125;</span>/<span class="variable">$&#123;displayName&#125;</span>.ipa"</span> -T <span class="variable">$&#123;FirApiToken&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传蒲公英分发平台</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$ISUPLOAD</span> = 1 ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"正在上传蒲公英..."</span></span><br><span class="line">curl -F <span class="string">"file=@<span class="variable">$ipaPath</span>/<span class="variable">$&#123;displayName&#125;</span>/<span class="variable">$&#123;displayName&#125;</span>.ipa"</span> -F <span class="string">"uKey=<span class="variable">$USERKEY</span>"</span> -F <span class="string">"_api_key=<span class="variable">$APIKEY</span>"</span> http://www.pgyer.com/apiv1/app/upload</span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结束时间</span></span><br><span class="line">endTime=`date +%s`</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"打包时间$[ endTime - beginTime ]秒"</span></span><br></pre></td></tr></table></figure>

<p> 判读用户是否有输入 1、AdHoc 2、AppStore 3、Enterprise 4、Development 等待生成ipa</p>
<blockquote>
<p>如果打包出现证书匹配问题，如果选择的auto 脚本里需要配置，上面脚本已经配置。</p>
<p> -allowProvisioningUpdates ${YES}</p>
<p> -allowProvisioningDeviceRegistration ${YES}</p>
</blockquote>
<blockquote>
<p>如果打包报其他错误，请先在Xcode项目上保证能archive，先解决掉代码上的错误才能保证脚本打包。</p>
</blockquote>
<p><strong>三、生成产品包</strong></p>
<ul>
<li>打包生成</li>
</ul>
<p><a href="https://imgse.com/i/pp9Lp0f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp9Lp0f.png" alt="pp9Lp0f.png"></a></p>
<p>如果上传fri,对应的二维码就是生成在fir平台的安装包</p>
<ul>
<li>如果需要上传fir平台</li>
</ul>
<p>如果没有安装fir插件，请先安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo gem install fir-cli –no-ri –no-rdoc</span><br></pre></td></tr></table></figure>

<p>执行成功会生成对应的项目文件目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"fir平台..."</span></span><br><span class="line">fir p <span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;displayName&#125;</span>/<span class="variable">$&#123;displayName&#125;</span>.ipa -T 931b41960f7496b946ei2c910pdb97</span><br></pre></td></tr></table></figure>

<p>上面-T后面的token需要替换成你自己，上面只是例子随便的值，如果想要知道如果获取fir的token登陆fir官网看以下图</p>
<p><a href="https://imgse.com/i/pp9q2Y4" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp9q2Y4.png" alt="pp9q2Y4.png"></a></p>
<ul>
<li>如果需要上传蒲公英pgyer分发平台</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"正在上传蒲公英..."</span></span><br><span class="line">curl -F <span class="string">"file=@<span class="variable">$ipaPath</span>/<span class="variable">$displayName</span>/<span class="variable">$displayName</span>.ipa"</span> -F <span class="string">"uKey=<span class="variable">$USERKEY</span>"</span> -F <span class="string">"_api_key=<span class="variable">$APIKEY</span>"</span> http://www.pgyer.com/apiv1/app/upload</span><br></pre></td></tr></table></figure>

<p>方法不累述 USERKEY和APIKEY，上面默认的脚本不上传fir和pgyer，你可以根据自己需求，打开注释，和修改是否需要上传蒲公英的状态开关。</p>
]]></content>
      <categories>
        <category>ios</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title>利用python脚本拆解游戏中的图集资源</title>
    <url>/2023/03/14/technology20230314101225/</url>
    <content><![CDATA[<p>如何使用Python对图集进行裁剪并保存，以便在开发游戏、UI设计等领域中使用。</p>
<p>以下是具体的步骤：</p>
<p>在运行这个脚本之前，需要确保你的Python环境中已经安装了以下库：</p>
<p><code>Pillow</code>：用于图像处理和操作，可以通过<code>pip install Pillow</code>命令进行安装；</p>
<p><code>biplist</code>：用于读取和写入plist文件，可以通过<code>pip install biplist</code>命令进行安装。</p>
<h4 id="准备文件路径参数"><a href="#准备文件路径参数" class="headerlink" title="准备文件路径参数"></a>准备文件路径参数</h4><p>首先需要准备好图集和plist文件的路径，以及裁剪后图片保存的路径。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plist_path = <span class="string">'/Users/您的电脑名字/Desktop/yuobm/map.plist'</span></span><br><span class="line">img_path = <span class="string">'/Users/您的电脑名字/Desktop/yuobm/map.png'</span></span><br><span class="line">save_path = <span class="string">'/Users/您的电脑名字/Desktop/yuobm/frames'</span></span><br></pre></td></tr></table></figure>

<h4 id="加载图集信息"><a href="#加载图集信息" class="headerlink" title="加载图集信息"></a>加载图集信息</h4><p>使用<code>biplist</code>库读取plist文件，并获取图集文件名。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(plist_path, <span class="string">'rb'</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    root = biplist.readPlist(fp)</span><br><span class="line">file_name = img_path</span><br><span class="line">image = Image.open(file_name)</span><br></pre></td></tr></table></figure>

<h4 id="遍历所有图片信息并裁剪保存"><a href="#遍历所有图片信息并裁剪保存" class="headerlink" title="遍历所有图片信息并裁剪保存"></a>遍历所有图片信息并裁剪保存</h4><p>循环遍历所有图片信息，获取当前图片的名称和信息，并根据信息进行裁剪并保存。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> image_info <span class="keyword">in</span> root[<span class="string">'frames'</span>]:</span><br><span class="line">    image_name = os.path.splitext(image_info)[<span class="number">0</span>] + <span class="string">".png"</span></span><br><span class="line">    info = root[<span class="string">'frames'</span>][image_info][<span class="string">'frame'</span>]</span><br><span class="line">    </span><br><span class="line">    frame_str = info</span><br><span class="line">    x = int(frame_str[<span class="number">2</span>:frame_str.index(<span class="string">','</span>, <span class="number">2</span>)])</span><br><span class="line">    y = int(frame_str[frame_str.index(<span class="string">','</span>, <span class="number">2</span>) + <span class="number">1</span>:frame_str.index(<span class="string">'&#125;'</span>, <span class="number">2</span>)])</span><br><span class="line">    width = int(frame_str[frame_str.rindex(<span class="string">'&#123;'</span>) + <span class="number">1</span>:frame_str.rindex(<span class="string">','</span>, frame_str.rindex(<span class="string">'&#123;'</span>))])</span><br><span class="line">    height = int(frame_str[frame_str.rindex(<span class="string">','</span>) + <span class="number">1</span>:<span class="number">-2</span>])</span><br><span class="line"></span><br><span class="line">    rotated = root[<span class="string">'frames'</span>][image_info].get(<span class="string">'rotated'</span>, <span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">if</span> rotated:</span><br><span class="line">        crop_image = image.crop((x, y, x + height, y + width))</span><br><span class="line">        crop_image = crop_image.transpose(Image.ROTATE_90)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        crop_image = image.crop((x, y, x + width, y + height))</span><br><span class="line"></span><br><span class="line">    save_file = os.path.join(save_path, image_name)</span><br><span class="line">    crop_image.save(save_file)</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p><strong>以下是所有python的详细脚本:</strong> </p>
<p><font color='red'>里面的plist_path、img_path、save_path等需要换成你自己的路径。</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import os</span><br><span class="line">import biplist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件路径参数</span></span><br><span class="line">plist_path = <span class="string">'/Users/xxx/Desktop/yuobm/map.plist'</span></span><br><span class="line">img_path = <span class="string">'/Users/xxx/Desktop/yuobm/map.png'</span></span><br><span class="line">save_path = <span class="string">'/Users/xxx/Desktop/yuobm/frames'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载图集信息</span></span><br><span class="line">with open(plist_path, <span class="string">'rb'</span>) as fp:</span><br><span class="line">    root = biplist.readPlist(fp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取图集文件名</span></span><br><span class="line">file_name = img_path</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载图集</span></span><br><span class="line">image = Image.open(file_name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> not os.path.exists(save_path):</span><br><span class="line">    os.makedirs(save_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环遍历所有图片信息</span></span><br><span class="line"><span class="keyword">for</span> image_info <span class="keyword">in</span> root[<span class="string">'frames'</span>]:</span><br><span class="line">    <span class="comment"># 获取当前图片的名称和信息</span></span><br><span class="line">    image_name = os.path.splitext(image_info)[0] + <span class="string">".png"</span></span><br><span class="line">    info = root[<span class="string">'frames'</span>][image_info][<span class="string">'frame'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 裁剪并保存图片</span></span><br><span class="line">    frame_str = info</span><br><span class="line">    x = int(frame_str[2:frame_str.index(<span class="string">','</span>, 2)])</span><br><span class="line">    y = int(frame_str[frame_str.index(<span class="string">','</span>, 2) + 1:frame_str.index(<span class="string">'&#125;'</span>, 2)])</span><br><span class="line">    width = int(frame_str[frame_str.rindex(<span class="string">'&#123;'</span>) + 1:frame_str.rindex(<span class="string">','</span>, frame_str.rindex(<span class="string">'&#123;'</span>))])</span><br><span class="line">    height = int(frame_str[frame_str.rindex(<span class="string">','</span>) + 1:-2])</span><br><span class="line"></span><br><span class="line">    rotated = root[<span class="string">'frames'</span>][image_info].get(<span class="string">'rotated'</span>, False)</span><br><span class="line">    <span class="keyword">if</span> rotated:</span><br><span class="line">        <span class="comment"># 需要旋转90度</span></span><br><span class="line">        crop_image = image.crop((x, y, x + height, y + width))</span><br><span class="line">        crop_image = crop_image.transpose(Image.ROTATE_90)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        crop_image = image.crop((x, y, x + width, y + height))</span><br><span class="line"></span><br><span class="line">    save_file = os.path.join(save_path, image_name)</span><br><span class="line">    crop_image.save(save_file)</span><br></pre></td></tr></table></figure>

<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>这就是使用Python对图集进行裁剪并保存的方法。通过以上步骤，可以实现快速、高效地处理图集资源。</p>
]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
      </tags>
  </entry>
  <entry>
    <title>IOS项目脚本自动化批量打包并上传第三方平台</title>
    <url>/2023/01/21/technology20230121151206/</url>
    <content><![CDATA[<h5 id="由于公司项目需求然后想要一个项目打包多个包，然后app名字、bundleId、服务器连接URL、appIocn、app项目内容渠道参数不一样，针对网上看了一些教程和方式，现在总结一下。"><a href="#由于公司项目需求然后想要一个项目打包多个包，然后app名字、bundleId、服务器连接URL、appIocn、app项目内容渠道参数不一样，针对网上看了一些教程和方式，现在总结一下。" class="headerlink" title="由于公司项目需求然后想要一个项目打包多个包，然后app名字、bundleId、服务器连接URL、appIocn、app项目内容渠道参数不一样，针对网上看了一些教程和方式，现在总结一下。"></a>由于公司项目需求然后想要一个项目打包多个包，然后app名字、bundleId、服务器连接URL、appIocn、app项目内容渠道参数不一样，针对网上看了一些教程和方式，现在总结一下。</h5><p>如果想要知道单个项目脚本打包请查看<a href="https://kziwws.github.io/2023/01/20/technology20230120161001/">IOS脚本单独打包</a></p>
<h5 id="一、bash脚本"><a href="#一、bash脚本" class="headerlink" title="一、bash脚本"></a><strong>一、bash脚本</strong></h5><p>bash 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。bash 既是一种命令语言，又是一种程序设计语言。<a href="https://www.runoob.com/linux/linux-bash.html" target="_blank" rel="noopener">bash脚本基础学习</a></p>
<p><strong>项目目录结构</strong></p>
<p><a href="https://imgse.com/i/pp97uJs" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp97uJs.png" alt="pp97uJs.png"></a></p>
<p><strong>结构说明：</strong></p>
<p>MutaPackageScript.sh : 为脚本文件 (批量时部分配置修改)</p>
<p>Plist：为打包4种打包模式 AdHoc、AppStore、Development、Enterprise （不需要动）</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">plist</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="meta-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>method<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>development<span class="tag">&lt;/<span class="name">string</span>&gt;</span>//这儿development、enterprise、ad-hoc、app-store四种</span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>signingStyle<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>automatic<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>compileBitcode<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">false</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>AppIcon: 为要打包的替换的AppIcon图系列，这儿首先要用工具生成好所有图，名字必须是AppIcon~系列的，原因是同一个包脚本会替换覆盖操作。我是使用的一个Asset Catalog Creator 你自己使用其他的也行，能生成就行。(需要使用工具生成)</p>
<p><a href="https://imgse.com/i/pp9bZCj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp9bZCj.md.png" alt="pp9bZCj.md.png"></a></p>
<p>目录子目录文件夹就是当打包多个的时候AppIcon文件目录，名字对应的脚本文件的里的配置文件appIconArr参数的名字，修改app文件配置参数，所以如果新增APP时请修改新增此脚本参数，不然会找不到APPIcon文件图片替换目录。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">appIconArr=(</span><br><span class="line">   <span class="string">"yqb_AppIcon"</span></span><br><span class="line">   <span class="string">"lebzs_AppIcon"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>这儿启动图和引导图都可以放在这个里面，然后会同一替换，主要图片名字记得保持一致，例如在项目中启动图叫</p>
<p>launch_s.png，重新打包的时候也请命名为launch_s.png放在AppIcon文件夹包里。</p>
<p><a href="https://imgse.com/i/ppCpfpT" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/ppCpfpT.png" alt="ppCpfpT.png"></a></p>
<p><strong>二、开始打包操作</strong></p>
<ul>
<li>操作脚本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Users/mac/Desktop/您的项目名称/MutaPackageScript</span><br><span class="line">sh MutaPackageScript.sh</span><br></pre></td></tr></table></figure>

<p>上面要cd到当前项目文件夹下的MutaPackageScript脚本目录，原因是为了当其他项目在不同的目录路径下时，获取到项目层级会不一致，不同的电脑上可能不是同一个，所以cd项目时需要先项目目录文件下MutaPackageScript目录下。</p>
<p>所有脚本如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">#  Script.sh</span><br><span class="line">#  Package</span><br><span class="line">#  Created by wws on 2023/02/25.</span><br><span class="line">#  Copyright © 2023 年 wws. All rights reserved.</span><br><span class="line"></span><br><span class="line"># 1.Configuration Info</span><br><span class="line"></span><br><span class="line"># 是否编译工作空间 (例:若是用Cocopods管理的.xcworkspace项目,赋值true;用Xcode默认创建的.xcodeproj,赋值false)</span><br><span class="line">is_workspace=<span class="string">"true"</span></span><br><span class="line"># 指定要打包编译的方式 : Release,Debug...</span><br><span class="line">build_configuration=<span class="string">"Release"</span></span><br><span class="line"></span><br><span class="line"># 返回上一级目录,进入项目工程目录</span><br><span class="line">cd ..</span><br><span class="line"># 获取项目名称</span><br><span class="line">projectName=<span class="string">`find . -name *.xcodeproj | awk -F "[/.]" '&#123;print $(NF-1)&#125;'`</span></span><br><span class="line"># Scheme Name</span><br><span class="line">schemeName=$&#123;projectName&#125;</span><br><span class="line">#cd ~/Desktop/$&#123;schemeName&#125;</span><br><span class="line"># 图标路径</span><br><span class="line">iconPath=<span class="string">"./MutaPackageScript/AppIcon"</span></span><br><span class="line"># 打包所有生成路径</span><br><span class="line">ipaPath=~<span class="regexp">/Desktop/</span>IPAS</span><br><span class="line"># 临时生成APP路径</span><br><span class="line">buildDir=<span class="string">"$&#123;ipaPath&#125;/build/$&#123;schemeName&#125;.xcarchive"</span></span><br><span class="line"></span><br><span class="line">plistPath=<span class="string">"./MutaPackageScript/Plist"</span></span><br><span class="line"># 导出ipa所需要的plist文件路径 (默认为AdHocExportOptionsPlist.plist)</span><br><span class="line">exportOptionsPlistPath=<span class="string">"$&#123;plistPath&#125;/AdHocExportOptionsPlist.plist"</span></span><br><span class="line"></span><br><span class="line">#app名字</span><br><span class="line">displayNameArr=(</span><br><span class="line">    <span class="string">"app1的名字"</span></span><br><span class="line">    <span class="string">"app2的名字"</span></span><br><span class="line">)</span><br><span class="line">#app的bundleId</span><br><span class="line">bundleIdentifierArr=(</span><br><span class="line">    <span class="string">"com.qyf.qyf"</span></span><br><span class="line">    <span class="string">"com.qyf.ysf"</span></span><br><span class="line">)</span><br><span class="line">#获取URL链接的主机地址编号</span><br><span class="line">hostNumberArr=(</span><br><span class="line">    <span class="string">"A022"</span></span><br><span class="line">    <span class="string">"A021"</span></span><br><span class="line">)</span><br><span class="line">#修改app文件地址</span><br><span class="line">appIconArr=(</span><br><span class="line">    <span class="string">"yqb_AppIcon"</span></span><br><span class="line">    <span class="string">"lebzs_AppIcon"</span></span><br><span class="line">)</span><br><span class="line">#打包渠道号</span><br><span class="line">channelCodeArr=(</span><br><span class="line">    <span class="string">"112"</span></span><br><span class="line">    <span class="string">"115"</span></span><br><span class="line">)</span><br><span class="line">#版本号</span><br><span class="line">versionArr=(</span><br><span class="line">    <span class="string">"1.0.3"</span></span><br><span class="line">    <span class="string">"1.0.4"</span></span><br><span class="line">)</span><br><span class="line">#服务器默认连接的地址</span><br><span class="line">serverArr=(</span><br><span class="line">    <span class="string">"https://www.xxx.com/app1/"</span></span><br><span class="line">    <span class="string">"https://www.xxx.com/app2/"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># 开始时间</span><br><span class="line">beginTime=<span class="string">`date +%s`</span></span><br><span class="line"></span><br><span class="line"># 清除缓存</span><br><span class="line">rm -rf mkdir $&#123;ipaPath&#125;</span><br><span class="line"># 创建打包目录</span><br><span class="line">mkdir $&#123;ipaPath&#125;</span><br><span class="line"></span><br><span class="line"># 蒲公英分发参数 不分发可忽略 默认不分发 下面的两个KEY是默认测试的网址对应KEY 换成你自己的</span><br><span class="line">isUploadPgyer=<span class="number">0</span></span><br><span class="line">USERKEY=<span class="string">"xxx"</span></span><br><span class="line">APIKEY=<span class="string">"xxx"</span></span><br><span class="line"></span><br><span class="line"># fir分发参数 不分发可忽略 默认分发 Token换成你自己的</span><br><span class="line">isUploadFir=<span class="number">1</span></span><br><span class="line">FirApiToken=<span class="string">"931b41960fd413455496b9465ec910adb97"</span></span><br><span class="line"></span><br><span class="line"># AdHoc,AppStore,Enterprise,Development四种打包方式</span><br><span class="line"> echo <span class="string">"\033[36;1m请选择打包方式(输入序号,按回车即可) \033[0m"</span></span><br><span class="line"> echo <span class="string">"\033[33;1m1. AdHoc       \033[0m"</span></span><br><span class="line"> echo <span class="string">"\033[33;1m2. AppStore    \033[0m"</span></span><br><span class="line"> echo <span class="string">"\033[33;1m3. Enterprise  \033[0m"</span></span><br><span class="line"> echo <span class="string">"\033[33;1m4. Development \033[0m"</span></span><br><span class="line"> #读取用户输入并存到变量里</span><br><span class="line"> read parameter</span><br><span class="line"> sleep <span class="number">0.5</span></span><br><span class="line"> method=<span class="string">"$parameter"</span></span><br><span class="line"></span><br><span class="line"># 判读用户是否有输入</span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"$method"</span> ]</span><br><span class="line">then</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"$method"</span> = <span class="string">"1"</span> ] ; then</span><br><span class="line">    exportOptionsPlistPath=<span class="string">"$&#123;plistPath&#125;/AdHocExportOptionsPlist.plist"</span></span><br><span class="line">    elif [ <span class="string">"$method"</span> = <span class="string">"2"</span> ] ; then</span><br><span class="line">    exportOptionsPlistPath=<span class="string">"$&#123;plistPath&#125;/AppStoreExportOptionsPlist.plist"</span></span><br><span class="line">    elif [ <span class="string">"$method"</span> = <span class="string">"3"</span> ] ; then</span><br><span class="line">    exportOptionsPlistPath=<span class="string">"$&#123;plistPath&#125;/EnterpriseExportOptionsPlist.plist"</span></span><br><span class="line">    elif [ <span class="string">"$method"</span> = <span class="string">"4"</span> ] ; then</span><br><span class="line">    exportOptionsPlistPath=<span class="string">"$&#123;plistPath&#125;/DevelopmentExportOptionsPlist.plist"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    echo <span class="string">"输入的参数无效!!!"</span></span><br><span class="line">    exit <span class="number">1</span></span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo <span class="string">"\033[32m*************************  开始构建项目  *************************  \033[0m"</span></span><br><span class="line"></span><br><span class="line">path=<span class="string">"$&#123;ipaPath&#125;/build"</span></span><br><span class="line"># 删除临时旧的xcarchive文件和打包项目</span><br><span class="line">rm -rf mkdir $&#123;path&#125;</span><br><span class="line">mkdir $&#123;path&#125;</span><br><span class="line"></span><br><span class="line"># 指定输出文件目录不存在则创建</span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"$path"</span> ] ; then</span><br><span class="line">echo $path</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">mkdir -pv $path</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># Build 生成 APPs</span><br><span class="line"># 判断编译的项目类型是workspace还是project</span><br><span class="line"><span class="keyword">if</span> $is_workspace ; then</span><br><span class="line"># 编译前清理工程</span><br><span class="line">xcodebuild clean -workspace $&#123;projectName&#125;.xcworkspace \</span><br><span class="line">                 -scheme $&#123;schemeName&#125; \</span><br><span class="line">                 -configuration $&#123;build_configuration&#125;</span><br><span class="line"></span><br><span class="line">xcodebuild archive -workspace $&#123;projectName&#125;.xcworkspace \</span><br><span class="line">                   -scheme $&#123;schemeName&#125; \</span><br><span class="line">                   -configuration $&#123;build_configuration&#125; \</span><br><span class="line">                   -archivePath $&#123;buildDir&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"># 编译前清理工程</span><br><span class="line">xcodebuild clean -project $&#123;projectName&#125;.xcodeproj \</span><br><span class="line">                 -scheme $&#123;schemeName&#125; \</span><br><span class="line">                 -configuration $&#123;build_configuration&#125;</span><br><span class="line"></span><br><span class="line">xcodebuild archive -project $&#123;projectName&#125;.xcodeproj \</span><br><span class="line">                   -scheme $&#123;schemeName&#125; \</span><br><span class="line">                   -configuration $&#123;build_configuration&#125; \</span><br><span class="line">                   -archivePath $&#123;buildDir&#125;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">#  检查是否构建成功</span><br><span class="line">#  xcarchive 实际是一个文件夹不是一个文件所以使用 -d 判断</span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"$buildDir"</span> ] ; then</span><br><span class="line">echo <span class="string">"\033[32;1m项目构建成功  \033[0m"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">echo <span class="string">"\033[31;1m项目构建失败  \033[0m"</span></span><br><span class="line">exit <span class="number">1</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">appPackNum=$&#123;#displayNameArr[*]&#125;</span><br><span class="line"># ----全部打包----</span><br><span class="line"><span class="keyword">for</span> (( i=<span class="number">0</span>; i&lt;appPackNum; i++ )); <span class="keyword">do</span></span><br><span class="line">    # App DisPlay Name 打包名字</span><br><span class="line">    displayName=$&#123;displayNameArr[$&#123;i&#125;]&#125;</span><br><span class="line">    # App BundleIdentifier 打包标识ID</span><br><span class="line">    bundleIdentifier=$&#123;bundleIdentifierArr[$&#123;i&#125;]&#125;</span><br><span class="line">    # App Icon File Name 打包AppIocn文件路径</span><br><span class="line">    appIcon=$&#123;appIconArr[$&#123;i&#125;]&#125;</span><br><span class="line">    # App channelCode 打包渠道</span><br><span class="line">    channelCode=$&#123;channelCodeArr[$&#123;i&#125;]&#125;</span><br><span class="line">    # App hostNumber 请求的主机地址编号</span><br><span class="line">    hostNumber=$&#123;hostNumberArr[$&#123;i&#125;]&#125;</span><br><span class="line">    # App version 版本号</span><br><span class="line">    version=$&#123;versionArr[$&#123;i&#125;]&#125;</span><br><span class="line">    # App hostUrl 服务器地址</span><br><span class="line">    hostUrl=$&#123;serverArr[$&#123;i&#125;]&#125;</span><br><span class="line">    </span><br><span class="line">    # 创建不同 app ipa 目录</span><br><span class="line">    rm -rf $ipaPath/$&#123;displayName&#125;</span><br><span class="line">    mkdir $ipaPath/$&#123;displayName&#125;</span><br><span class="line">    </span><br><span class="line">    echo <span class="string">"33[31m appName:$displayName appIconName:$appIcon appChannelName:$channelCode bundleID:$bundleIdentifier n 33[0m"</span></span><br><span class="line">    </span><br><span class="line">    # 将对应的 icon 复制到需要修改的 app 的目录下</span><br><span class="line">    # .xcarchive 文件下对应的Applications文件路径</span><br><span class="line">    Applications_Path=$&#123;buildDir&#125;/Products/Applications</span><br><span class="line">    cp -Rf <span class="string">`<span class="subst">$&#123;iconPath&#125;</span>/<span class="subst">$&#123;appIcon&#125;</span>/*`</span> <span class="string">`$Applications_Path/*.app`</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [[ $? = <span class="number">0</span> ]]; then</span><br><span class="line">    echo <span class="string">"33[31m 修改 icon 成功33[0m"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    echo <span class="string">"33[31m 修改 icon 失败33[0m"</span></span><br><span class="line">    fi</span><br><span class="line">    # 修改 Plist</span><br><span class="line">    # plist路径</span><br><span class="line">    infoPlist_File_Path=<span class="string">`$Applications_Path/*.app/info.plist`</span></span><br><span class="line"></span><br><span class="line">    /usr/libexec/PlistBuddy -c <span class="string">"Set :CFBundleName  $displayName"</span> $infoPlist_File_Path</span><br><span class="line">    /usr/libexec/PlistBuddy -c <span class="string">"Set :CFBundleDisplayName  $displayName"</span> $infoPlist_File_Path</span><br><span class="line">    /usr/libexec/PlistBuddy -c <span class="string">"Set :CFBundleIdentifier  $bundleIdentifier"</span> $infoPlist_File_Path</span><br><span class="line">    /usr/libexec/PlistBuddy -c <span class="string">"Set :ChannelCode  $channelCode"</span> $infoPlist_File_Path</span><br><span class="line">    /usr/libexec/PlistBuddy -c <span class="string">"Set :HostNumber  $hostNumber"</span> $infoPlist_File_Path         </span><br><span class="line">    /usr/libexec/PlistBuddy -c <span class="string">"Set :CFBundleShortVersionString  $version"</span> $infoPlist_File_Path</span><br><span class="line">    /usr/libexec/PlistBuddy -c <span class="string">"Set :HostUrl  $hostUrl"</span> $infoPlist_File_Path</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [[ $? = <span class="number">0</span> ]]; then</span><br><span class="line">    echo <span class="string">"33[31m 修改 Plist 成功33[0m"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    echo <span class="string">"33[31m 修改 Plist 失败33[0m"</span></span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    # 重签名</span><br><span class="line">    #codesign -f -s "iPhone Distribution: Beijing Waming Environmental Technology Co., Ltd"  --entitlements $exportOptionsPlistPath $&#123;ipaPath&#125;/Payload/$&#123;schemeName&#125;.app</span><br><span class="line">    #if [[ $? = 0 ]]; then</span><br><span class="line">    #echo " 签名成功n "</span><br><span class="line">    #else</span><br><span class="line">    #echo " 签名失败n "</span><br><span class="line">    #fi</span><br><span class="line">    </span><br><span class="line">    # 生成 ipa</span><br><span class="line">    xcodebuild -exportArchive -archivePath $&#123;ipaPath&#125;/build/$&#123;schemeName&#125;.xcarchive -exportOptionsPlist $&#123;exportOptionsPlistPath&#125; -exportPath $&#123;ipaPath&#125;/$&#123;displayName&#125; -allowProvisioningUpdates $&#123;YES&#125; -allowProvisioningDeviceRegistration $&#123;YES&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [[ $? = <span class="number">0</span> ]]; then</span><br><span class="line">    echo <span class="string">"33[31m n 生成 IPA 成功 nnnnn33[0m"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    echo <span class="string">"33[31m n 生成 IPA 失败 nnnnn33[0m"</span></span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    rm -rf $&#123;ipaPath&#125;/$&#123;displayName&#125;/$&#123;projectName&#125;.xcarchive</span><br><span class="line">    </span><br><span class="line">    # 上传fir</span><br><span class="line">    <span class="keyword">if</span> [[ $isUploadFir = <span class="number">1</span> ]]; then</span><br><span class="line">    echo <span class="string">"正在上传fir..."</span></span><br><span class="line">        fir p <span class="string">"$&#123;ipaPath&#125;/$&#123;displayName&#125;/$&#123;displayName&#125;.ipa"</span> -T $&#123;FirApiToken&#125;</span><br><span class="line">    fi</span><br><span class="line">    # 移动</span><br><span class="line">    #mv $&#123;ipaPath&#125;/$displayName/$displayName.ipa $&#123;allIPAPackPath&#125;/$appName</span><br><span class="line"></span><br><span class="line">    # 上传蒲公英分发平台</span><br><span class="line">    <span class="keyword">if</span> [[ $ISUPLOAD = <span class="number">1</span> ]]; then</span><br><span class="line">    echo <span class="string">"正在上传蒲公英..."</span></span><br><span class="line">    curl -F <span class="string">"file=@$ipaPath/$displayName/$displayName.ipa"</span> -F <span class="string">"uKey=$USERKEY"</span> -F <span class="string">"_api_key=$APIKEY"</span> http:<span class="comment">//www.pgyer.com/apiv1/app/upload</span></span><br><span class="line"></span><br><span class="line">    fi</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># 结束时间</span><br><span class="line">endTime=<span class="string">`date +%s`</span></span><br><span class="line">echo -e <span class="string">"打包时间$[ endTime - beginTime ]秒"</span></span><br></pre></td></tr></table></figure>

<p> 判读用户是否有输入 1、AdHoc 2、AppStore 3、Enterprise 4、Development</p>
<blockquote>
<p>如果打包出现证书匹配问题，如果选择的auto 脚本里需要配置 ，上面脚本已经配置。</p>
<p> -allowProvisioningUpdates ${YES}</p>
<p> -allowProvisioningDeviceRegistration ${YES}</p>
</blockquote>
<blockquote>
<p>如果打包报其他错误，请先在Xcode项目上保证能archive，先解决掉代码上的错误才能保证脚本打包。</p>
</blockquote>
<p>等待生成ipa其中这儿生成替换的参数在APP中会读取，这儿也可以根据自己项目需求自定参数到info.plist下，然后在项目代码里实际的功能需求来操作。</p>
<ul>
<li>参数说明</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">#app名字</span><br><span class="line">displayNameArr=(</span><br><span class="line">    <span class="string">"渝钱宝管家"</span></span><br><span class="line">    <span class="string">"开益宝助手"</span></span><br><span class="line">)</span><br><span class="line">#app的bundleId</span><br><span class="line">bundleIdentifierArr=(</span><br><span class="line">    <span class="string">"com.qyf.qyf"</span></span><br><span class="line">    <span class="string">"com.qyf.qyf"</span></span><br><span class="line">)</span><br><span class="line">#获取URL链接的主机地址编号</span><br><span class="line">hostNumberArr=(</span><br><span class="line">    <span class="string">"A022"</span></span><br><span class="line">    <span class="string">"A021"</span></span><br><span class="line">)</span><br><span class="line">#修改app文件地址</span><br><span class="line">appIconArr=(</span><br><span class="line">    <span class="string">"yqb_AppIcon"</span></span><br><span class="line">    <span class="string">"lebzs_AppIcon"</span></span><br><span class="line">)</span><br><span class="line">#打包渠道号</span><br><span class="line">channelCodeArr=(</span><br><span class="line">    <span class="string">"112"</span></span><br><span class="line">    <span class="string">"115"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<p>这儿举个简单的例子例如hostNumberArr参数，在实际项目中是为了请求URL服务器地址的，然后在项目里获取到info.plist文件读取出来过后，然后在去请求服务器请求地址代码如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;获取开关配置和切换IP地址数据</span><br><span class="line">+(void)updateHostUrlSysCnfBlock:(void(^)(void))block&#123;</span><br><span class="line">    AFHTTPSessionManager *manger &#x3D;[AFHTTPSessionManager manager];</span><br><span class="line">    [manger.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line">    manger.requestSerializer.timeoutInterval &#x3D; 20.f;</span><br><span class="line">    [manger.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line">    NSString *hostNumber &#x3D; [NSBundle mainBundle].infoDictionary[@&quot;HostNumber&quot;];</span><br><span class="line">    NSString *getURL &#x3D; [NSString stringWithFormat:@&quot;http:&#x2F;&#x2F;sys.xxxx.cn:10271&#x2F;geturl?v&#x3D;%@&quot;,hostNumber];</span><br><span class="line">    [manger GET:getURL parameters:nil headers:nil progress:^(NSProgress *downloadProgress) &#123;</span><br><span class="line">    &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line">        NSDictionary *info &#x3D; (NSDictionary *)responseObject;</span><br><span class="line">        if (info) &#123;</span><br><span class="line">            DataInstance.hideFlag &#x3D; ((NSString *)info[@&quot;hideFlag&quot;]).integerValue;</span><br><span class="line">            NSString *hostUrl &#x3D; info[@&quot;url&quot;];</span><br><span class="line">            if(![AppUtils isEmptyStr:hostUrl])&#123;</span><br><span class="line">                hostUrl &#x3D;[NSString stringWithFormat:@&quot;%@&#x2F;&quot;,info[@&quot;url&quot;]];</span><br><span class="line">                if (![DataInstance.hostUrl isEqualToString:hostUrl]) &#123;</span><br><span class="line">                    #ifdef DEBUG</span><br><span class="line">                    #else</span><br><span class="line">                        DataInstance.hostUrl &#x3D; hostUrl;</span><br><span class="line">                        [UserMgn cleanUser];</span><br><span class="line">                    #endif</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;进入控制器</span><br><span class="line">        if (block) &#123;block();&#125;</span><br><span class="line">    &#125; failure:^(NSURLSessionDataTask *task, NSError *error) &#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;,error.localizedDescription);</span><br><span class="line">        if (block) &#123;block();&#125;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>三、生成IPAS产品系列包</strong></p>
<ul>
<li>打包生成所有产品下的包</li>
</ul>
<p><a href="https://imgse.com/i/pp9qYTS" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp9qYTS.png" alt="pp9qYTS.png"></a></p>
<ul>
<li>如果需要上传fir平台</li>
</ul>
<p>如果没有安装fir插件，请先安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo gem install fir-cli –no-ri –no-rdoc</span><br></pre></td></tr></table></figure>
<p>执行成功会生成对应的项目文件目录</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">echo <span class="string">"fir平台..."</span></span><br><span class="line">fir p <span class="string">"$&#123;ipaPath&#125;/$&#123;displayName&#125;/$&#123;displayName&#125;.ipa"</span> -T <span class="number">931</span>b41960f7496b946ei2s13c910pdb97</span><br></pre></td></tr></table></figure>

<p>上面-T后面的token需要替换成你自己，上面只是例子随便的值，如果想要知道如果获取fir的token登陆fir官网看以下图<br><a href="https://imgse.com/i/pp9q2Y4" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp9q2Y4.png" alt="pp9q2Y4.png"></a></p>
<ul>
<li>如果需要上传蒲公英pgyer分发平台</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">echo <span class="string">"正在上传蒲公英..."</span></span><br><span class="line">curl -F <span class="string">"file=@$ipaPath/$displayName/$displayName.ipa"</span> -F <span class="string">"uKey=$USERKEY"</span> -F <span class="string">"_api_key=$APIKEY"</span> http:<span class="comment">//www.pgyer.com/apiv1/app/upload</span></span><br></pre></td></tr></table></figure>

<p>方法不累述 USERKEY和APIKEY，上面默认的脚本不上传fir和pgyer，你可以根据自己需求，打开注释，和修改是否需要上传蒲公英的状态开关。</p>
<p><a href="https://imgse.com/i/pp9Lp0f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/02/27/pp9Lp0f.png" alt="pp9Lp0f.png"></a></p>
<p>如果上传fri,对应的二维码就是生成在fir平台的安装包</p>
]]></content>
      <categories>
        <category>ios</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo文章上传指令操作</title>
    <url>/2023/01/06/technology20230106110520/</url>
    <content><![CDATA[<h3 id="Hexo-博客从安装到本地预览-线上部署完整教程"><a href="#Hexo-博客从安装到本地预览-线上部署完整教程" class="headerlink" title="Hexo 博客从安装到本地预览+线上部署完整教程"></a>Hexo 博客从安装到本地预览+线上部署完整教程</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 清理缓存</span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 生成最新静态文件</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="comment"># 3. 临时访问</span></span><br><span class="line">hexo s -p 3000  <span class="comment"># 访问地址：http://localhost:3000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 推送部署到 GitHub（核心命令）</span></span><br><span class="line">hexo d  <span class="comment"># 或 hexo deploy</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">本文详细记录 Hexo 博客的安装配置、本地预览及线上部署全流程，适用于 macOS（Apple 芯片）系统，Windows/Linux 可参考适配对应路径，新手可直接按步骤操作。</span><br><span class="line"></span><br><span class="line">一、前置准备</span><br><span class="line"></span><br><span class="line"><span class="bullet">1. </span>安装 Node.js</span><br><span class="line">Hexo 基于 Node.js 开发，需先安装 Node.js（自带 npm 包管理器）：</span><br><span class="line"><span class="bullet">- </span>下载地址：[<span class="string">Node.js 官网</span>](<span class="link">https://nodejs.org/</span>)</span><br><span class="line"><span class="bullet">- </span>安装要求：推荐下载 LTS 长期支持版（如 18.x 或 20.x），安装后自动配置环境变量</span><br><span class="line"><span class="bullet">- </span>验证安装：终端执行以下命令，输出版本号即成功</span><br><span class="line">  node -v  # 输出示例：v18.17.0</span><br><span class="line">  npm -v   # 输出示例：9.6.7</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h3 id="1-全局安装-Hexo-脚手架"><a href="#1-全局安装-Hexo-脚手架" class="headerlink" title="1. 全局安装 Hexo 脚手架"></a>1. 全局安装 Hexo 脚手架</h3><p>终端执行以下命令，全局安装 Hexo 核心工具：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<p>安装成功提示：</p>
<ul>
<li><pre><code class="plaintext">changed 53 packages in 686ms
14 packages are looking for funding
  run `npm fund` for details
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### 2. 配置 zsh 环境变量（解决 &quot;command not found: hexo&quot;）</span><br><span class="line"></span><br><span class="line">安装后若终端提示找不到 hexo 命令，需配置环境变量（macOS Apple 芯片专属路径）：</span><br><span class="line"></span><br><span class="line">查看 npm 全局前缀路径（终端执行）：</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;bash</span><br><span class="line">npm config get prefix</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>输出结果（Apple 芯片默认）：<code>/opt/homebrew</code></p>
</li>
</ul>
<p>编辑 zsh 配置文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开配置文件（无则自动创建）</span></span><br><span class="line">touch ~/.zshrc &amp;&amp; open ~/.zshrc</span><br></pre></td></tr></table></figure>

<p>在文件末尾添加以下内容（直接复制）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">"/opt/homebrew/bin:<span class="variable">$PATH</span>"</span></span><br></pre></td></tr></table></figure>

<p>生效配置并验证：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 让配置立即生效</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证 Hexo 是否安装成功（输出版本号即成功）</span></span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure>

<ul>
<li>成功输出示例：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo-cli: 4.3.0</span><br><span class="line">node: 18.17.0</span><br><span class="line">os: darwin arm64</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="三、Hexo-本地预览操作"><a href="#三、Hexo-本地预览操作" class="headerlink" title="三、Hexo 本地预览操作"></a>三、Hexo 本地预览操作</h2><h3 id="1-初始化-Hexo-博客（首次操作）"><a href="#1-初始化-Hexo-博客（首次操作）" class="headerlink" title="1. 初始化 Hexo 博客（首次操作）"></a>1. 初始化 Hexo 博客（首次操作）</h3><ol>
<li>终端进入需存放博客的目录（如桌面）：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/Desktop  <span class="comment"># 示例：进入桌面</span></span><br></pre></td></tr></table></figure>

<p>初始化博客文件夹（替换 <code>my-hexo-blog</code> 为自定义博客名）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init my-hexo-blog</span><br></pre></td></tr></table></figure>

<p>进入博客根目录：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> my-hexo-blog</span><br></pre></td></tr></table></figure>

<h3 id="2-本地预览核心命令（按顺序执行）"><a href="#2-本地预览核心命令（按顺序执行）" class="headerlink" title="2. 本地预览核心命令（按顺序执行）"></a>2. 本地预览核心命令（按顺序执行）</h3><p>所有命令需在 <strong>博客根目录</strong> 执行：</p>
<h4 id="（1）清理缓存（可选但推荐）"><a href="#（1）清理缓存（可选但推荐）" class="headerlink" title="（1）清理缓存（可选但推荐）"></a>（1）清理缓存（可选但推荐）</h4><p>清除旧版静态文件和缓存，避免冲突：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure>

<ul>
<li>成功输出：<code>INFO  Deleted database.</code> <code>INFO  Deleted public folder.</code></li>
</ul>
<h4 id="（2）生成静态文件"><a href="#（2）生成静态文件" class="headerlink" title="（2）生成静态文件"></a>（2）生成静态文件</h4><p>将 Markdown 文章、主题模板编译为 HTML/CSS/JS 静态文件（生成到 <code>public</code> 文件夹）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g  <span class="comment"># 全称 hexo generate，简写 g 更便捷</span></span><br></pre></td></tr></table></figure>

<ul>
<li>成功输出：<code>INFO  Generated x pages</code>（x 为生成的页面数量）</li>
</ul>
<h4 id="（3）启动本地服务器"><a href="#（3）启动本地服务器" class="headerlink" title="（3）启动本地服务器"></a>（3）启动本地服务器</h4><p>启动内置服务器，实现本地预览：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s  <span class="comment"># 全称 hexo server，简写 s</span></span><br></pre></td></tr></table></figure>

<p>成功输出：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>

<h3 id="3-本地预览访问"><a href="#3-本地预览访问" class="headerlink" title="3. 本地预览访问"></a>3. 本地预览访问</h3><p>打开浏览器，输入地址 <code>http://localhost:4000</code>，即可看到 Hexo 默认博客页面。</p>
<ul>
<li>实时预览：修改文章、配置或主题后，刷新浏览器即可看到更新</li>
<li>停止服务器：终端按 <code>Ctrl + C</code> 组合键</li>
</ul>
<h3 id="4-实用补充指令"><a href="#4-实用补充指令" class="headerlink" title="4. 实用补充指令"></a>4. 实用补充指令</h3><h4 id="（1）指定端口启动（避免端口占用）"><a href="#（1）指定端口启动（避免端口占用）" class="headerlink" title="（1）指定端口启动（避免端口占用）"></a>（1）指定端口启动（避免端口占用）</h4><p>若 4000 端口被占用，可指定其他端口（如 3000）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s -p 3000  <span class="comment"># 访问地址：http://localhost:3000</span></span><br></pre></td></tr></table></figure>

<h4 id="（2）一键执行清理-生成-启动"><a href="#（2）一键执行清理-生成-启动" class="headerlink" title="（2）一键执行清理 + 生成 + 启动"></a>（2）一键执行清理 + 生成 + 启动</h4><p>无需分步输入，用 <code>&amp;&amp;</code> 连接指令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>

<h4 id="（3）调试模式启动（排查问题）"><a href="#（3）调试模式启动（排查问题）" class="headerlink" title="（3）调试模式启动（排查问题）"></a>（3）调试模式启动（排查问题）</h4><p>预览异常时，开启调试模式查看详细日志：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s --debug</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="四、Hexo-线上部署（hexo-d-命令使用）"><a href="#四、Hexo-线上部署（hexo-d-命令使用）" class="headerlink" title="四、Hexo 线上部署（hexo d 命令使用）"></a>四、Hexo 线上部署（<code>hexo d</code> 命令使用）</h2><p><code>hexo d</code> 是 <code>hexo deploy</code> 的简写，用于将本地静态文件推送到远程平台（如 GitHub Pages），实现线上访问。</p>
<h3 id="1-安装部署插件（必须）"><a href="#1-安装部署插件（必须）" class="headerlink" title="1. 安装部署插件（必须）"></a>1. 安装部署插件（必须）</h3><p>在博客根目录执行，安装 Git 部署插件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h3 id="2-配置远程部署平台（以-GitHub-Pages-为例）"><a href="#2-配置远程部署平台（以-GitHub-Pages-为例）" class="headerlink" title="2. 配置远程部署平台（以 GitHub Pages 为例）"></a>2. 配置远程部署平台（以 GitHub Pages 为例）</h3><h4 id="（1）准备-GitHub-仓库"><a href="#（1）准备-GitHub-仓库" class="headerlink" title="（1）准备 GitHub 仓库"></a>（1）准备 GitHub 仓库</h4><ol>
<li>登录 GitHub，新建仓库，仓库名必须为：<code>你的GitHub用户名.github.io</code>（如 <code>xxx.github.io</code>）</li>
<li>仓库页面点击「Code」，复制仓库 HTTPS/SSH 地址（如 <code>https://github.com/xxx/xxx.github.io.git</code>）</li>
</ol>
<h4 id="（2）配置-Hexo-部署信息"><a href="#（2）配置-Hexo-部署信息" class="headerlink" title="（2）配置 Hexo 部署信息"></a>（2）配置 Hexo 部署信息</h4><ol>
<li>打开博客根目录的 <code>_config.yml</code> 文件（Hexo 主配置文件）：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">open _config.yml</span><br></pre></td></tr></table></figure>

<p>拉到文件末尾，找到或新增 <code>deploy</code> 节点，添加以下配置（替换为你的信息）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span>  <span class="comment"># 部署类型：Git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/你的GitHub用户名/你的GitHub用户名.github.io.git</span>  <span class="comment"># 复制的仓库地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span>  <span class="comment"># 部署分支（GitHub Pages 默认 main 分支）</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">"Hexo deploy: <span class="template-variable">&#123;&#123; now('YYYY-MM-DD HH:mm:ss') &#125;&#125;</span>"</span>  <span class="comment"># 自动添加部署时间（可选）</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意：YAML 格式要求冒号后面必须加空格！</li>
</ul>
<h3 id="3-执行部署命令"><a href="#3-执行部署命令" class="headerlink" title="3. 执行部署命令"></a>3. 执行部署命令</h3><p>配置完成后，在博客根目录按以下顺序执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 清理缓存</span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 生成最新静态文件</span></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 推送部署到 GitHub（核心命令）</span></span><br><span class="line">hexo d  <span class="comment"># 或 hexo deploy</span></span><br></pre></td></tr></table></figure>

<h4 id="部署成功标志"><a href="#部署成功标志" class="headerlink" title="部署成功标志"></a>部署成功标志</h4><p>终端输出以下信息且无报错：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying files from public folder...</span><br><span class="line">INFO  Commit with message: Hexo deploy: 2025-11-05 16:30:00</span><br><span class="line">INFO  Pushing to https://github.com/xxx/xxx.github.io.git</span><br><span class="line">INFO  Deploy done: git</span><br></pre></td></tr></table></figure>

<h3 id="4-访问线上博客"><a href="#4-访问线上博客" class="headerlink" title="4. 访问线上博客"></a>4. 访问线上博客</h3><p>部署成功后，等待 1-5 分钟，浏览器访问 <code>https://你的GitHub用户名.github.io</code>（如 <code>https://xxx.github.io</code>），即可看到线上博客。</p>
<hr>
<h2 id="五、常见问题排查"><a href="#五、常见问题排查" class="headerlink" title="五、常见问题排查"></a>五、常见问题排查</h2><h3 id="1-终端提示-“command-not-found-hexo”"><a href="#1-终端提示-“command-not-found-hexo”" class="headerlink" title="1. 终端提示 “command not found: hexo”"></a>1. 终端提示 “command not found: hexo”</h3><ul>
<li>原因：环境变量配置错误或未生效</li>
<li>解决：重新执行 <code>source ~/.zshrc</code>，或检查 <code>~/.zshrc</code> 中路径是否为 <code>/opt/homebrew/bin</code></li>
</ul>
<h3 id="2-hexo-d-报错-“No-repository-defined”"><a href="#2-hexo-d-报错-“No-repository-defined”" class="headerlink" title="2. hexo d 报错 “No repository defined”"></a>2. <code>hexo d</code> 报错 “No repository defined”</h3><ul>
<li>原因：<code>_config.yml</code> 中 <code>deploy</code> 节点的 <code>repo</code> 地址未配置或格式错误</li>
<li>解决：检查 <code>repo</code> 地址是否正确（含 <code>.git</code> 后缀），确保冒号后加空格</li>
</ul>
<h3 id="3-部署成功后访问-404"><a href="#3-部署成功后访问-404" class="headerlink" title="3. 部署成功后访问 404"></a>3. 部署成功后访问 404</h3><ul>
<li>检查 GitHub 仓库名是否为 <code>用户名.github.io</code>（严格区分大小写）</li>
<li>进入仓库「Settings → Pages」，确认部署分支为 <code>main</code> 且状态为「已启用」</li>
</ul>
<h3 id="4-推送时权限不足"><a href="#4-推送时权限不足" class="headerlink" title="4. 推送时权限不足"></a>4. 推送时权限不足</h3><ul>
<li>方案 1：改用 SSH 地址部署（需提前配置 GitHub SSH 密钥）</li>
<li>方案 2：HTTPS 地址部署时，输入 GitHub 个人访问令牌（替代密码），令牌需勾选 <code>repo</code> 权限</li>
</ul>
<hr>
<h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><h3 id="1-核心流程"><a href="#1-核心流程" class="headerlink" title="1. 核心流程"></a>1. 核心流程</h3><p>安装 Node.js → 安装 Hexo → 配置环境变量 → 本地预览 → 线上部署</p>
<h3 id="2-常用命令速查"><a href="#2-常用命令速查" class="headerlink" title="2. 常用命令速查"></a>2. 常用命令速查</h3><table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>初始化博客</td>
<td><code>hexo init 博客名</code></td>
</tr>
<tr>
<td>清理缓存</td>
<td><code>hexo clean</code></td>
</tr>
<tr>
<td>生成静态文件</td>
<td><code>hexo g</code>（全称 <code>hexo generate</code>）</td>
</tr>
<tr>
<td>本地预览</td>
<td><code>hexo s</code>（全称 <code>hexo server</code>）</td>
</tr>
<tr>
<td>线上部署</td>
<td><code>hexo d</code>（全称 <code>hexo deploy</code>）</td>
</tr>
<tr>
<td>一键部署</td>
<td><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</code></td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p>说明：按本文步骤操作后，即可实现 Hexo 博客的本地开发预览和线上公开访问。如需部署到 Gitee Pages、Netlify 等其他平台，可参考对应平台的仓库配置规则修改 <code>_config.yml</code> 中的 <code>deploy</code> 节点。</p>
</blockquote>
<p>plaintext</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">验证文件有效性</span><br><span class="line">生成 `.md` 文件后，可通过以下方式确认：</span><br><span class="line">1. 用 Typora、VS Code（安装 Markdown 插件）、Obsidian 等编辑器打开</span><br><span class="line">2. 查看格式：标题层级、代码块高亮、表格、列表是否正常显示</span><br><span class="line">3. 所有命令可直接复制使用，无需额外修改</span><br><span class="line"></span><br><span class="line">按上面的方法操作，你会得到一个 **标准、可编辑、可分享** 的 `.md` 文档，完全满足下载使用的需求～</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
      </tags>
  </entry>
  <entry>
    <title>Sudoku Game Privacy Policy_ Zero Personal Data Collection, Pure Gaming Experience</title>
    <url>/2025/11/05/technology20251105090825/</url>
    <content><![CDATA[<h1 id="Sudoku-Game-Privacy-Policy-Zero-Personal-Data-Collection-Pure-Gaming-Experience"><a href="#Sudoku-Game-Privacy-Policy-Zero-Personal-Data-Collection-Pure-Gaming-Experience" class="headerlink" title="Sudoku Game Privacy Policy: Zero Personal Data Collection, Pure Gaming Experience"></a>Sudoku Game Privacy Policy: Zero Personal Data Collection, Pure Gaming Experience</h1><p><strong>Last Modified Date</strong>: November 5, 2025</p>
<h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>This privacy policy applies to the Sudoku game (hereinafter referred to as the “Game”) you are using. Our core commitment is: <strong>the Game does not collect any of your personal privacy information</strong> at any stage of your use. We prioritize protecting your data security and privacy rights, allowing you to enjoy the pure fun of Sudoku puzzles without worrying about personal information leakage.</p>
<h2 id="2-About-Us-amp-Contact-Information"><a href="#2-About-Us-amp-Contact-Information" class="headerlink" title="2. About Us &amp; Contact Information"></a>2. About Us &amp; Contact Information</h2><p>The operator of this Game is an individual developer. If you have any questions, concerns, or complaints regarding this privacy policy, data practices, or your rights, please feel free to contact us through the following channel:</p>
<ul>
<li>Email: <a href="mailto:ggb.chen@foxmail.com">ggb.chen@foxmail.com</a></li>
</ul>
<h2 id="3-Core-Privacy-Commitment-No-Personal-Data-Collection"><a href="#3-Core-Privacy-Commitment-No-Personal-Data-Collection" class="headerlink" title="3. Core Privacy Commitment: No Personal Data Collection"></a>3. Core Privacy Commitment: No Personal Data Collection</h2><p>We strictly adhere to the principle of “zero personal data collection.” During your use of the Game, we will <strong>never collect, store, or process any of your personal privacy information</strong>, including but not limited to:</p>
<a id="more"></a>

<ul>
<li><p>Identifiable personal information: Name, phone number, email address (except for the contact email you proactively provide when reaching out to us), ID card number, address, etc.</p>
</li>
<li><p>Device and network-related personal data: IP address, device unique identifier (e.g., IMEI, advertising ID), MAC address, location information (including city-level or precise location), Wi-Fi connection data, etc.</p>
</li>
<li><p>Social account information: We do not integrate with any social platforms (e.g., Facebook, Google, Apple) for login or data synchronization, so no social account information (e.g., profile picture, friends list) will be collected.</p>
</li>
</ul>
<h2 id="4-Explanation-of-Non-Personal-Data-If-Applicable"><a href="#4-Explanation-of-Non-Personal-Data-If-Applicable" class="headerlink" title="4. Explanation of Non-Personal Data (If Applicable)"></a>4. Explanation of Non-Personal Data (If Applicable)</h2><p>To ensure the normal operation of the Game and optimize your gaming experience, the Game may generate and temporarily store <strong>non-personal, non-identifiable data</strong> during use. This data cannot be associated with any individual and will not be used to identify you, including but not limited to:</p>
<ul>
<li><p>In-game activity data: Game score, level progress, puzzle completion status, game duration (e.g., time spent solving a single puzzle), and settings preferences (e.g., difficulty level, theme selection).</p>
</li>
<li><p>Technical operation data: Temporary records of game startup/shutdown times, and basic device compatibility information (e.g., operating system type and version, such as Android 14 or iOS 18) — this data is only used to fix game crashes or technical bugs and will not be stored long-term.</p>
</li>
</ul>
<p>All the above non-personal data is generated locally on your device and will not be uploaded to any server or shared with third parties.</p>
<h2 id="5-Use-amp-Sharing-of-Data"><a href="#5-Use-amp-Sharing-of-Data" class="headerlink" title="5. Use &amp; Sharing of Data"></a>5. Use &amp; Sharing of Data</h2><p>Since the Game does not collect your personal privacy information, the following situations do not apply:</p>
<ul>
<li><p>There is no “use of personal data” for purposes such as targeted advertising, user profiling, or marketing promotions.</p>
</li>
<li><p>There is no “sharing of personal data” with third parties (including advertising partners, analytics providers, or other companies/individuals).</p>
</li>
</ul>
<p>In exceptional cases (e.g., legal requirements): If we receive a valid legal notice (such as a court order or official request from a regulatory authority), we will only provide the minimum necessary non-personal data (as specified in Section 4) in accordance with the law, and will not disclose any information that may identify you.</p>
<h2 id="6-Security-Measures"><a href="#6-Security-Measures" class="headerlink" title="6. Security Measures"></a>6. Security Measures</h2><p>Although the Game does not collect personal privacy information, we still take strict technical measures to protect the non-personal data generated during your use:</p>
<ul>
<li><p>All non-personal data is stored locally on your device and is not transmitted over the internet, avoiding risks of data interception during transmission.</p>
</li>
<li><p>We regularly update the Game’s security patches to prevent unauthorized access to local non-personal data by malicious software or third parties.</p>
</li>
</ul>
<h2 id="7-Your-Rights"><a href="#7-Your-Rights" class="headerlink" title="7. Your Rights"></a>7. Your Rights</h2><p>As a user, you enjoy the following rights related to data:</p>
<ul>
<li><p><strong>Right to Know</strong>: You have the right to understand the types and uses of non-personal data generated by the Game (see Section 4). If you need further clarification, you can contact us via the email provided in Section 2.</p>
</li>
<li><p><strong>Right to Control</strong>: You can delete the Game’s local non-personal data at any time by uninstalling the Game (uninstalling will clear all in-game progress and settings data stored on your device).</p>
</li>
</ul>
<h2 id="8-Changes-to-This-Privacy-Policy"><a href="#8-Changes-to-This-Privacy-Policy" class="headerlink" title="8. Changes to This Privacy Policy"></a>8. Changes to This Privacy Policy</h2><p>We may update this privacy policy from time to time to adapt to legal changes or technical adjustments of the Game. If there are any material changes (e.g., adjustments to data collection rules, which will not involve collecting personal data), we will notify you through one of the following methods:</p>
<ul>
<li><p>Pop-up notice within the Game;</p>
</li>
<li><p>Notification sent to the email address you proactively provided (if any).</p>
</li>
</ul>
<p>The updated privacy policy will take effect on the “Last Modified Date” indicated at the top of the document. We recommend that you review this policy periodically.</p>
<h2 id="9-Contact-amp-Feedback"><a href="#9-Contact-amp-Feedback" class="headerlink" title="9. Contact &amp; Feedback"></a>9. Contact &amp; Feedback</h2><p>If you have any questions, suggestions, or feedback about this privacy policy or the Game’s data practices, please contact us at:</p>
<ul>
<li>Email: <a href="mailto:ggb.chen@foxmail.com">ggb.chen@foxmail.com</a></li>
</ul>
<p>We will respond to your inquiry within 5 working days and provide a clear explanation or solution.</p>
]]></content>
      <categories>
        <category>cocosCreator</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>cocosCreator</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客部署常见问题及解决方案</title>
    <url>/2023/09/10/technology20230910111821/</url>
    <content><![CDATA[<p>在使用 Hexo 部署博客的过程中，常会遇到各种报错。本文整理了从 Node.js 版本兼容到 SSH 密钥配置的全套解决方案，帮助你快速排查并解决问题。</p>
<h2 id="一、环境准备与依赖修复"><a href="#一、环境准备与依赖修复" class="headerlink" title="一、环境准备与依赖修复"></a>一、环境准备与依赖修复</h2><h3 id="1-清除缓存与修复依赖"><a href="#1-清除缓存与修复依赖" class="headerlink" title="1. 清除缓存与修复依赖"></a>1. 清除缓存与修复依赖</h3><p>若部署时出现未知错误（如文件复制失败、模块缺失），优先修复依赖：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 清除 Hexo 缓存</span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除损坏的依赖文件和锁文件</span></span><br><span class="line">rm -rf node_modules package-lock.json yarn.lock</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新安装依赖</span></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h3 id="2-安装-Node-版本管理工具（nvm）"><a href="#2-安装-Node-版本管理工具（nvm）" class="headerlink" title="2. 安装 Node 版本管理工具（nvm）"></a>2. 安装 Node 版本管理工具（nvm）</h3><p>Hexo 对 Node.js 版本有严格要求（推荐 v14.0.0+，旧主题建议 v16 LTS），使用 nvm 可灵活切换版本。</p>
<h4 id="国内镜像安装（解决-GitHub-访问受限）："><a href="#国内镜像安装（解决-GitHub-访问受限）：" class="headerlink" title="国内镜像安装（解决 GitHub 访问受限）："></a>国内镜像安装（解决 GitHub 访问受限）：</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用 Gitee 镜像安装 nvm（速度更快）</span></span><br><span class="line">curl -o- https://gitee.com/mirrors/nvm/raw/v0.39.3/install.sh | bash</span><br></pre></td></tr></table></figure>

<h4 id="加载-nvm-配置（立即生效）："><a href="#加载-nvm-配置（立即生效）：" class="headerlink" title="加载 nvm 配置（立即生效）："></a>加载 nvm 配置（立即生效）：</h4><p>安装后关闭终端重开，或手动加载配置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$HOME</span>/.nvm"</span></span><br><span class="line">[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="comment"># 加载 nvm 核心脚本</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h4 id="安装并切换-Node-js-版本："><a href="#安装并切换-Node-js-版本：" class="headerlink" title="安装并切换 Node.js 版本："></a>安装并切换 Node.js 版本：</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装 Node.js 16（兼容性较好）</span></span><br><span class="line">nvm install 16</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到已安装的版本</span></span><br><span class="line">nvm use 16</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证版本</span></span><br><span class="line">node -v  <span class="comment"># 输出应为 v16.x.x</span></span><br></pre></td></tr></table></figure>

<h2 id="二、GitHub-主机密钥验证失败"><a href="#二、GitHub-主机密钥验证失败" class="headerlink" title="二、GitHub 主机密钥验证失败"></a>二、GitHub 主机密钥验证失败</h2><h3 id="报错特征："><a href="#报错特征：" class="headerlink" title="报错特征："></a>报错特征：</h3><p>部署时提示 <code>Host key verification failed</code>，因 GitHub 主机密钥更新，本地存储的旧密钥不匹配。</p>
<h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 删除本地存储的旧 GitHub 主机密钥</span></span><br><span class="line">ssh-keygen -R github.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 重新连接 GitHub 并信任新密钥</span></span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<p>执行后会提示确认新密钥，输入 <code>yes</code> 并回车，新密钥将自动保存到本地。</p>
<h2 id="三、Node-js-版本兼容问题"><a href="#三、Node-js-版本兼容问题" class="headerlink" title="三、Node.js 版本兼容问题"></a>三、Node.js 版本兼容问题</h2><h3 id="报错特征"><a href="#报错特征" class="headerlink" title="报错特征"></a>报错特征</h3><p>部署时出现类似 <code>TypeError [ERR_INVALID_ARG_TYPE]: The &quot;mode&quot; argument must be of type number</code> 的错误，通常是 Node.js 版本与 Hexo 或依赖不兼容导致。</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><ol>
<li><strong>安装 nvm 管理 Node 版本</strong></li>
</ol>
<p>若无法访问 GitHub 资源，可使用国内镜像：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 国内镜像安装 nvm</span></span><br><span class="line">curl -o- https://gitee.com/mirrors/nvm/raw/v0.39.3/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>**加载 nvm 配置（立即生效）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$HOME</span>/.nvm"</span></span><br><span class="line">[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span></span><br></pre></td></tr></table></figure>

<p><strong>安装并切换到兼容版本（推荐 Node.js 16）</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm install 16</span><br><span class="line">nvm use 16</span><br><span class="line"><span class="comment"># 验证版本</span></span><br><span class="line">node -v  <span class="comment"># 应显示 v16.x.x</span></span><br></pre></td></tr></table></figure>



<h2 id="四、GitHub-主机密钥验证失败"><a href="#四、GitHub-主机密钥验证失败" class="headerlink" title="四、GitHub 主机密钥验证失败"></a>四、GitHub 主机密钥验证失败</h2><h3 id="报错特征-1"><a href="#报错特征-1" class="headerlink" title="报错特征"></a>报错特征</h3><p>部署时提示 <code>Host key verification failed</code>，因 GitHub 主机密钥更新导致本地校验不通过。</p>
<h3 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h3><h3 id="删除旧主机密钥"><a href="#删除旧主机密钥" class="headerlink" title="删除旧主机密钥"></a><strong>删除旧主机密钥</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -R github.com</span><br></pre></td></tr></table></figure>

<p><strong>重新信任 GitHub 主机</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<p>出现提示时输入 <code>yes</code> 确认，新密钥会自动保存。</p>
<h2 id="五、SSH-权限问题（Permission-denied）"><a href="#五、SSH-权限问题（Permission-denied）" class="headerlink" title="五、SSH 权限问题（Permission denied）"></a>五、SSH 权限问题（Permission denied）</h2><h3 id="报错特征-2"><a href="#报错特征-2" class="headerlink" title="报错特征"></a>报错特征</h3><p>执行 <code>ssh -T git@github.com</code> 时提示 <code>Permission denied (publickey)</code>，说明 SSH 密钥未被 GitHub 识别。</p>
<h3 id="解决方案-2"><a href="#解决方案-2" class="headerlink" title="解决方案"></a>解决方案</h3><ol>
<li><strong>删除旧密钥（若存在）</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rm -f ~/.ssh/id_rsa ~/.ssh/id_rsa.pub  <span class="comment"># 删除 RSA 密钥</span></span><br><span class="line"><span class="comment"># 若有其他密钥（如 id_ed25519），也一并删除</span></span><br></pre></td></tr></table></figure>

<p><strong>生成兼容旧系统的 RSA 密钥</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成 4096 位 RSA 密钥（替换为你的邮箱）</span></span><br><span class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">"你的邮箱@example.com"</span></span><br><span class="line"><span class="comment"># 按回车使用默认路径，无需设置密码（直接回车两次）</span></span><br></pre></td></tr></table></figure>

<p><strong>加载私钥并添加到 SSH 代理</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启动代理</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(ssh-agent -s)</span>"</span></span><br><span class="line"><span class="comment"># 加载新生成的私钥</span></span><br><span class="line">ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>

<p><strong>将公钥添加到 GitHub</strong></p>
<ul>
<li><p>复制公钥内容：</p>
</li>
<li><pre><code class="bash"><span class="comment"># macOS 自动复制</span>
pbcopy &lt; ~/.ssh/id_rsa.pub
<span class="comment"># 其他系统：手动复制 cat ~/.ssh/id_rsa.pub 的输出</span>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 登录 GitHub → **Settings** → **SSH and GPG keys** → **New SSH key** → 粘贴公钥并保存。</span><br><span class="line"></span><br><span class="line">**验证连接</span><br><span class="line"></span><br><span class="line">1. &#96;&#96;&#96;bash</span><br><span class="line">   ssh -T git@github.com</span><br><span class="line">   # 成功提示：Hi 你的用户名! You&#39;ve successfully authenticated...</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="六、最终部署验证"><a href="#六、最终部署验证" class="headerlink" title="六、最终部署验证"></a>六、最终部署验证</h2><p>完成上述配置后，重新部署 Hexo 博客：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure>

<p>若仍有问题，可临时改用 HTTPS 部署（修改 <code>_config.yml</code> 中 <code>deploy.repo</code> 为 HTTPS 地址，如 <code>https://github.com/用户名/仓库名.git</code>），部署时输入 GitHub 账号密码或个人访问令牌。</p>
<p>通过以上步骤，可解决 Hexo 部署中常见的 Node 版本兼容、主机密钥验证及 SSH 权限问题，确保博客顺利部署到 GitHub。</p>
]]></content>
      <tags>
        <tag>technology</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>利用jekenis自动打包上传阿里云下载和通知钉钉机器人</title>
    <url>/2023/02/10/technology20230210090112/</url>
    <content><![CDATA[<h5 id="利用jekenis自动打包、上传阿里云OSS生成二维码下载链接、通知钉钉机器人发送打包信息。"><a href="#利用jekenis自动打包、上传阿里云OSS生成二维码下载链接、通知钉钉机器人发送打包信息。" class="headerlink" title="利用jekenis自动打包、上传阿里云OSS生成二维码下载链接、通知钉钉机器人发送打包信息。"></a>利用jekenis自动打包、上传阿里云OSS生成二维码下载链接、通知钉钉机器人发送打包信息。</h5><p>前面介绍了单项目打包，和多项目打包，<a href="https://kziwws.github.io/2023/01/20/technology20230120161001/">IOS项目单独打包 </a>、<a href="https://kziwws.github.io/2023/01/21/technology20230121151206/">IOS脚本批量打包</a>。<br>现在在单独打包的基础上增加一些功能：</p>
<blockquote>
<p>打包完成过后，自动生成Plists文件上传到阿里云OSS, itms-services:// URL,这个 URL 是 iOS 应用程序安装包的协议格式，而不是 HTTP 或 HTTPS 协议格式的链接。<br>利用ossutil上传IPA包到阿里云OSS过后，然后利用qrserver服务生成QR二维码，同样子上传到阿里云。<br>使用markdown语法再转发生成的二维码链接直接下载。</p>
</blockquote>
<ul>
<li><a href="#ios_jekenis">mac安装jekenis</a></li>
<li><a href="#ios_xcodebuild">ios项目xcodebuild打包</a></li>
<li><a href="#ios_uploadl_ipa">ipa包上传阿里云OSS</a></li>
<li><a href="#ios_plist">生成下载需要的Plist文件</a></li>
<li><a href="#ios_upload_qr">生成二维码并上传</a></li>
<li><a href="#ios_ding">通知钉钉发送打包消息</a></li>
</ul>
<p><a name='ios_jekenis'><strong>一、mac安装jekenis</strong></a></p>
<h5 id="安装地址-https-www-jenkins-io-download-lts-macos"><a href="#安装地址-https-www-jenkins-io-download-lts-macos" class="headerlink" title="安装地址   https://www.jenkins.io/download/lts/macos/"></a>安装地址   <a href="https://www.jenkins.io/download/lts/macos/" target="_blank" rel="noopener">https://www.jenkins.io/download/lts/macos/</a></h5><p><code>brew install jenkins-lts</code> 安装最近最新的一次版本</p>
<p><code>brew install jenkins-lts@YOUR_VERSION</code> 安装对应的其他版本</p>
<p>如果遇到 </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Error1：brew install jenkins Error: The following directories are not writable by your user</span><br><span class="line">在终端执行:</span><br><span class="line">sudo chown -R whoami:admin /usr/<span class="built_in">local</span>/bin</span><br><span class="line">sudo chown -R whoami:admin /usr/<span class="built_in">local</span>/share</span><br><span class="line"></span><br><span class="line">Error2：遇到其他位置问题，重新安装一下最新的Homebrew</span><br><span class="line">可参考地址 https://www.cnblogs.com/somepark/p/16813250.html</span><br><span class="line"></span><br><span class="line">在Terminal 执行 /bin/zsh -c <span class="string">"<span class="variable">$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)</span>"</span>，</span><br><span class="line">这里最好选择第2个源，清华大学下载源。然后根据提示安装</span><br></pre></td></tr></table></figure>

<p>以上安装完成 在重新<code>brew install jenkins-lts</code>执行下载安装 jenkins，如果失败，请选网络或者重试。</p>
<h5 id="运行Jenkins"><a href="#运行Jenkins" class="headerlink" title="运行Jenkins"></a>运行Jenkins</h5><p><code>brew services start jenkins-lts</code> 开启jenkins</p>
<p><code>brew services restart jenkins-lts</code> 重启命令</p>
<p><a name='ios_xcodebuild'><strong>二、ios项目xcodebuild打包</strong></a></p>
<p>• 编译前清理工程：</p>
<p> <code>xcodebuild clean -project ${projectName}.xcodeproj</code>。</p>
<p>• 获取项目工程名：</p>
<p><code>find . -name *.xcodeproj | awk -F &quot;[/.]&quot; &#39;{print $(NF-1)}</code> 中获取。</p>
<p>• 获取打包AdHoc、AppStore、Enterprise、Development 所需的plist目录，这个目录在打包脚本的目录里。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 判读用户打包类型</span></span><br><span class="line">packType=<span class="variable">$&#123;PackageType&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"33[31m 打包参数值:<span class="variable">$&#123;packType&#125;</span> n 33[0m"</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$packType</span> == <span class="string">"AdHoc"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AdHocExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建AdHoc"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$packType</span> == <span class="string">"AppStore"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AppStoreExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建AppStore"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$packType</span> == <span class="string">"Enterprise"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/EnterpriseExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建Enterprise"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$packType</span> == <span class="string">"Development"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/DevelopmentExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建Development"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"参数无效!!!"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>• 执行xcodebuild打包IPA。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Build 生成 APP</span></span><br><span class="line"><span class="comment"># 判断编译的项目类型是workspace还是project</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">$is_workspace</span> ; <span class="keyword">then</span></span><br><span class="line"><span class="comment"># 编译前清理工程</span></span><br><span class="line">xcodebuild clean -workspace <span class="variable">$&#123;projectName&#125;</span>.xcworkspace \</span><br><span class="line">                 -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                 -configuration <span class="variable">$&#123;build_configuration&#125;</span></span><br><span class="line">xcodebuild archive -workspace <span class="variable">$&#123;projectName&#125;</span>.xcworkspace \</span><br><span class="line">                   -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                   -configuration <span class="variable">$&#123;build_configuration&#125;</span> \</span><br><span class="line">                   -archivePath <span class="variable">$&#123;buildDir&#125;</span> \</span><br><span class="line">                   -destination <span class="string">'generic/platform=iOS'</span> \</span><br><span class="line">                   -quiet</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment"># 编译前清理工程</span></span><br><span class="line">xcodebuild clean -project <span class="variable">$&#123;projectName&#125;</span>.xcodeproj \</span><br><span class="line">                 -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                 -configuration <span class="variable">$&#123;build_configuration&#125;</span></span><br><span class="line">xcodebuild archive -project <span class="variable">$&#123;projectName&#125;</span>.xcodeproj \</span><br><span class="line">                   -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                   -configuration <span class="variable">$&#123;build_configuration&#125;</span> \</span><br><span class="line">                   -archivePath <span class="variable">$&#123;buildDir&#125;</span> \</span><br><span class="line">                   -destination <span class="string">'generic/platform=iOS'</span> \</span><br><span class="line">                   -quiet</span><br><span class="line"><span class="comment"># 生成 ipa</span></span><br><span class="line">xcodebuild -exportArchive \</span><br><span class="line">  -archivePath <span class="variable">$&#123;buildDir&#125;</span> \</span><br><span class="line">  -exportOptionsPlist <span class="variable">$&#123;exportOptionsPlistPath&#125;</span> \</span><br><span class="line">  -exportPath <span class="variable">$&#123;ipaPath&#125;</span> \</span><br><span class="line">  -allowProvisioningUpdates <span class="variable">$&#123;YES&#125;</span> \</span><br><span class="line">  -allowProvisioningDeviceRegistration <span class="variable">$&#123;YES&#125;</span> \</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p><a name='ios_uploadl_ipa'><strong>三、ipa包上传阿里云OSS</strong></a></p>
<p>• 上传工具安装：</p>
<p>在执行前需要安装ossutil客户端工具，可参考<a href="https://help.aliyun.com/document_detail/120075.html" target="_blank" rel="noopener">官方文档</a>进行安装，如果上传的文件已存在于oss存储空间中，则会覆盖原有文件，需谨慎操作，需要赋予该脚本执行权限，可以使用chmod +x script.sh命令进行授权。</p>
<p>安装ossutil</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo -v ; curl https://gosspublic.alicdn.com/ossutil/install.sh | sudo bash</span><br></pre></td></tr></table></figure>

<p>• 查找ossutil安装在本地的目录，后面使用这个目录就不需要设置成全局变量。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">which</span> ossutil</span><br></pre></td></tr></table></figure>
<p>• 验证是否已成功安装ossutil，如果屏幕中输出ossutil所有支持的命令，表明已成功安装ossutil。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ossutil</span><br></pre></td></tr></table></figure>

<p>• 开始上传IPA包到阿里云OSS。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 执行上传ipa文件操作并记录日志</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始上传ipa文件到阿里云OSS..."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"AccessKeyId: <span class="variable">$ACCESS_KEY_ID</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"AccessKeySecret: <span class="variable">$ACCESS_KEY_SECRET</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bucket Name: <span class="variable">$BUCKET_NAME</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Region ID: <span class="variable">$REGION_ID</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Remote Path: <span class="variable">$REMOTE_PATH</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"File Name: <span class="variable">$FILE_NAME</span>"</span></span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/ossutil -i <span class="variable">$ACCESS_KEY_ID</span> -k <span class="variable">$ACCESS_KEY_SECRET</span> \</span><br><span class="line">    -e <span class="variable">$REGION_ID</span>.aliyuncs.com \</span><br><span class="line">    cp <span class="variable">$IPA_FILE</span> oss://<span class="variable">$BUCKET_NAME</span>/<span class="variable">$REMOTE_PATH</span><span class="variable">$FILE_NAME</span> \</span><br><span class="line">    &gt;&gt; upload.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>



<p><a name='ios_plist'><strong>四、生成下载所需要的Plist文件</strong></a></p>
<p>• 先执行生成Plist。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成plist文件并记录日志</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始生成plist文件..."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ipa Download URL: <span class="variable">$DOWNLOAD_URL</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Plist Download URL: <span class="variable">$PLIST_URL</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"APP Install URL: <span class="variable">$&#123;APP_INSTALL_URL&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bundle Identifier: <span class="variable">$bundleIdentifier</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bundle Version: <span class="variable">$version</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Display Name: <span class="variable">$displayName</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;?xml version="1.0" encoding="UTF-8"?&gt;'</span>&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;plist version="1.0"&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'    &lt;key&gt;items&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'    &lt;array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'        &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;key&gt;assets&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;software-package&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;url&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                    &lt;string&gt;<span class="variable">$DOWNLOAD_URL</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;full-size-image&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;needs-shine&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;true/&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;url&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;display-image&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                   &lt;key&gt;needs-shine&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;true/&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;url&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;/array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;key&gt;metadata&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'               &lt;key&gt;bundle-identifier&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                &lt;string&gt;<span class="variable">$bundleIdentifier</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;key&gt;bundle-version&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                &lt;string&gt;<span class="variable">$version</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;string&gt;software&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;key&gt;title&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                &lt;string&gt;<span class="variable">$displayName</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'        &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'    &lt;/array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;/plist&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br></pre></td></tr></table></figure>

<p>• 将 Plist 文件保存到指定目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mv <span class="variable">$&#123;PLIST_NAME&#125;</span> <span class="variable">$&#123;ipaPath&#125;</span></span><br><span class="line"><span class="comment"># 定义变量（plist实际路径）</span></span><br><span class="line">PLIST_FILE=<span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;schemeName&#125;</span>.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Local File: <span class="variable">$PLIST_FILE</span>"</span></span><br></pre></td></tr></table></figure>

<p>• 上传在本地目录中的Plist文件到阿里云OSS。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/bin/ossutil -i <span class="variable">$ACCESS_KEY_ID</span> -k <span class="variable">$ACCESS_KEY_SECRET</span> \</span><br><span class="line">    -e <span class="variable">$REGION_ID</span>.aliyuncs.com \</span><br><span class="line">    cp <span class="variable">$PLIST_FILE</span> oss://<span class="variable">$BUCKET_NAME</span>/<span class="variable">$REMOTE_PATH</span><span class="variable">$PLIST_NAME</span> \</span><br><span class="line">    &gt;&gt; upload.log 2&gt;&amp;1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"plist文件上传完成！请到阿里云控制台确认。"</span></span><br></pre></td></tr></table></figure>



<p><a name='ios_upload_qr'><strong>五、生成二维码并上传</strong></a></p>
<p>• 使用在线api-qrserver生成二维码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载二维码并保存到本地</span></span><br><span class="line">QR_CODE_API=<span class="string">"https://api.qrserver.com/v1/create-qr-code/?size=80x80&amp;data=<span class="variable">$(urlencode "$APP_INSTALL_URL")</span>"</span></span><br><span class="line"><span class="comment">#远程qr图片名字（添加时间戳）</span></span><br><span class="line">QR_NAME=<span class="string">"<span class="variable">$&#123;last_part&#125;</span>_qr_<span class="variable">$(date +%Y%m%d%H%M%S)</span>.png"</span></span><br><span class="line"><span class="comment">#保存在本地qr地址</span></span><br><span class="line">QR_LOCAL_PATH=<span class="variable">$&#123;IPA_DIR&#125;</span>/<span class="variable">$&#123;QR_NAME&#125;</span></span><br><span class="line"><span class="comment">##生成二维码图片</span></span><br><span class="line">curl -o <span class="variable">$&#123;QR_LOCAL_PATH&#125;</span> <span class="variable">$&#123;QR_CODE_API&#125;</span></span><br></pre></td></tr></table></figure>

<p>• url生成二维码时需要encode编码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义 urlencode 函数，用于对 URL 进行编码</span></span><br><span class="line"><span class="function"><span class="title">urlencode</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$1</span>"</span> | sed <span class="string">'s/%/%25/g; s/\&amp;/%26/g; s/ /%20/g; s/"/%22/g; s/#/%23/g; s/\//%2F/g; s/:/%3A/g; s/\?/%3F/g; s/@/%40/g; s/\+/%2B/g; s/\=/%3D/g'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>• url二维码链接名称附加时间字符串：</p>
<p>原因是相同的名字，在使用dingtalk的时候，用markdown语法时，不明原因，然后会出现图片缓存，使用不同的二维码图片名字就不会出现二维码发送显示不出来的问题。</p>
<p>• 使用ossutil上传到阿里云OSS上：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#远程qr地址</span></span><br><span class="line">REMOTE_QR_URL=<span class="string">"https://archive-app.oss-cn-shanghai.aliyuncs.com/<span class="variable">$&#123;REMOTE_PATH&#125;</span><span class="variable">$&#123;QR_NAME&#125;</span>"</span></span><br><span class="line"><span class="comment"># 上传链接地址二维码到阿里云记录日志</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"上传二维码图片链接到阿里云..."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Local QR Path : <span class="variable">$QR_LOCAL_PATH</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Remote QR URL: <span class="variable">$REMOTE_QR_URL</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/ossutil -i <span class="variable">$ACCESS_KEY_ID</span> -k <span class="variable">$ACCESS_KEY_SECRET</span> \</span><br><span class="line">    -e <span class="variable">$REGION_ID</span>.aliyuncs.com \</span><br><span class="line">    cp <span class="variable">$QR_LOCAL_PATH</span> oss://<span class="variable">$BUCKET_NAME</span>/<span class="variable">$REMOTE_PATH</span><span class="variable">$QR_NAME</span> \</span><br><span class="line">    &gt;&gt; upload.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>这儿上传的图片地址都是生成过后的本地地址找到该图片资源然后上传到阿里云服务器。</p>
<p><a name='ios_ding'><strong>五、通知钉钉发送打包消息</strong></a></p>
<p>• 使用markdown语法组装打包信息：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打包编译方式</span></span><br><span class="line">MESSAGE=<span class="string">"#### 打包应用信息\n</span></span><br><span class="line"><span class="string">- app类型：IOS平台</span></span><br><span class="line"><span class="string">- 应用名称：<span class="variable">$&#123;displayName&#125;</span></span></span><br><span class="line"><span class="string">- 项目名：<span class="variable">$&#123;schemeName&#125;</span></span></span><br><span class="line"><span class="string">- 打包类型：<span class="variable">$( [ "$PackageMethod" == "Debug" ] &amp;&amp; echo "测试" || echo "正式" )</span></span></span><br><span class="line"><span class="string">- 版本：<span class="variable">$&#123;version&#125;</span></span></span><br><span class="line"><span class="string">- bundle identifier：<span class="variable">$&#123;bundleIdentifier&#125;</span></span></span><br><span class="line"><span class="string">- IPA包地址：<span class="variable">$&#123;DOWNLOAD_URL&#125;</span></span></span><br><span class="line"><span class="string">- Plist地址：<span class="variable">$&#123;PLIST_URL&#125;</span></span></span><br><span class="line"><span class="string">- 二维码：</span></span><br><span class="line"><span class="string">![下载链接二维码](<span class="variable">$&#123;REMOTE_QR_URL&#125;</span>)</span></span><br><span class="line"><span class="string">安装链接：[点击下载](<span class="variable">$APP_INSTALL_URL</span>)"</span></span><br></pre></td></tr></table></figure>
<p>• 生成带二维码和安装链接的Markdown消息体：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">JSON_MESSAGE=$(<span class="built_in">printf</span> <span class="string">'&#123;"msgtype":"markdown","markdown":&#123;"title":"应用打包已完成！","text":"%s"&#125;&#125;'</span> <span class="string">"<span class="variable">$MESSAGE</span>"</span>)</span><br></pre></td></tr></table></figure>
<p>• 使用oapi.dingtalk.com像钉钉发送消息：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl <span class="string">'https://oapi.dingtalk.com/robot/send?access_token='</span><span class="variable">$TOKEN</span> \</span><br><span class="line">  -H <span class="string">'Content-Type: application/json'</span> \</span><br><span class="line">  -d <span class="string">"<span class="variable">$&#123;JSON_MESSAGE&#125;</span>"</span> \</span><br></pre></td></tr></table></figure>
<p>到这儿就所有的shell脚本逻辑完成，这样子就可以自动化打包了。</p>
<p><strong>以下是所有的详细脚本:</strong> </p>
<p><font color='red'>里面的Access Token、ACCESS_KEY_ID、ACCESS_KEY_SECRET等不要使用，并且都是为了更加真实然后你替换成你自己的，这些信息都是后面被修改过的。</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  Script.sh</span></span><br><span class="line"><span class="comment">#  Package</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  Created by wws on 2023/02/25.</span></span><br><span class="line"><span class="comment">#  Copyright © 2023 年 wws. All rights reserved.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#电脑配置的密码</span></span><br><span class="line">mac_password=<span class="string">"11234"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定要打包编译的方式 : Release,Debug...</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$PackageMethod</span> == <span class="string">"Debug"</span> ]; <span class="keyword">then</span></span><br><span class="line">    build_configuration=<span class="string">"Debug"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"打包方式：Debug"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    build_configuration=<span class="string">"Release"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"打包方式：Release"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否编译工作空间 (例:若是用Cocopods管理的.xcworkspace项目,赋值true;用Xcode默认创建的.xcodeproj,赋值false)</span></span><br><span class="line">is_workspace=<span class="string">"true"</span></span><br><span class="line"><span class="comment"># 进入项目工程目录</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$WORKSPACE</span></span><br><span class="line"><span class="comment"># 获取项目名称</span></span><br><span class="line">projectName=`find . -name *.xcodeproj | awk -F <span class="string">"[/.]"</span> <span class="string">'&#123;print $(NF-1)&#125;'</span>`</span><br><span class="line"><span class="comment"># Scheme Name</span></span><br><span class="line">schemeName=<span class="variable">$&#123;projectName&#125;</span></span><br><span class="line"><span class="comment"># user Name</span></span><br><span class="line">macName=<span class="variable">$USER</span></span><br><span class="line"><span class="comment"># 打包所有生成路径</span></span><br><span class="line">ipaPath=<span class="string">"/Users/<span class="variable">$&#123;macName&#125;</span>/Desktop/<span class="variable">$&#123;schemeName&#125;</span>"</span></span><br><span class="line"><span class="comment"># 临时生成APP路径</span></span><br><span class="line">buildDir=<span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;schemeName&#125;</span>.xcarchive"</span></span><br><span class="line"><span class="comment"># 桌面脚本目录</span></span><br><span class="line">plistPath=<span class="string">"/Users/<span class="variable">$&#123;macName&#125;</span>/Desktop/IOSPackageScript"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 导出ipa所需要的plist文件路径 (默认为AdHocExportOptionsPlist.plist)</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AdHocExportOptionsPlist.plist"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"数据信息"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"pro path: <span class="variable">$WORKSPACE</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"macName: <span class="variable">$macName</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"projectName: <span class="variable">$projectName</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"schemeName: <span class="variable">$schemeName</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"build_configuration: <span class="variable">$build_configuration</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"buildDir: <span class="variable">$buildDir</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ipaPath: <span class="variable">$ipaPath</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"plistPath: <span class="variable">$plistPath</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"exportOptionsPlistPath: <span class="variable">$exportOptionsPlistPath</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始时间</span></span><br><span class="line">beginTime=`date +%s`</span><br><span class="line"></span><br><span class="line"><span class="comment"># 蒲公英分发参数 不分发可忽略 默认不分发 下面的两个KEY是默认测试的网址对应KEY</span></span><br><span class="line">isUploadPgyer=<span class="string">"0"</span></span><br><span class="line">USERKEY=<span class="string">"xxx"</span></span><br><span class="line">APIKEY=<span class="string">"xxx"</span></span><br><span class="line"></span><br><span class="line">uploadFir=<span class="string">"0"</span></span><br><span class="line"><span class="comment"># fir分发参数 不分发可忽略 默认分发</span></span><br><span class="line">isUploadFir=<span class="variable">$&#123;uploadFir&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"33[31m 上传参数值:<span class="variable">$&#123;isUploadFir&#125;</span> n 33[0m"</span></span><br><span class="line">FirApiToken=<span class="string">"931bytiuv19uy68fd4108jfb946e2hp910adb97"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AdHoc,AppStore,Enterprise三种打包方式的区别: http://blog.csdn.net/lwjok2007/article/details/46379945</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[36;1m打包方式 \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m1. AdHoc       \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m2. AppStore    \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m3. Enterprise  \033[0m"</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"\033[33;1m4. Development \033[0m"</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 判读用户打包类型</span></span><br><span class="line">packType=<span class="variable">$&#123;PackageType&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"33[31m 打包参数值:<span class="variable">$&#123;packType&#125;</span> n 33[0m"</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$packType</span> == <span class="string">"AdHoc"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AdHocExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建AdHoc"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$packType</span> == <span class="string">"AppStore"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/AppStoreExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建AppStore"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$packType</span> == <span class="string">"Enterprise"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/EnterpriseExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建Enterprise"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$packType</span> == <span class="string">"Development"</span> ] ; <span class="keyword">then</span></span><br><span class="line">exportOptionsPlistPath=<span class="string">"<span class="variable">$&#123;plistPath&#125;</span>/DevelopmentExportOptionsPlist.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"当前选择构建Development"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"参数无效!!!"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\033[32m*************************  开始构建项目  *************************  \033[0m"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#0.安装证书</span></span><br><span class="line">security unlock-keychain -p <span class="variable">$mac_password</span> ~/Library/Keychains/login.keychain</span><br><span class="line">security <span class="built_in">set</span>-key-partition-list -S apple-tool:,apple: -s -k <span class="variable">$mac_password</span> ~/Library/Keychains/login.keychain-db</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定输出文件目录不存在则创建</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$ipaPath</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="comment"># 如果目录已经存在，则清空目录内的所有文件</span></span><br><span class="line">    rm -rf <span class="string">"<span class="variable">$&#123;ipaPath:?&#125;</span>/"</span>*</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment"># 如果目录不存在，则创建目录</span></span><br><span class="line">    mkdir -p <span class="string">"<span class="variable">$ipaPath</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"目录:<span class="variable">$&#123;ipaPath&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#解锁 钥匙串</span></span><br><span class="line">security unlock-keychain -p <span class="variable">$mac_password</span> ~/Library/Keychains/login.keychain</span><br><span class="line">security <span class="built_in">set</span>-key-partition-list -S apple-tool:,apple: -s -k <span class="variable">$mac_password</span> ~/Library/Keychains/login.keychain-db</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build 生成 APPs</span></span><br><span class="line"><span class="comment"># 判断编译的项目类型是workspace还是project</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">$is_workspace</span> ; <span class="keyword">then</span></span><br><span class="line"><span class="comment"># 编译前清理工程</span></span><br><span class="line">xcodebuild clean -workspace <span class="variable">$&#123;projectName&#125;</span>.xcworkspace \</span><br><span class="line">                 -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                 -configuration <span class="variable">$&#123;build_configuration&#125;</span></span><br><span class="line"></span><br><span class="line">xcodebuild archive -workspace <span class="variable">$&#123;projectName&#125;</span>.xcworkspace \</span><br><span class="line">                   -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                   -configuration <span class="variable">$&#123;build_configuration&#125;</span> \</span><br><span class="line">                   -archivePath <span class="variable">$&#123;buildDir&#125;</span> \</span><br><span class="line">                   -destination <span class="string">'generic/platform=iOS'</span> \</span><br><span class="line">                   -quiet</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment"># 编译前清理工程</span></span><br><span class="line">xcodebuild clean -project <span class="variable">$&#123;projectName&#125;</span>.xcodeproj \</span><br><span class="line">                 -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                 -configuration <span class="variable">$&#123;build_configuration&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xcodebuild archive -project <span class="variable">$&#123;projectName&#125;</span>.xcodeproj \</span><br><span class="line">                   -scheme <span class="variable">$&#123;schemeName&#125;</span> \</span><br><span class="line">                   -configuration <span class="variable">$&#123;build_configuration&#125;</span> \</span><br><span class="line">                   -archivePath <span class="variable">$&#123;buildDir&#125;</span> \</span><br><span class="line">                   -destination <span class="string">'generic/platform=iOS'</span> \</span><br><span class="line">                   -quiet</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># 检查是否构建成功</span></span><br><span class="line"><span class="comment"># 检查 $&#123;buildDir&#125; 目录是否存在有效的 .xcarchive 文件</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$&#123;buildDir&#125;</span>"</span> ] &amp;&amp; [ -n <span class="string">"<span class="variable">$(ls -A $&#123;buildDir&#125;/Products/Applications)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"\033[32;1m项目构建成功\033[0m"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"\033[31;1m项目构建失败\033[0m"</span></span><br><span class="line">  <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"33[31m appName:<span class="variable">$projectName</span> n 33[0m"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成 ipa</span></span><br><span class="line"><span class="comment">#xcodebuild -exportArchive -archivePath $&#123;buildDir&#125; -exportOptionsPlist $&#123;exportOptionsPlistPath&#125; -exportPath $&#123;ipaPath&#125; -allowProvisioningUpdates $&#123;YES&#125; -allowProvisioningDeviceRegistration $&#123;YES&#125; -exportFileName "$&#123;schemeName&#125;.ipa"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成 ipa</span></span><br><span class="line">xcodebuild -exportArchive \</span><br><span class="line">  -archivePath <span class="variable">$&#123;buildDir&#125;</span> \</span><br><span class="line">  -exportOptionsPlist <span class="variable">$&#123;exportOptionsPlistPath&#125;</span> \</span><br><span class="line">  -exportPath <span class="variable">$&#123;ipaPath&#125;</span> \</span><br><span class="line">  -allowProvisioningUpdates <span class="variable">$&#123;YES&#125;</span> \</span><br><span class="line">  -allowProvisioningDeviceRegistration <span class="variable">$&#123;YES&#125;</span> \</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ls <span class="variable">$ipaPath</span>/*.ipa &gt;/dev/null 2&gt;&amp;1; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"33[31m n 生成 IPA 成功 nnnnn33[0m"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"33[31m n 生成 IPA 失败 nnnnn33[0m"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 遍历指定目录下的所有 IPA 文件</span></span><br><span class="line"><span class="keyword">for</span> ipas <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>"</span>/*.ipa; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">"<span class="variable">$ipas</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># 如果当前路径存在 IPA 文件，则判断文件名是否等于 schemeName，如果不是则重命名该文件</span></span><br><span class="line">        ipaName=$(basename <span class="string">"<span class="variable">$ipas</span>"</span>)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;ipaName%.*&#125;</span>"</span> != <span class="string">"<span class="variable">$schemeName</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">            ipaExt=<span class="string">"<span class="variable">$&#123;ipaName##*.&#125;</span>"</span></span><br><span class="line">            newIpaName=<span class="string">"<span class="variable">$&#123;schemeName&#125;</span>.<span class="variable">$&#123;ipaExt&#125;</span>"</span></span><br><span class="line">            mv <span class="string">"<span class="variable">$ipas</span>"</span> <span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;newIpaName&#125;</span>"</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"已将 <span class="variable">$&#123;ipaName&#125;</span> 重命名为 <span class="variable">$&#123;newIpaName&#125;</span>"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">rm -rf <span class="variable">$&#123;buildDir&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#IPA文件的临时路径）</span></span><br><span class="line">TEPE_IPA_FILE=<span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;schemeName&#125;</span>.ipa"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"正在查寻包体信息: <span class="variable">$TEPE_IPA_FILE</span>"</span></span><br><span class="line"><span class="comment"># 获取 IPA 文件所在目录</span></span><br><span class="line">IPA_DIR=<span class="string">"<span class="variable">$(dirname "$TEPE_IPA_FILE")</span>"</span></span><br><span class="line"><span class="comment"># 解压 IPA 文件</span></span><br><span class="line">unzip -o <span class="string">"<span class="variable">$TEPE_IPA_FILE</span>"</span> -d <span class="string">"<span class="variable">$IPA_DIR</span>"</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line"><span class="comment"># 获取 CFBundleShortVersionString</span></span><br><span class="line">version=$(/usr/libexec/PlistBuddy -c <span class="string">"Print :CFBundleShortVersionString"</span> <span class="string">"<span class="variable">$IPA_DIR</span>/Payload/"</span>*.app/Info.plist)</span><br><span class="line"><span class="comment"># 获取 CFBundleIdentifier</span></span><br><span class="line">bundleIdentifier=$(/usr/libexec/PlistBuddy -c <span class="string">"Print :CFBundleIdentifier"</span> <span class="string">"<span class="variable">$IPA_DIR</span>/Payload/"</span>*.app/Info.plist)</span><br><span class="line"><span class="comment"># 获取 CFBundleDisplayName</span></span><br><span class="line">displayName=$(/usr/libexec/PlistBuddy -c <span class="string">"Print :CFBundleDisplayName"</span> <span class="string">"<span class="variable">$IPA_DIR</span>/Payload/"</span>*.app/Info.plist)</span><br><span class="line"><span class="comment"># 提取最后一部分</span></span><br><span class="line">last_part=$(<span class="built_in">echo</span> <span class="variable">$bundleIdentifier</span> | awk -F <span class="string">"."</span> <span class="string">'&#123;print $NF&#125;'</span>)</span><br><span class="line">     </span><br><span class="line"><span class="comment"># 打印结果</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Version: <span class="variable">$version</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bundle Identifier: <span class="variable">$bundleIdentifier</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Display Name: <span class="variable">$displayName</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除解压后的文件夹</span></span><br><span class="line">rm -rf <span class="string">"<span class="variable">$&#123;IPA_DIR&#125;</span>/Payload"</span></span><br><span class="line"><span class="comment"># 获取工程中的 Target 名称，用于作为 IPA 文件名称的一部分</span></span><br><span class="line">ipaActName=<span class="variable">$&#123;schemeName&#125;</span></span><br><span class="line"><span class="comment"># 遍历指定目录下的所有 IPA 文件</span></span><br><span class="line"><span class="keyword">for</span> ipa <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>"</span>/*.ipa; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">"<span class="variable">$ipa</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># 判断文件名是否含有中文字符</span></span><br><span class="line">        filename=$(basename <span class="string">"<span class="variable">$ipa</span>"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"<span class="variable">$filename</span>"</span> <span class="keyword">in</span></span><br><span class="line">          *[![:ascii:]]*) has_chinese=1</span><br><span class="line">          ;;</span><br><span class="line">          *) has_chinese=0</span><br><span class="line">          ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">        <span class="comment"># 提取 IPA 文件扩展名</span></span><br><span class="line">        ipaExt=<span class="string">"<span class="variable">$&#123;filename##*.&#125;</span>"</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$has_chinese</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="comment"># 如果文件名含有中文字符，则使用 IPA 包 Bundle Identifier 的最后一段 和version命名</span></span><br><span class="line">            ipaActName=<span class="string">"<span class="variable">$&#123;last_part&#125;</span>_<span class="variable">$&#123;build_configuration&#125;</span>_<span class="variable">$&#123;version&#125;</span>"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment"># 如果文件名不含有中文字符，则直接使用 Target 名称和 Build Configuration 和 version命名</span></span><br><span class="line">            ipaActName=<span class="string">"<span class="variable">$&#123;ipaActName&#125;</span>_<span class="variable">$&#123;build_configuration&#125;</span>_<span class="variable">$&#123;version&#125;</span>"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="comment"># 构造新的 IPA 文件名，并将原始文件重命名</span></span><br><span class="line">        newIpaName=<span class="string">"<span class="variable">$&#123;ipaActName&#125;</span>.<span class="variable">$&#123;ipaExt&#125;</span>"</span></span><br><span class="line">        mv <span class="string">"<span class="variable">$ipa</span>"</span> <span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;newIpaName&#125;</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"已将 <span class="variable">$&#123;filename&#125;</span> 重命名为 <span class="variable">$&#123;newIpaName&#125;</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ipaActName包的实际名字: <span class="variable">$ipaActName</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传fir</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$isUploadFir</span> == <span class="string">"1"</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"正在上传fir..."</span></span><br><span class="line">    fir p <span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;displayName&#125;</span>/<span class="variable">$&#123;ipaActName&#125;</span>.ipa"</span> -T <span class="variable">$&#123;FirApiToken&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.上传蒲公英分发平台</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$isUploadPgyer</span> == <span class="string">"1"</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"正在上传蒲公英..."</span></span><br><span class="line">curl -F <span class="string">"file=@<span class="variable">$ipaPath</span>/<span class="variable">$&#123;displayName&#125;</span>/<span class="variable">$&#123;ipaActName&#125;</span>.ipa"</span> -F <span class="string">"uKey=<span class="variable">$USERKEY</span>"</span> -F <span class="string">"_api_key=<span class="variable">$APIKEY</span>"</span> http://www.pgyer.com/apiv1/app/upload</span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结束时间</span></span><br><span class="line">endTime=`date +%s`</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"打包时间$[ endTime - beginTime ]秒"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置AccessKeyId和AccessKeySecret</span></span><br><span class="line">ACCESS_KEY_ID=<span class="string">"LTAI58LFpuu795aRBK7g24qkwtBh"</span></span><br><span class="line">ACCESS_KEY_SECRET=<span class="string">"vlKD890ge3u94UBV9gloc60Dopu652vFPtE09"</span></span><br><span class="line"><span class="comment"># 设置阿里云存储空间名称（bucketName）</span></span><br><span class="line">BUCKET_NAME=<span class="string">"archive-app"</span></span><br><span class="line"><span class="comment"># 设置阿里云地域（Region ID）</span></span><br><span class="line">REGION_ID=<span class="string">"oss-cn-shanghai"</span></span><br><span class="line"><span class="comment"># 设置阿里云目标路径（需先手动创建）</span></span><br><span class="line">REMOTE_PATH=<span class="string">"ios/"</span></span><br><span class="line"><span class="comment"># 设置本地文件名</span></span><br><span class="line">FILE_NAME=<span class="string">"<span class="variable">$&#123;ipaActName&#125;</span>.ipa"</span></span><br><span class="line"><span class="comment"># 设置生成的plist文件名称</span></span><br><span class="line">PLIST_NAME=<span class="string">"<span class="variable">$&#123;ipaActName&#125;</span>.plist"</span></span><br><span class="line"><span class="comment"># 设置安装包的下载链接，需要先将阿里云存储空间中对应文件的外网访问地址填入这里</span></span><br><span class="line">DOWNLOAD_URL=<span class="string">"https://archive-app.oss-cn-shanghai.aliyuncs.com/<span class="variable">$&#123;REMOTE_PATH&#125;</span><span class="variable">$&#123;ipaActName&#125;</span>.ipa"</span></span><br><span class="line"><span class="comment"># Plist安装包的下载链接，</span></span><br><span class="line">PLIST_URL=<span class="string">"https://archive-app.oss-cn-shanghai.aliyuncs.com/<span class="variable">$&#123;REMOTE_PATH&#125;</span><span class="variable">$&#123;PLIST_NAME&#125;</span>"</span></span><br><span class="line"><span class="comment"># app安装地址链接，</span></span><br><span class="line">APP_INSTALL_URL=<span class="string">"itms-services://?action=download-manifest&amp;url=https://archive-app.oss-cn-shanghai.aliyuncs.com/<span class="variable">$&#123;REMOTE_PATH&#125;</span><span class="variable">$&#123;PLIST_NAME&#125;</span>"</span></span><br><span class="line"><span class="comment"># IPA文件的实际路径）</span></span><br><span class="line">LOCAL_IPA_FILE=<span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;ipaActName&#125;</span>.ipa"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"本地包的实际路径位置: <span class="variable">$TEPE_IPA_FILE</span>"</span></span><br><span class="line"><span class="comment"># 执行上传ipa文件操作并记录日志</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始上传ipa文件到阿里云OSS..."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"AccessKeyId: <span class="variable">$ACCESS_KEY_ID</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"AccessKeySecret: <span class="variable">$ACCESS_KEY_SECRET</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bucket Name: <span class="variable">$BUCKET_NAME</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Region ID: <span class="variable">$REGION_ID</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Remote Path: <span class="variable">$REMOTE_PATH</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"File Name: <span class="variable">$FILE_NAME</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/ossutil -i <span class="variable">$ACCESS_KEY_ID</span> -k <span class="variable">$ACCESS_KEY_SECRET</span> \</span><br><span class="line">    -e <span class="variable">$REGION_ID</span>.aliyuncs.com \</span><br><span class="line">    cp <span class="variable">$LOCAL_IPA_FILE</span> oss://<span class="variable">$BUCKET_NAME</span>/<span class="variable">$REMOTE_PATH</span><span class="variable">$FILE_NAME</span> \</span><br><span class="line">    &gt;&gt; upload.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ipa文件上传完成！请到阿里云控制台确认。"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行上传plist文件操作并记录日志</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始上传plist文件..."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"AccessKeyId: <span class="variable">$ACCESS_KEY_ID</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"AccessKeySecret: <span class="variable">$ACCESS_KEY_SECRET</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bucket Name: <span class="variable">$BUCKET_NAME</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Region ID: <span class="variable">$REGION_ID</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Remote Path: <span class="variable">$REMOTE_PATH</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"File Name: <span class="variable">$PLIST_NAME</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成plist文件并记录日志</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始生成plist文件..."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ipa Download URL: <span class="variable">$DOWNLOAD_URL</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Plist Download URL: <span class="variable">$PLIST_URL</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"APP Install URL: <span class="variable">$&#123;APP_INSTALL_URL&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bundle Identifier: <span class="variable">$bundleIdentifier</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Bundle Version: <span class="variable">$version</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Display Name: <span class="variable">$displayName</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;?xml version="1.0" encoding="UTF-8"?&gt;'</span>&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;plist version="1.0"&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'    &lt;key&gt;items&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'    &lt;array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'        &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;key&gt;assets&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;software-package&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;url&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                    &lt;string&gt;<span class="variable">$DOWNLOAD_URL</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;full-size-image&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;needs-shine&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;true/&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;url&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;display-image&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                   &lt;key&gt;needs-shine&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;true/&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;key&gt;url&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                    &lt;string&gt;&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;/array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;key&gt;metadata&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'               &lt;key&gt;bundle-identifier&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                &lt;string&gt;<span class="variable">$bundleIdentifier</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;key&gt;bundle-version&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                &lt;string&gt;<span class="variable">$version</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;key&gt;kind&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;string&gt;software&lt;/string&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'                &lt;key&gt;title&lt;/key&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"                &lt;string&gt;<span class="variable">$displayName</span>&lt;/string&gt;"</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'            &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'        &lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'    &lt;/array&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;/dict&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;/plist&gt;'</span> &gt;&gt; <span class="variable">$PLIST_NAME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 Plist 文件保存到指定目录</span></span><br><span class="line">mv <span class="variable">$&#123;PLIST_NAME&#125;</span> <span class="variable">$&#123;ipaPath&#125;</span></span><br><span class="line"><span class="comment"># 定义变量（plist实际路径）</span></span><br><span class="line">PLIST_FILE=<span class="string">"<span class="variable">$&#123;ipaPath&#125;</span>/<span class="variable">$&#123;ipaActName&#125;</span>.plist"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Local File: <span class="variable">$PLIST_FILE</span>"</span></span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/ossutil -i <span class="variable">$ACCESS_KEY_ID</span> -k <span class="variable">$ACCESS_KEY_SECRET</span> \</span><br><span class="line">    -e <span class="variable">$REGION_ID</span>.aliyuncs.com \</span><br><span class="line">    cp <span class="variable">$PLIST_FILE</span> oss://<span class="variable">$BUCKET_NAME</span>/<span class="variable">$REMOTE_PATH</span><span class="variable">$PLIST_NAME</span> \</span><br><span class="line">    &gt;&gt; upload.log 2&gt;&amp;1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"plist文件上传完成！请到阿里云控制台确认。"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 urlencode 函数，用于对 URL 进行编码</span></span><br><span class="line"><span class="function"><span class="title">urlencode</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$1</span>"</span> | sed <span class="string">'s/%/%25/g; s/\&amp;/%26/g; s/ /%20/g; s/"/%22/g; s/#/%23/g; s/\//%2F/g; s/:/%3A/g; s/\?/%3F/g; s/@/%40/g; s/\+/%2B/g; s/\=/%3D/g'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"下载二维码并保存到本地..."</span></span><br><span class="line"><span class="comment"># 下载二维码并保存到本地</span></span><br><span class="line">QR_CODE_API=<span class="string">"https://api.qrserver.com/v1/create-qr-code/?size=80x80&amp;data=<span class="variable">$(urlencode "$APP_INSTALL_URL")</span>"</span></span><br><span class="line">QR_NAME=<span class="string">"<span class="variable">$&#123;last_part&#125;</span>_qr_<span class="variable">$(date +%Y%m%d%H%M%S)</span>.png"</span></span><br><span class="line"><span class="comment">#保存在本地qr地址</span></span><br><span class="line">QR_LOCAL_PATH=<span class="variable">$&#123;IPA_DIR&#125;</span>/<span class="variable">$&#123;QR_NAME&#125;</span></span><br><span class="line"><span class="comment">##生成二维码图片</span></span><br><span class="line">curl -o <span class="variable">$&#123;QR_LOCAL_PATH&#125;</span> <span class="variable">$&#123;QR_CODE_API&#125;</span></span><br><span class="line"><span class="comment">#远程qr地址</span></span><br><span class="line">REMOTE_QR_URL=<span class="string">"https://archive-app.oss-cn-shanghai.aliyuncs.com/<span class="variable">$&#123;REMOTE_PATH&#125;</span><span class="variable">$&#123;QR_NAME&#125;</span>"</span></span><br><span class="line"><span class="comment"># 上传链接地址二维码到阿里云记录日志</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"上传二维码图片链接到阿里云..."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Local QR Path : <span class="variable">$QR_LOCAL_PATH</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Remote QR URL: <span class="variable">$REMOTE_QR_URL</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/ossutil -i <span class="variable">$ACCESS_KEY_ID</span> -k <span class="variable">$ACCESS_KEY_SECRET</span> \</span><br><span class="line">    -e <span class="variable">$REGION_ID</span>.aliyuncs.com \</span><br><span class="line">    cp <span class="variable">$QR_LOCAL_PATH</span> oss://<span class="variable">$BUCKET_NAME</span>/<span class="variable">$REMOTE_PATH</span><span class="variable">$QR_NAME</span> \</span><br><span class="line">    &gt;&gt; upload.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始发送钉钉通知消息..."</span></span><br><span class="line"><span class="comment"># 钉钉机器人</span></span><br><span class="line">ROBOT=<span class="string">"0490bac64-08b1-490-be72-d185uy978342"</span></span><br><span class="line"><span class="comment"># 定义钉钉机器人的 Access Token</span></span><br><span class="line">TOKEN=<span class="string">"f77134d816899nh5ce7d5aa2628900fad3433510785668999dc1aaed89561df24"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"robot : <span class="variable">$ROBOT</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"robot access token: <span class="variable">$TOKEN</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打包编译方式</span></span><br><span class="line">MESSAGE=<span class="string">"#### 打包应用信息\n</span></span><br><span class="line"><span class="string">- app类型：IOS平台</span></span><br><span class="line"><span class="string">- 应用名称：<span class="variable">$&#123;displayName&#125;</span></span></span><br><span class="line"><span class="string">- 项目名：<span class="variable">$&#123;schemeName&#125;</span></span></span><br><span class="line"><span class="string">- 打包类型：<span class="variable">$( [ "$PackageMethod" == "Debug" ] &amp;&amp; echo "测试" || echo "正式" )</span></span></span><br><span class="line"><span class="string">- 版本：<span class="variable">$&#123;version&#125;</span></span></span><br><span class="line"><span class="string">- bundle identifier：<span class="variable">$&#123;bundleIdentifier&#125;</span></span></span><br><span class="line"><span class="string">- IPA包地址：<span class="variable">$&#123;DOWNLOAD_URL&#125;</span></span></span><br><span class="line"><span class="string">- Plist地址：<span class="variable">$&#123;PLIST_URL&#125;</span></span></span><br><span class="line"><span class="string">- 二维码：</span></span><br><span class="line"><span class="string">![下载链接二维码](<span class="variable">$&#123;REMOTE_QR_URL&#125;</span>)</span></span><br><span class="line"><span class="string">安装链接：[点击下载](<span class="variable">$APP_INSTALL_URL</span>)"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 生成带二维码和安装链接的Markdown消息体</span></span><br><span class="line">JSON_MESSAGE=$(<span class="built_in">printf</span> <span class="string">'&#123;"msgtype":"markdown","markdown":&#123;"title":"应用打包已完成！","text":"%s"&#125;&#125;'</span> <span class="string">"<span class="variable">$MESSAGE</span>"</span>)</span><br><span class="line"></span><br><span class="line">curl <span class="string">'https://oapi.dingtalk.com/robot/send?access_token='</span><span class="variable">$TOKEN</span> \</span><br><span class="line">  -H <span class="string">'Content-Type: application/json'</span> \</span><br><span class="line">  -d <span class="string">"<span class="variable">$&#123;JSON_MESSAGE&#125;</span>"</span> \</span><br></pre></td></tr></table></figure>

<p>• <font color='red'>使用时在jekenis需要两个参数：</font></p>
<p><a href="https://imgse.com/i/p9h6cs1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/05/19/p9h6cs1.png" alt="p9h6cs1.png"></a></p>
<p>•  判读用户 AdHoc AppStore Enterprise Development </p>
<blockquote>
<p>如果打包出现证书匹配问题，如果选择的auto 脚本里需要配置，上面脚本已经配置。</p>
<p> -allowProvisioningUpdates ${YES}</p>
<p> -allowProvisioningDeviceRegistration ${YES}</p>
</blockquote>
<p>• <font color='red'>使用archive失败。</font></p>
<blockquote>
<p>如果打包报其他错误，请先在Xcode项目上保证能archive，先解决掉代码上的错误才能保证脚本打包。</p>
<p>请先配置好项目Auto自动证书，和手动打包的证书，并且在打包的Mac系统上有这些证书存在。</p>
<p>如果还包括，检查你的项目使用Xcode是否能archive成功，然后看看是否缺失lib和或者其他sdk库。</p>
</blockquote>
<p>• <font color='red'>使用是请确保电脑设置的密码正确。</font></p>
<blockquote>
<p>#电脑配置的密码 mac_password=”1111”，修改成你自己的。</p>
</blockquote>
<p>• <font color='red'>使用将IOSPackageScript文件夹放在桌面根目录即可。</font></p>
<blockquote>
<p>里面如何项目打包出来的不是英文的名字会自动修改为bundle identifier最后面分隔符的”.”最后部分英文作为包的名字。</p>
<p>确保项目主目录层级下有 .xcworkspace 或者 .xcodeproj文件，不支持在子层级或者多层子级目录下。</p>
<p>是否编译工作空间 (例:若是用Cocopods管理的.xcworkspace项目,赋值true;用Xcode默认创建的.xcodeproj,赋值false)</p>
<p>is_workspace=”true”</p>
</blockquote>
<p>• <font color='red'>打包完成过后就会出现在钉钉消息里</font></p>
<p><a href="https://imgse.com/i/p9h6ozd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2023/05/19/p9h6ozd.png" alt="p9h6ozd.png"></a></p>
]]></content>
      <categories>
        <category>ios</category>
      </categories>
      <tags>
        <tag>technology</tag>
        <tag>ios</tag>
      </tags>
  </entry>
</search>
